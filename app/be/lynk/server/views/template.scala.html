@(languages: be.lynk.server.dto.ListDTO[be.lynk.server.dto.LangDTO], data: be.lynk.server.dto.InterfaceDataDTO,publication:be.lynk.server.dto.AbstractPublicationDTO)
@import play.Play

@import com.fasterxml.jackson.databind.ObjectMapper

<!DOCTYPE html>

<html>
    <head>
        <title>@Messages("site.name")</title>
        <meta charset="utf-8"/>

            <!-- facebook meta -->
        @if(publication!=null) {
            <meta property="og:url" content="http://lynk-test.herokuapp.com/business/@(publication.getBusinessId)/publication/@(publication.getId)" />

            <meta property="og:type" content="website" />
            <meta property="og:site_name" content="Gling" />
            <meta property="fb:app_id" content="1042793935750669" />
            <meta property="og:title" content="@(publication.getTitle) - @(publication.getBusinessName)" />
            @if(publication.getDescription != null) {
                <meta property="og:description" content="@(publication.getDescription)" />
            }

            @if(publication.getPictures.size() > 0) {
                <meta property="og:image" content="https://s3.amazonaws.com/lynk-test/@(publication.getPictures.get(0).getStoredName)" />
                <meta property="og:image:type" content="image/png" />
            }
            @if(publication.getPictures.size() == 0 && publication.getBusinessIllustration != null) {
                <meta property="og:image" content="https://s3.amazonaws.com/lynk-test/@(publication.getBusinessIllustration.getStoredName)" />
                <meta property="og:image:type" content="image/png" />
            }
        }



        @if(Play.application().isProd() == false) {

            @header.dependencies_header()

                <!-- map -->
            <script src='//maps.googleapis.com/maps/api/js?sensor=false'></script>
            <script src="@routes.Assets.at("components/lodash/lodash.min.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("components/angular-google-maps/dist/angular-google-maps.min.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("components/angular-google-maps/dist/angular-google-maps_dev_mapped.min.js")" type="text/javascript"></script>

                <!-- routes -->
            <script src="@routes.Assets.at("javascripts/routes/web-routes.js")" type="text/javascript"></script>

                <!-- init -->
            <script src="@routes.Assets.at("javascripts/Init.js")" type="text/javascript"></script>

                <!-- modals -->
            <script src="@routes.Assets.at("javascripts/modal/LoginModal/LoginModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/ChangePassword/ChangePasswordModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/ForgotPasswordModal/ForgotPasswordModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/HelpModal/HelpModalCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/DownloadFieldModal/DownloadFieldModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/AccountFusionFacebookModal/AccountFusionFacebookModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/CustomerRegistrationModal/CustomerRegistrationModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/BusinessRegistrationModal/BusinessRegistrationModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/AddressModal/AddressModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/EditCustomerInterestModal/EditCustomerInterestModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/PromotionModal/PromotionModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/BusinessNotificationModal/BusinessNotificationModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/OneFieldModal/OneFieldModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/BasicModal/BasicModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/MessageModal/MessageModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/GalleryModal/GalleryModal.js")" type="text/javascript"></script>

                <!-- controllers -->
            <script src="@routes.Assets.at("javascripts/controller/web/WelcomeCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/controller/web/HomeCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/controller/web/BusinessRegistrationCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/controller/web/ProfileCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/controller/web/BusinessCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/controller/web/SearchPageCtrl.js")" type="text/javascript"></script>

                <!-- component -->
            <script src="@routes.Assets.at("javascripts/directive/component/publicationListForBusiness/PublicationListForBusinessCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/directive/component/businessList/BusinessListCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/directive/component/categoryLine/CategoryLineCtrl.js")" type="text/javascript"></script>

                <!-- common angularsj elements -->
            @header.header()
        }

        @if(Play.application().isProd()){

            <script src="@routes.Assets.at("dist/dependencies.min.js")" type="text/javascript"></script>
            <link rel="stylesheet" media="screen" href="@routes.Assets.at("dist/dependencies.css")">

            <script src='//maps.googleapis.com/maps/api/js?sensor=false'></script>

            <script src="@routes.Assets.at("dist/web.min.js")" type="text/javascript"></script>

            <script src="@routes.Assets.at("dist/common.min.js")" type="text/javascript"></script>
        }




            <!-- css -->
            <!-- main -->
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/web.css")">

    </head>
    <body ng-app="app" ng-controller="MainCtrl" >

        <div class="global-container" ng-controller="WelcomeCtrl">

                <!-- load data -->
            <script>
            var data = @Html(new ObjectMapper().writeValueAsString(data)) ;
            var languages = @Html(new ObjectMapper().writeValueAsString(languages.getList)) ;
            var lang = "@ctx().lang().code";
            </script>


                <!-- main content -->
            <div class="main-body">
                <div class="global-content-container">

                    @*<div id="main-header-container">*@

                            <!-- header -->
                        <div
                            class="navigation-bar"
                        ng-class="{'header-with-advanced-search':advancedSearch}">

                            <div class="container header-option-container" >

                                <h1 style="cursor : pointer" ng-click="navigateTo('/')">
                                    {{'--.site.name' | translateText}}</h1>

                                    <!-- seach bar -->
                                    <search-bar-ctrl  ng-info="{mobile:false}"></search-bar-ctrl>


                                    <!-- not connected menu -->
                                <div class="profile-buttons-container" ng-show="accountService.getMyself()==null">
                                        <!-- lang -->
                                    <select class="form-control" ng-model="languageService.currentLanguage" ng-options="lang.code as lang.language for lang in languageService.languages">
                                    </select>
                                    <button type="button" class="btn btn-primary" ng-click="login()">
                                        {{'--.welcome.login' | translateText}}</button>
                                    {{'--.generic.or' | translateText}}
                                    <button type="button" class="btn btn-primary" ng-click="registration()">
                                        {{'--.welcome.signIn' | translateText}}</button>
                                </div>

                                    <!-- connected menu -->
                                <div class="profile-buttons-container" ng-show="accountService.getMyself()!=null" style="display : inline-block">
                                    <div class="dropdown" ng-show="accountService.getMyself()!=null" style="display : inline-block">

                                        <!-- lang -->
                                        <select
                                        class="form-control"
                                        ng-model="languageService.currentLanguage"
                                        ng-options="lang.code as lang.language for lang in languageService.languages"
                                                style="display: inline-block;width:80px">
                                        </select>

                                        <!-- connection button -->
                                        <div class="menu-connection-button-container">
                                            <button
                                            class="btn btn-default dropdown-toggle"
                                            type="button"
                                            id="dropdownMenu1"
                                            data-toggle="dropdown"
                                            aria-expanded="true"
                                            style="max-width: 200px;">
                                                {{accountService.getMyself().firstname}} {{accountService.getMyself().lastname}}
                                                <span class="caret"></span>
                                            </button>

                                            <!-- connected menu -->
                                            <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="dropdownMenu1">
                                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="navigateTo('/profile')">
                                                    {{'--.welcome.myProfile' | translateText}}</a></li>
                                                <li ng-show="accountService.getMyself().type == 'BUSINESS'" role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="navigateTo('/business/'+accountService.getMyself().businessId)">
                                                    {{'--.welcome.myBusiness' | translateText}}</a></li>
                                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="logout()">
                                                    {{'--.generic.logout' | translateText}}</a></li>
                                                <li>
                                                    <ul></ul>
                                                </li>
                                            </ul>
                                        </div>

                                        <!-- position choice -->
                                        <img src="/assets/images/menu/icon_home.png" />
                                        <select
                                        class="form-control"
                                        ng-model="currentPosition"
                                        ng-options="position.key as position.translation | translateText for position in positions"
                                        style="display: inline-block;width: 120px">
                                        </select>
                                    </div>
                                </div>

                            </div>
                        </div>
                    @*</div>*@

                    <div class="container main-container"
                    ng-class="{'main-container-with-advanced-search':advancedSearch}">

                            <!-- content -->
                        <div ng-view></div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
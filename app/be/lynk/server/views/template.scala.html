@(languages: be.lynk.server.dto.ListDTO[be.lynk.server.dto.LangDTO], data: be.lynk.server.dto.InterfaceDataDTO,publication:be.lynk.server.dto.AbstractPublicationDTO)
@import com.fasterxml.jackson.databind.ObjectMapper
@import play.Play

<!DOCTYPE html>

<html>
    <head>
        <title>Gling - What's Up in my Shops</title>
        <meta charset="utf-8"/>
        <link rel="shortcut icon" href="/assets/images/icon.ico">

        <meta http-equiv="content-language" content="fr">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="description" content="Suivez l’actualité de  vos commerces favoris ! Restaurants, boutiques, théâtres, magasins de décoration,… Gling rassemble tous les types d’établissements pour répondre à l’ensemble de vos envies.">
        <meta name="keywords" content="Magasin Commerce Commerçant Consommateur Client Local Proximité Promotion Réduction Actualité Nouveauté Evénement Coordonnées Contact Heures ouverture Téléphone E-mail Adresse Communication Application Géolocalisation Gling Shop Deal">
        <meta name="robots" content="index,follow">
        <meta name="revisit-after" content="15days">
        <meta name="identifier-url" content="http://www.gling.be">
        <meta name="author" content="Gling">
        <meta name="reply-to" content="info@@gling.be">


            <!-- facebook meta -->
        @if(publication!=null) {
            <meta property="og:url" content="@(data.getUrlBase)/business/@(publication.getBusinessId)/publication/@(publication.getId)" />

            <meta property="og:type" content="website" />
            <meta property="og:site_name" content="Gling" />
            <meta property="fb:app_id" content="@(data.getAppId)" />
            <meta property="og:title" content="@(publication.getTitle) - @(publication.getBusinessName)" />
            @if(publication.getDescription != null) {
                <meta property="og:description" content="@(publication.getDescription)" />
            }

            @if(publication.getPictures.size() > 0) {
                <meta property="og:image" content="@(data.getFileBucketUrl)/@(publication.getPictures.get(0).getStoredName)" />
                <meta property="og:image:type" content="image/png" />
            }
            @if(publication.getPictures.size() == 0 && publication.getBusinessIllustration != null) {
                <meta property="og:image" content="@(data.getFileBucketUrl)/@(publication.getBusinessIllustration.getStoredName)" />
                <meta property="og:image:type" content="image/png" />
            }
        }

        @if(publication==null) {
            <meta property="og:url" content="https://www.gling.be" />

            <meta property="og:type" content="website" />
            <meta property="og:site_name" content="Gling" />
            <meta property="fb:app_id" content="@(data.getAppId)" />
            <meta property="og:title" content="Gling - What's Up in my Shops" />
            <meta property="og:description" content="Découvrez les commerces de votre quartier" />
            <meta property="og:image" content="/assets/images/icon-180.png" />
            <meta property="og:image:type" content="image/png" />
        }


        @if(data.getAddStatus().equals("PROD")) {
            <!-- google analytics -->
            <script>
            ( function ( i, s, o, g, r, a, m ) { i[ 'GoogleAnalyticsObject' ] = r ; i[ r ] = i[ r ] || function ( ) {
            ( i[ r ].q = i[ r ].q ||[ ] ).push ( arguments ) }, i[ r ].l = 1 * new Date ( ) ; a = s.createElement ( o ),
            m = s.getElementsByTagName ( o )[ 0 ] ; a.async = 1 ; a.src = g ; m.parentNode.insertBefore ( a, m )
            } ) ( window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga' ) ;

            ga ( 'create', 'UA-68956215-1', 'auto' ) ;
            ga ( 'send', 'pageview' ) ;

            </script>
        }



        @* @if(true){ *@
        @if(Play.application().isProd() == false) {

             @header.dependencies_header()

                <!-- map -->
            <script src='//maps.googleapis.com/maps/api/js?sensor=false'></script>
            <script src="@routes.Assets.at("components/lodash/lodash.min.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("components/angular-google-maps/dist/angular-google-maps.min.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("components/angular-google-maps/dist/angular-google-maps_dev_mapped.min.js")" type="text/javascript"></script>

                <!-- routes -->
            <script src="@routes.Assets.at("javascripts/routes/web-routes.js")" type="text/javascript"></script>

                <!-- init -->
            <script src="@routes.Assets.at("javascripts/Init.js")" type="text/javascript"></script>

                <!-- modals -->
            <script src="@routes.Assets.at("javascripts/modal/LoginModal/LoginModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/ChangePassword/ChangePasswordModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/ForgotPasswordModal/ForgotPasswordModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/HelpModal/HelpModalCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/DownloadFieldModal/DownloadFieldModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/AccountFusionFacebookModal/AccountFusionFacebookModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/CustomerRegistrationModal/CustomerRegistrationModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/BusinessRegistrationModal/BusinessRegistrationModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/AddressModal/AddressModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/EditCustomerInterestModal/EditCustomerInterestModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/PromotionModal/PromotionModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/BusinessNotificationModal/BusinessNotificationModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/OneFieldModal/OneFieldModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/BasicModal/BasicModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/MessageModal/MessageModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/GalleryModal/GalleryModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/IframeModal/IframeModal.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/modal/AccountFusionFacebookModal/AccountFusionFacebookModal.js")" type="text/javascript"></script>

                <!-- controllers -->
            <script src="@routes.Assets.at("javascripts/controller/web/HomeCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/controller/web/ProfileCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/controller/web/BusinessCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/controller/web/SearchPageCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/controller/web/FollowedBusinessPageCtrl.js")" type="text/javascript"></script>

                <!-- component -->
            <script src="@routes.Assets.at("javascripts/directive/component/publicationList/PublicationListCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/directive/component/publicationWidget/PublicationWidgetCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/directive/component/publicationListForBusiness/PublicationListForBusinessCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/directive/component/businessList/BusinessListCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/directive/component/categoryLine/CategoryLineCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/directive/web/headerBar/HeaderBarCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/directive/web/footerBar/FooterBarCtrl.js")" type="text/javascript"></script>
            <script src="@routes.Assets.at("javascripts/directive/component/toTop/ToTopCtrl.js")" type="text/javascript"></script>

            <!-- service -->
            <script src="@routes.Assets.at("javascripts/service/FlashService.js")" type="text/javascript"></script>

                <!-- common angularsj elements -->
            @header.header()

                <!-- css -->
            <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
            <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/web.css")">
            <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/glingicon.css")">
        }

         @* @if(false){*@
         @if(Play.application().isProd()){

             <script src="@routes.Assets.at("dist/dependencies."+data.getProjectLastVersion+".final.js")" type="text/javascript"></script>

             <script src="@routes.Assets.at("dist/web."+data.getProjectLastVersion+".final.js")" type="text/javascript"></script>

             <script src="@routes.Assets.at("dist/common."+data.getProjectLastVersion+".final.js")" type="text/javascript"></script>

             <link rel="stylesheet" media="screen" href="@routes.Assets.at("dist/styleDependencies."+data.getProjectLastVersion+".final.css")">
        }

    </head>
    <body ng-app="app" ng-controller="MainCtrl">


        <!-- load data -->
        <script>
        var data = @Html(new ObjectMapper().writeValueAsString(data)) ;
        var languages = @Html(new ObjectMapper().writeValueAsString(languages.getList)) ;
        var lang = "@ctx().lang().code";
        </script>

        <!-- progress bar -->
        <div class="progressBar"
            ng-style="progressBarCss">
        </div>

        <!-- header bar -->
        <header-bar-ctrl></header-bar-ctrl>

        <!-- content -->
        <div class="container-content">
            <div ng-view></div>
        </div>

            <!-- footer bar -->
        <footer-bar-ctrl></footer-bar-ctrl>

    </body>
</html>
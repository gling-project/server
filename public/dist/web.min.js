(function(){function a(a,b){if(a!==b){var c=null===a,d=a===u,e=a===a,f=null===b,g=b===u,h=b===b;if(a>b&&!f||!e||c&&!g&&h||d&&h)return 1;if(b>a&&!c||!h||f&&!d&&e||g&&e)return-1}return 0}function b(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function c(a,b,c){if(b!==b)return m(a,c);c-=1;for(var d=a.length;++c<d;)if(a[c]===b)return c;return-1}function d(a){return"function"==typeof a||!1}function e(a){return null==a?"":a+""}function f(a,b){for(var c=-1,d=a.length;++c<d&&-1<b.indexOf(a.charAt(c)););return c}function g(a,b){for(var c=a.length;c--&&-1<b.indexOf(a.charAt(c)););return c}function h(b,c){return a(b.a,c.a)||b.b-c.b}function i(a){return Ja[a]}function j(a){return Ka[a]}function k(a,b,c){return b?a=Na[a]:c&&(a=Oa[a]),"\\"+a}function l(a){return"\\"+Oa[a]}function m(a,b,c){var d=a.length;for(b+=c?0:-1;c?b--:++b<d;){var e=a[b];if(e!==e)return b}return-1}function n(a){return!!a&&"object"==typeof a}function o(a){return 160>=a&&a>=9&&13>=a||32==a||160==a||5760==a||6158==a||a>=8192&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function p(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=N,f[++e]=c);return f}function q(a){for(var b=-1,c=a.length;++b<c&&o(a.charCodeAt(b)););return b}function r(a){for(var b=a.length;b--&&o(a.charCodeAt(b)););return b}function s(a){return La[a]}function t(o){function Ja(a){if(n(a)&&!(Bf(a)||a instanceof Ma)){if(a instanceof La)return a;if(_d.call(a,"__chain__")&&_d.call(a,"__wrapped__"))return Pc(a)}return new La(a)}function Ka(){}function La(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function Ma(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ae,this.__views__=[]}function Na(){this.__data__={}}function Oa(a){var b=a?a.length:0;for(this.data={hash:pe(null),set:new je};b--;)this.push(a[b])}function Pa(a,b){var c=a.data;return("string"==typeof b||pd(b)?c.set.has(b):c.hash[b])?0:-1}function Qa(a,b){var c=-1,d=a.length;for(b||(b=Nd(d));++c<d;)b[c]=a[c];return b}function Ra(a,b){for(var c=-1,d=a.length;++c<d&&!1!==b(a[c],c,a););return a}function Sa(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function Ta(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function Wa(a,b){for(var c=-1,d=a.length,e=Nd(d);++c<d;)e[c]=b(a[c],c,a);return e}function Xa(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function Ya(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function Za(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function $a(a,b,c,d){return a!==u&&_d.call(d,c)?a:b}function _a(a,b,c){for(var d=-1,e=Mf(b),f=e.length;++d<f;){var g=e[d],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&(h!==u||g in a)||(a[g]=i)}return a}function ab(a,b){return null==b?a:cb(b,Mf(b),a)}function bb(a,b){for(var c=-1,d=null==a,e=!d&&Cc(a),f=e?a.length:0,g=b.length,h=Nd(g);++c<g;){var i=b[c];h[c]=e?Dc(i,f)?a[i]:u:d?u:a[i]}return h}function cb(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function db(a,b,c){var d=typeof a;return"function"==d?b===u?a:Nb(a,b,c):null==a?Id:"object"==d?ub(a):b===u?Md(a):vb(a,b)}function eb(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),h!==u)return h;if(!pd(a))return a;if(d=Bf(a)){if(h=yc(a),!b)return Qa(a,h)}else{var i=be.call(a),j=i==T;if(i!=V&&i!=O&&(!j||e))return Ia[i]?Ac(a,i,b):e?a:{};if(h=zc(j?{}:a),!b)return ab(h,a)}for(f||(f=[]),g||(g=[]),e=f.length;e--;)if(f[e]==a)return g[e];return f.push(a),g.push(h),(d?Ra:nb)(a,function(d,e){h[e]=eb(d,b,c,e,a,f,g)}),h}function fb(a,b,c){if("function"!=typeof a)throw new Wd(M);return ke(function(){a.apply(u,c)},b)}function gb(a,b){var d=a?a.length:0,e=[];if(!d)return e;var f=-1,g=vc(),h=g===c,i=h&&b.length>=J&&pe&&je?new Oa(b):null,j=b.length;i&&(g=Pa,h=!1,b=i);a:for(;++f<d;)if(i=a[f],h&&i===i){for(var k=j;k--;)if(b[k]===i)continue a;e.push(i)}else 0>g(b,i,0)&&e.push(i);return e}function hb(a,b){var c=!0;return He(a,function(a,d,e){return c=!!b(a,d,e)}),c}function ib(a,b,c,d){var e=d,f=e;return He(a,function(a,g,h){g=+b(a,g,h),(c(g,e)||g===d&&g===f)&&(e=g,f=a)}),f}function jb(a,b){var c=[];return He(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function kb(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}function lb(a,b,c,d){d||(d=[]);for(var e=-1,f=a.length;++e<f;){var g=a[e];n(g)&&Cc(g)&&(c||Bf(g)||ld(g))?b?lb(g,b,c,d):Xa(d,g):c||(d[d.length]=g)}return d}function mb(a,b){Je(a,b,Ad)}function nb(a,b){return Je(a,b,Mf)}function ob(a,b){return Ke(a,b,Mf)}function pb(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];od(a[g])&&(f[++e]=g)}return f}function qb(a,b,c){if(null!=a){c!==u&&c in Nc(a)&&(b=[c]),c=0;for(var d=b.length;null!=a&&d>c;)a=a[b[c++]];return c&&c==d?a:u}}function rb(a,b,c,d,e,f){if(a===b)a=!0;else if(null==a||null==b||!pd(a)&&!n(b))a=a!==a&&b!==b;else a:{var g=rb,h=Bf(a),i=Bf(b),j=P,k=P;h||(j=be.call(a),j==O?j=V:j!=V&&(h=vd(a))),i||(k=be.call(b),k==O?k=V:k!=V&&vd(b));var l=j==V,i=k==V,k=j==k;if(!k||h||l){if(!d&&(j=l&&_d.call(a,"__wrapped__"),i=i&&_d.call(b,"__wrapped__"),j||i)){a=g(j?a.value():a,i?b.value():b,c,d,e,f);break a}if(k){for(e||(e=[]),f||(f=[]),j=e.length;j--;)if(e[j]==a){a=f[j]==b;break a}e.push(a),f.push(b),a=(h?qc:sc)(a,b,g,c,d,e,f),e.pop(),f.pop()}else a=!1}else a=rc(a,b,j)}return a}function sb(a,b,c){var d=b.length,e=d,f=!c;if(null==a)return!e;for(a=Nc(a);d--;){var g=b[d];if(f&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++d<e;){var g=b[d],h=g[0],i=a[h],j=g[1];if(f&&g[2]){if(i===u&&!(h in a))return!1}else if(g=c?c(i,j,h):u,g===u?!rb(j,i,c,!0):!g)return!1}return!0}function tb(a,b){var c=-1,d=Cc(a)?Nd(a.length):[];return He(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function ub(a){var b=wc(a);if(1==b.length&&b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null==a?!1:a[c]===d&&(d!==u||c in Nc(a))}}return function(a){return sb(a,b)}}function vb(a,b){var c=Bf(a),d=Fc(a)&&b===b&&!pd(b),e=a+"";return a=Oc(a),function(f){if(null==f)return!1;var g=e;if(f=Nc(f),!(!c&&d||g in f)){if(f=1==a.length?f:qb(f,Cb(a,0,-1)),null==f)return!1;g=Uc(a),f=Nc(f)}return f[g]===b?b!==u||g in f:rb(b,f[g],u,!0)}}function wb(a,b,c,d,e){if(!pd(a))return a;var f=Cc(b)&&(Bf(b)||vd(b)),g=f?u:Mf(b);return Ra(g||b,function(h,i){if(g&&(i=h,h=b[i]),n(h)){d||(d=[]),e||(e=[]);a:{for(var j=i,k=d,l=e,m=k.length,o=b[j];m--;)if(k[m]==o){a[j]=l[m];break a}var m=a[j],p=c?c(m,o,j,a,b):u,q=p===u;q&&(p=o,Cc(o)&&(Bf(o)||vd(o))?p=Bf(m)?m:Cc(m)?Qa(m):[]:sd(o)||ld(o)?p=ld(m)?yd(m):sd(m)?m:{}:q=!1),k.push(o),l.push(p),q?a[j]=wb(p,o,c,k,l):(p===p?p!==m:m===m)&&(a[j]=p)}}else j=a[i],k=c?c(j,h,i,a,b):u,(l=k===u)&&(k=h),k===u&&(!f||i in a)||!l&&(k===k?k===j:j!==j)||(a[i]=k)}),a}function xb(a){return function(b){return null==b?u:b[a]}}function yb(a){var b=a+"";return a=Oc(a),function(c){return qb(c,a,b)}}function zb(a,b){for(var c=a?b.length:0;c--;){var d=b[c];if(d!=e&&Dc(d)){var e=d;le.call(a,d,1)}}}function Ab(a,b){return a+qe(ye()*(b-a+1))}function Bb(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Cb(a,b,c){var d=-1,e=a.length;for(b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c=c===u||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0,c=Nd(e);++d<e;)c[d]=a[d+b];return c}function Db(a,b){var c;return He(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Eb(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].c;return a}function Fb(b,c,d){var e=tc(),f=-1;return c=Wa(c,function(a){return e(a)}),b=tb(b,function(a){return{a:Wa(c,function(b){return b(a)}),b:++f,c:a}}),Eb(b,function(b,c){var e;a:{for(var f=-1,g=b.a,h=c.a,i=g.length,j=d.length;++f<i;)if(e=a(g[f],h[f])){if(f>=j)break a;f=d[f],e*="asc"===f||!0===f?1:-1;break a}e=b.b-c.b}return e})}function Gb(a,b){var c=0;return He(a,function(a,d,e){c+=+b(a,d,e)||0}),c}function Hb(a,b){var d=-1,e=vc(),f=a.length,g=e===c,h=g&&f>=J,i=h&&pe&&je?new Oa(void 0):null,j=[];i?(e=Pa,g=!1):(h=!1,i=b?[]:j);a:for(;++d<f;){var k=a[d],l=b?b(k,d,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),j.push(k)}else 0>e(i,l,0)&&((b||h)&&i.push(l),j.push(k))}return j}function Ib(a,b){for(var c=-1,d=b.length,e=Nd(d);++c<d;)e[c]=a[b[c]];return e}function Jb(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?Cb(a,d?0:f,d?f+1:e):Cb(a,d?f+1:0,d?e:f)}function Kb(a,b){var c=a;c instanceof Ma&&(c=c.value());for(var d=-1,e=b.length;++d<e;)var f=b[d],c=f.func.apply(f.thisArg,Xa([c],f.args));return c}function Lb(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&Ce>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)&&null!==g?d=f+1:e=f}return e}return Mb(a,b,Id,c)}function Mb(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,i=b===u;f>e;){var j=qe((e+f)/2),k=c(a[j]),l=k!==u,m=k===k;(g?m||d:h?m&&l&&(d||null!=k):i?m&&(d||l):null==k?0:d?b>=k:b>k)?e=j+1:f=j}return ve(f,Be)}function Nb(a,b,c){if("function"!=typeof a)return Id;if(b===u)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function Ob(a){var b=new ee(a.byteLength);return new me(b).set(new me(a)),b}function Pb(a,b,c){for(var d=c.length,e=-1,f=ue(a.length-d,0),g=-1,h=b.length,i=Nd(h+f);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function Qb(a,b,c){for(var d=-1,e=c.length,f=-1,g=ue(a.length-e,0),h=-1,i=b.length,j=Nd(g+i);++f<g;)j[f]=a[f];for(g=f;++h<i;)j[g+h]=b[h];for(;++d<e;)j[g+c[d]]=a[f++];return j}function Rb(a,b){return function(c,d,e){var f=b?b():{};if(d=tc(d,e,3),Bf(c)){e=-1;for(var g=c.length;++e<g;){var h=c[e];a(f,h,d(h,e,c),c)}}else He(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function Sb(a){return jd(function(b,c){var d=-1,e=null==b?0:c.length,f=e>2?c[e-2]:u,g=e>2?c[2]:u,h=e>1?c[e-1]:u;for("function"==typeof f?(f=Nb(f,h,5),e-=2):(f="function"==typeof h?h:u,e-=f?1:0),g&&Ec(c[0],c[1],g)&&(f=3>e?u:f,e=1);++d<e;)(g=c[d])&&a(b,g,f);return b})}function Tb(a,b){return function(c,d){var e=c?Ne(c):0;if(!Hc(e))return a(c,d);for(var f=b?e:-1,g=Nc(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function Ub(a){return function(b,c,d){var e=Nc(b);d=d(b);for(var f=d.length,g=a?f:-1;a?g--:++g<f;){var h=d[g];if(!1===c(e[h],h,e))break}return b}}function Vb(a,b){function c(){return(this&&this!==Ua&&this instanceof c?d:a).apply(b,arguments)}var d=Xb(a);return c}function Wb(a){return function(b){var c=-1;b=Gd(Dd(b));for(var d=b.length,e="";++c<d;)e=a(e,b[c],c);return e}}function Xb(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=Ge(a.prototype),b=a.apply(c,b);return pd(b)?b:c}}function Yb(a){function b(c,d,e){return e&&Ec(c,d,e)&&(d=u),c=pc(c,a,u,u,u,u,u,d),c.placeholder=b.placeholder,c}return b}function Zb(a,b){return jd(function(c){var d=c[0];return null==d?d:(c.push(b),a.apply(u,c))})}function $b(a,b){return function(c,d,e){if(e&&Ec(c,d,e)&&(d=u),d=tc(d,e,3),1==d.length){e=c=Bf(c)?c:Mc(c);for(var f=d,g=-1,h=e.length,i=b,j=i;++g<h;){var k=e[g],l=+f(k);a(l,i)&&(i=l,j=k)}if(e=j,!c.length||e!==b)return e}return ib(c,d,a,b)}}function _b(a,c){return function(d,e,f){return e=tc(e,f,3),Bf(d)?(e=b(d,e,c),e>-1?d[e]:u):kb(d,e,a)}}function ac(a){return function(c,d,e){return c&&c.length?(d=tc(d,e,3),b(c,d,a)):-1}}function bc(a){return function(b,c,d){return c=tc(c,d,3),kb(b,c,a,!0)}}function cc(a){return function(){for(var b,c=arguments.length,d=a?c:-1,e=0,f=Nd(c);a?d--:++d<c;){var g=f[e++]=arguments[d];if("function"!=typeof g)throw new Wd(M);!b&&La.prototype.thru&&"wrapper"==uc(g)&&(b=new La([],!0))}for(d=b?-1:c;++d<c;){var g=f[d],e=uc(g),h="wrapper"==e?Me(g):u;b=h&&Gc(h[0])&&h[1]==(D|z|B|E)&&!h[4].length&&1==h[9]?b[uc(h[0])].apply(b,h[3]):1==g.length&&Gc(g)?b[e]():b.thru(g)}return function(){var a=arguments,d=a[0];if(b&&1==a.length&&Bf(d)&&d.length>=J)return b.plant(d).value();for(var e=0,a=c?f[e].apply(this,a):d;++e<c;)a=f[e].call(this,a);return a}}}function dc(a,b){return function(c,d,e){return"function"==typeof d&&e===u&&Bf(c)?a(c,d):b(c,Nb(d,e,3))}}function ec(a){return function(b,c,d){return("function"!=typeof c||d!==u)&&(c=Nb(c,d,3)),a(b,c,Ad)}}function fc(a){return function(b,c,d){return("function"!=typeof c||d!==u)&&(c=Nb(c,d,3)),a(b,c)}}function gc(a){return function(b,c,d){var e={};return c=tc(c,d,3),nb(b,function(b,d,f){f=c(b,d,f),d=a?f:d,b=a?b:f,e[d]=b}),e}}function hc(a){return function(b,c,d){return b=e(b),(a?b:"")+lc(b,c,d)+(a?"":b)}}function ic(a){var b=jd(function(c,d){var e=p(d,b.placeholder);return pc(c,a,u,d,e)});return b}function jc(a,b){return function(c,d,e,f){var g=3>arguments.length;return"function"==typeof d&&f===u&&Bf(c)?a(c,d,e,g):Bb(c,tc(d,f,4),e,g,b)}}function kc(a,b,c,d,e,f,g,h,i,j){function k(){for(var t=arguments.length,v=t,y=Nd(t);v--;)y[v]=arguments[v];if(d&&(y=Pb(y,d,e)),f&&(y=Qb(y,f,g)),o||r){var v=k.placeholder,z=p(y,v),t=t-z.length;if(j>t){var A=h?Qa(h):u,t=ue(j-t,0),D=o?z:u,z=o?u:z,E=o?y:u,y=o?u:y;return b|=o?B:C,b&=~(o?C:B),q||(b&=~(w|x)),y=[a,b,c,E,D,y,z,A,i,t],A=kc.apply(u,y),Gc(a)&&Oe(A,y),A.placeholder=v,A}}if(v=m?c:this,A=n?v[a]:a,h)for(t=y.length,D=ve(h.length,t),z=Qa(y);D--;)E=h[D],y[D]=Dc(E,t)?z[E]:u;return l&&i<y.length&&(y.length=i),this&&this!==Ua&&this instanceof k&&(A=s||Xb(a)),A.apply(v,y)}var l=b&D,m=b&w,n=b&x,o=b&z,q=b&y,r=b&A,s=n?u:Xb(a);return k}function lc(a,b,c){return a=a.length,b=+b,b>a&&se(b)?(b-=a,c=null==c?" ":c+"",Ed(c,oe(b/c.length)).slice(0,b)):""}function mc(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Nd(j+h);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];return(this&&this!==Ua&&this instanceof e?g:a).apply(f?c:this,k)}var f=b&w,g=Xb(a);return e}function nc(a){var b=Rd[a];return function(a,c){return(c=c===u?0:+c||0)?(c=he(10,c),b(a*c)/c):b(a)}}function oc(a){return function(b,c,d,e){var f=tc(d);return null==d&&f===db?Lb(b,c,a):Mb(b,c,f(d,e,1),a)}}function pc(a,b,c,d,e,f,g,h){var i=b&x;if(!i&&"function"!=typeof a)throw new Wd(M);var j=d?d.length:0;if(j||(b&=~(B|C),d=e=u),j-=e?e.length:0,b&C){var k=d,l=e;d=e=u}var m=i?u:Me(a);return c=[a,b,c,d,e,k,l,f,g,h],m&&(d=c[1],b=m[1],h=d|b,e=b==D&&d==z||b==D&&d==E&&c[7].length<=m[8]||b==(D|E)&&d==z,(D>h||e)&&(b&w&&(c[2]=m[2],h|=d&w?0:y),(d=m[3])&&(e=c[3],c[3]=e?Pb(e,d,m[4]):Qa(d),c[4]=e?p(c[3],N):Qa(m[4])),(d=m[5])&&(e=c[5],c[5]=e?Qb(e,d,m[6]):Qa(d),c[6]=e?p(c[5],N):Qa(m[6])),(d=m[7])&&(c[7]=Qa(d)),b&D&&(c[8]=null==c[8]?m[8]:ve(c[8],m[8])),null==c[9]&&(c[9]=m[9]),c[0]=m[0],c[1]=h),b=c[1],h=c[9]),c[9]=null==h?i?0:a.length:ue(h-j,0)||0,(m?Le:Oe)(b==w?Vb(c[0],c[2]):b!=B&&b!=(w|B)||c[4].length?kc.apply(u,c):mc.apply(u,c),c)}function qc(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length;if(i!=j&&(!e||i>=j))return!1;for(;++h<i;){var k=a[h],j=b[h],l=d?d(e?j:k,e?k:j,h):u;if(l!==u){if(l)continue;return!1}if(e){if(!Za(b,function(a){return k===a||c(k,a,d,e,f,g)}))return!1}else if(k!==j&&!c(k,j,d,e,f,g))return!1}return!0}function rc(a,b,c){switch(c){case Q:case R:return+a==+b;case S:return a.name==b.name&&a.message==b.message;case U:return a!=+a?b!=+b:a==+b;case W:case X:return a==b+""}return!1}function sc(a,b,c,d,e,f,g){var h=Mf(a),i=h.length,j=Mf(b).length;if(i!=j&&!e)return!1;for(j=i;j--;){var k=h[j];if(!(e?k in b:_d.call(b,k)))return!1}for(var l=e;++j<i;){var k=h[j],m=a[k],n=b[k],o=d?d(e?n:m,e?m:n,k):u;if(o===u?!c(m,n,d,e,f,g):!o)return!1;l||(l="constructor"==k)}return l||(c=a.constructor,d=b.constructor,!(c!=d&&"constructor"in a&&"constructor"in b)||"function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)?!0:!1}function tc(a,b,c){var d=Ja.callback||Hd,d=d===Hd?db:d;return c?d(a,b,c):d}function uc(a){for(var b=a.name+"",c=Fe[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function vc(a,b,d){var e=Ja.indexOf||Tc,e=e===Tc?c:e;return a?e(a,b,d):e}function wc(a){a=Bd(a);for(var b=a.length;b--;){var c=a[b][1];a[b][2]=c===c&&!pd(c)}return a}function xc(a,b){var c=null==a?u:a[b];return qd(c)?c:u}function yc(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&_d.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function zc(a){return a=a.constructor,"function"==typeof a&&a instanceof a||(a=Td),new a}function Ac(a,b,c){var d=a.constructor;switch(b){case Y:return Ob(a);case Q:case R:return new d(+a);case Z:case $:case _:case aa:case ba:case ca:case da:case ea:case fa:return b=a.buffer,new d(c?Ob(b):b,a.byteOffset,a.length);case U:case X:return new d(a);case W:var e=new d(a.source,ya.exec(a));e.lastIndex=a.lastIndex}return e}function Bc(a,b,c){return null==a||Fc(b,a)||(b=Oc(b),a=1==b.length?a:qb(a,Cb(b,0,-1)),b=Uc(b)),b=null==a?a:a[b],null==b?u:b.apply(a,c)}function Cc(a){return null!=a&&Hc(Ne(a))}function Dc(a,b){return a="number"==typeof a||Ba.test(a)?+a:-1,b=null==b?De:b,a>-1&&0==a%1&&b>a}function Ec(a,b,c){if(!pd(c))return!1;var d=typeof b;return("number"==d?Cc(c)&&Dc(b,c.length):"string"==d&&b in c)?(b=c[b],a===a?a===b:b!==b):!1}function Fc(a,b){var c=typeof a;return"string"==c&&ra.test(a)||"number"==c?!0:Bf(a)?!1:!qa.test(a)||null!=b&&a in Nc(b)}function Gc(a){var b=uc(a),c=Ja[b];return"function"==typeof c&&b in Ma.prototype?a===c?!0:(b=Me(c),!!b&&a===b[0]):!1}function Hc(a){return"number"==typeof a&&a>-1&&0==a%1&&De>=a}function Ic(a,b){return a===u?b:Cf(a,b,Ic)}function Jc(a,b){a=Nc(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function Kc(a,b){var c={};return mb(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function Lc(a){for(var b=Ad(a),c=b.length,d=c&&a.length,e=!!d&&Hc(d)&&(Bf(a)||ld(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&Dc(h,d)||_d.call(a,h))&&g.push(h)}return g}function Mc(a){return null==a?[]:Cc(a)?pd(a)?a:Td(a):Cd(a)}function Nc(a){return pd(a)?a:Td(a)}function Oc(a){if(Bf(a))return a;var b=[];return e(a).replace(sa,function(a,c,d,e){b.push(d?e.replace(wa,"$1"):c||a)}),b}function Pc(a){return a instanceof Ma?a.clone():new La(a.__wrapped__,a.__chain__,Qa(a.__actions__))}function Qc(a,b,c){return a&&a.length?((c?Ec(a,b,c):null==b)&&(b=1),Cb(a,0>b?0:b)):[]}function Rc(a,b,c){var d=a?a.length:0;return d?((c?Ec(a,b,c):null==b)&&(b=1),b=d-(+b||0),Cb(a,0,0>b?0:b)):[]}function Sc(a){return a?a[0]:u}function Tc(a,b,d){var e=a?a.length:0;if(!e)return-1;if("number"==typeof d)d=0>d?ue(e+d,0):d;else if(d)return d=Lb(a,b),e>d&&(b===b?b===a[d]:a[d]!==a[d])?d:-1;return c(a,b,d||0)}function Uc(a){var b=a?a.length:0;return b?a[b-1]:u}function Vc(a){return Qc(a,1)}function Wc(a,b,d,e){if(!a||!a.length)return[];null!=b&&"boolean"!=typeof b&&(e=d,d=Ec(a,b,e)?u:b,b=!1);var f=tc();if((null!=d||f!==db)&&(d=f(d,e,3)),b&&vc()===c){b=d;var g;d=-1,e=a.length;for(var f=-1,h=[];++d<e;){var i=a[d],j=b?b(i,d,a):i;d&&g===j||(g=j,h[++f]=i)}a=h}else a=Hb(a,d);return a}function Xc(a){if(!a||!a.length)return[];var b=-1,c=0;a=Ta(a,function(a){return Cc(a)?(c=ue(a.length,c),!0):void 0});for(var d=Nd(c);++b<c;)d[b]=Wa(a,xb(b));return d}function Yc(a,b,c){return a&&a.length?(a=Xc(a),null==b?a:(b=Nb(b,c,4),Wa(a,function(a){return Ya(a,b,u,!0)}))):[]}function Zc(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||Bf(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function $c(a){return a=Ja(a),a.__chain__=!0,a}function _c(a,b,c){return b.call(c,a)}function ad(a,b,c){var d=Bf(a)?Sa:hb;return c&&Ec(a,b,c)&&(b=u),("function"!=typeof b||c!==u)&&(b=tc(b,c,3)),d(a,b)}function bd(a,b,c){var d=Bf(a)?Ta:jb;return b=tc(b,c,3),d(a,b)}function cd(a,b,c,d){var e=a?Ne(a):0;return Hc(e)||(a=Cd(a),e=a.length),c="number"!=typeof c||d&&Ec(b,c,d)?0:0>c?ue(e+c,0):c||0,"string"==typeof a||!Bf(a)&&ud(a)?e>=c&&-1<a.indexOf(b,c):!!e&&-1<vc(a,b,c)}function dd(a,b,c){var d=Bf(a)?Wa:tb;return b=tc(b,c,3),d(a,b)}function ed(a,b,c){if(c?Ec(a,b,c):null==b){a=Mc(a);var d=a.length;return d>0?a[Ab(0,d-1)]:u}c=-1,a=xd(a);var d=a.length,e=d-1;for(b=ve(0>b?0:+b||0,d);++c<b;){var d=Ab(c,e),f=a[d];a[d]=a[c],a[c]=f}return a.length=b,a}function fd(a,b,c){var d=Bf(a)?Za:Db;return c&&Ec(a,b,c)&&(b=u),("function"!=typeof b||c!==u)&&(b=tc(b,c,3)),d(a,b)}function gd(a,b){var c;if("function"!=typeof b){if("function"!=typeof a)throw new Wd(M);var d=a;a=b,b=d}return function(){return 0<--a&&(c=b.apply(this,arguments)),1>=a&&(b=u),c}}function hd(a,b,c){function d(b,c){c&&fe(c),i=m=n=u,b&&(o=nf(),j=a.apply(l,h),m||i||(h=l=u))}function e(){var a=b-(nf()-k);0>=a||a>b?d(n,i):m=ke(e,a)}function f(){d(q,m)}function g(){if(h=arguments,k=nf(),l=this,n=q&&(m||!r),!1===p)var c=r&&!m;else{i||r||(o=k);var d=p-(k-o),g=0>=d||d>p;g?(i&&(i=fe(i)),o=k,j=a.apply(l,h)):i||(i=ke(f,d))}return g&&m?m=fe(m):m||b===p||(m=ke(e,b)),c&&(g=!0,j=a.apply(l,h)),!g||m||i||(h=l=u),j}var h,i,j,k,l,m,n,o=0,p=!1,q=!0;if("function"!=typeof a)throw new Wd(M);if(b=0>b?0:+b||0,!0===c)var r=!0,q=!1;else pd(c)&&(r=!!c.leading,p="maxWait"in c&&ue(+c.maxWait||0,b),q="trailing"in c?!!c.trailing:q);return g.cancel=function(){m&&fe(m),i&&fe(i),o=0,i=m=n=u},g}function id(a,b){function c(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;return f.has(e)?f.get(e):(d=a.apply(this,d),c.cache=f.set(e,d),d)}if("function"!=typeof a||b&&"function"!=typeof b)throw new Wd(M);return c.cache=new id.Cache,c}function jd(a,b){if("function"!=typeof a)throw new Wd(M);return b=ue(b===u?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=ue(c.length-b,0),f=Nd(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}for(e=Nd(b+1),d=-1;++d<b;)e[d]=c[d];return e[b]=f,a.apply(this,e)}}function kd(a,b){return a>b}function ld(a){return n(a)&&Cc(a)&&_d.call(a,"callee")&&!ie.call(a,"callee")}function md(a,b,c,d){return d=(c="function"==typeof c?Nb(c,d,3):u)?c(a,b):u,d===u?rb(a,b,c):!!d}function nd(a){return n(a)&&"string"==typeof a.message&&be.call(a)==S}function od(a){return pd(a)&&be.call(a)==T}function pd(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function qd(a){return null==a?!1:od(a)?de.test($d.call(a)):n(a)&&Aa.test(a)}function rd(a){return"number"==typeof a||n(a)&&be.call(a)==U}function sd(a){var b;if(!n(a)||be.call(a)!=V||ld(a)||!(_d.call(a,"constructor")||(b=a.constructor,"function"!=typeof b||b instanceof b)))return!1;var c;return mb(a,function(a,b){c=b}),c===u||_d.call(a,c)}function td(a){return pd(a)&&be.call(a)==W}function ud(a){return"string"==typeof a||n(a)&&be.call(a)==X}function vd(a){return n(a)&&Hc(a.length)&&!!Ha[be.call(a)]}function wd(a,b){return b>a}function xd(a){var b=a?Ne(a):0;return Hc(b)?b?Qa(a):[]:Cd(a)}function yd(a){return cb(a,Ad(a))}function zd(a){return pb(a,Ad(a))}function Ad(a){if(null==a)return[];pd(a)||(a=Td(a));for(var b=a.length,b=b&&Hc(b)&&(Bf(a)||ld(a))&&b||0,c=a.constructor,d=-1,c="function"==typeof c&&c.prototype===a,e=Nd(b),f=b>0;++d<b;)e[d]=d+"";for(var g in a)f&&Dc(g,b)||"constructor"==g&&(c||!_d.call(a,g))||e.push(g);return e}function Bd(a){a=Nc(a);for(var b=-1,c=Mf(a),d=c.length,e=Nd(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Cd(a){return Ib(a,Mf(a))}function Dd(a){return(a=e(a))&&a.replace(Ca,i).replace(va,"")}function Ed(a,b){var c="";if(a=e(a),b=+b,1>b||!a||!se(b))return c;do b%2&&(c+=a),b=qe(b/2),a+=a;while(b);return c}function Fd(a,b,c){var d=a;return(a=e(a))?(c?Ec(d,b,c):null==b)?a.slice(q(a),r(a)+1):(b+="",a.slice(f(a,b),g(a,b)+1)):a}function Gd(a,b,c){return c&&Ec(a,b,c)&&(b=u),a=e(a),a.match(b||Fa)||[]}function Hd(a,b,c){return c&&Ec(a,b,c)&&(b=u),n(a)?Jd(a):db(a,b)}function Id(a){return a}function Jd(a){return ub(eb(a,!0))}function Kd(a,b,c){if(null==c){var d=pd(b),e=d?Mf(b):u;((e=e&&e.length?pb(b,e):u)?e.length:d)||(e=!1,c=b,b=a,a=this)}e||(e=pb(b,Mf(b)));var f=!0,d=-1,g=od(a),h=e.length;!1===c?f=!1:pd(c)&&"chain"in c&&(f=c.chain);for(;++d<h;){c=e[d];var i=b[c];a[c]=i,g&&(a.prototype[c]=function(b){return function(){var c=this.__chain__;if(f||c){var d=a(this.__wrapped__);return(d.__actions__=Qa(this.__actions__)).push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}return b.apply(a,Xa([this.value()],arguments))}}(i))}return a}function Ld(){}function Md(a){return Fc(a)?xb(a):yb(a)}o=o?Va.defaults(Ua.Object(),o,Va.pick(Ua,Ga)):Ua;var Nd=o.Array,Od=o.Date,Pd=o.Error,Qd=o.Function,Rd=o.Math,Sd=o.Number,Td=o.Object,Ud=o.RegExp,Vd=o.String,Wd=o.TypeError,Xd=Nd.prototype,Yd=Td.prototype,Zd=Vd.prototype,$d=Qd.prototype.toString,_d=Yd.hasOwnProperty,ae=0,be=Yd.toString,ce=Ua._,de=Ud("^"+$d.call(_d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ee=o.ArrayBuffer,fe=o.clearTimeout,ge=o.parseFloat,he=Rd.pow,ie=Yd.propertyIsEnumerable,je=xc(o,"Set"),ke=o.setTimeout,le=Xd.splice,me=o.Uint8Array,ne=xc(o,"WeakMap"),oe=Rd.ceil,pe=xc(Td,"create"),qe=Rd.floor,re=xc(Nd,"isArray"),se=o.isFinite,te=xc(Td,"keys"),ue=Rd.max,ve=Rd.min,we=xc(Od,"now"),xe=o.parseInt,ye=Rd.random,ze=Sd.NEGATIVE_INFINITY,Ae=Sd.POSITIVE_INFINITY,Be=4294967294,Ce=2147483647,De=9007199254740991,Ee=ne&&new ne,Fe={};Ja.support={},Ja.templateSettings={escape:na,evaluate:oa,interpolate:pa,variable:"",imports:{_:Ja}};var Ge=function(){function a(){}return function(b){if(pd(b)){a.prototype=b;var c=new a;a.prototype=u}return c||{}}}(),He=Tb(nb),Ie=Tb(ob,!0),Je=Ub(),Ke=Ub(!0),Le=Ee?function(a,b){return Ee.set(a,b),a}:Id,Me=Ee?function(a){return Ee.get(a)}:Ld,Ne=xb("length"),Oe=function(){var a=0,b=0;return function(c,d){var e=nf(),f=I-(e-b);if(b=e,f>0){if(++a>=H)return c}else a=0;return Le(c,d)}}(),Pe=jd(function(a,b){return n(a)&&Cc(a)?gb(a,lb(b,!1,!0)):[]}),Qe=ac(),Re=ac(!0),Se=jd(function(a){for(var b=a.length,d=b,e=Nd(k),f=vc(),g=f===c,h=[];d--;){var i=a[d]=Cc(i=a[d])?i:[];e[d]=g&&120<=i.length&&pe&&je?new Oa(d&&i):null}var g=a[0],j=-1,k=g?g.length:0,l=e[0];a:for(;++j<k;)if(i=g[j],0>(l?Pa(l,i):f(h,i,0))){for(d=b;--d;){var m=e[d];if(0>(m?Pa(m,i):f(a[d],i,0)))continue a}l&&l.push(i),h.push(i)}return h}),Te=jd(function(b,c){c=lb(c);var d=bb(b,c);return zb(b,c.sort(a)),d}),Ue=oc(),Ve=oc(!0),We=jd(function(a){return Hb(lb(a,!1,!0))}),Xe=jd(function(a,b){return Cc(a)?gb(a,b):[]}),Ye=jd(Xc),Ze=jd(function(a){var b=a.length,c=b>2?a[b-2]:u,d=b>1?a[b-1]:u;return b>2&&"function"==typeof c?b-=2:(c=b>1&&"function"==typeof d?(--b,d):u,d=u),a.length=b,Yc(a,c,d)}),$e=jd(function(a){return a=lb(a),this.thru(function(b){b=Bf(b)?b:[Nc(b)];for(var c=a,d=-1,e=b.length,f=-1,g=c.length,h=Nd(e+g);++d<e;)h[d]=b[d];for(;++f<g;)h[d++]=c[f];return h})}),_e=jd(function(a,b){return bb(a,lb(b))}),af=Rb(function(a,b,c){_d.call(a,c)?++a[c]:a[c]=1}),bf=_b(He),cf=_b(Ie,!0),df=dc(Ra,He),ef=dc(function(a,b){for(var c=a.length;c--&&!1!==b(a[c],c,a););return a},Ie),ff=Rb(function(a,b,c){_d.call(a,c)?a[c].push(b):a[c]=[b]}),gf=Rb(function(a,b,c){a[c]=b}),hf=jd(function(a,b,c){var d=-1,e="function"==typeof b,f=Fc(b),g=Cc(a)?Nd(a.length):[];return He(a,function(a){var h=e?b:f&&null!=a?a[b]:u;g[++d]=h?h.apply(a,c):Bc(a,b,c)}),g}),jf=Rb(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),kf=jc(Ya,He),lf=jc(function(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c},Ie),mf=jd(function(a,b){if(null==a)return[];var c=b[2];return c&&Ec(b[0],b[1],c)&&(b.length=1),Fb(a,lb(b),[])}),nf=we||function(){return(new Od).getTime()},of=jd(function(a,b,c){var d=w;if(c.length)var e=p(c,of.placeholder),d=d|B;return pc(a,d,b,c,e)}),pf=jd(function(a,b){b=b.length?lb(b):zd(a);for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=pc(a[e],w,a)}return a}),qf=jd(function(a,b,c){var d=w|x;if(c.length)var e=p(c,qf.placeholder),d=d|B;return pc(b,d,a,c,e)}),rf=Yb(z),sf=Yb(A),tf=jd(function(a,b){return fb(a,1,b)}),uf=jd(function(a,b,c){return fb(a,b,c)}),vf=cc(),wf=cc(!0),xf=jd(function(a,b){if(b=lb(b),"function"!=typeof a||!Sa(b,d))throw new Wd(M);var c=b.length;return jd(function(d){for(var e=ve(d.length,c);e--;)d[e]=b[e](d[e]);return a.apply(this,d)})}),yf=ic(B),zf=ic(C),Af=jd(function(a,b){return pc(a,E,u,u,u,lb(b))}),Bf=re||function(a){return n(a)&&Hc(a.length)&&be.call(a)==P},Cf=Sb(wb),Df=Sb(function(a,b,c){return c?_a(a,b,c):ab(a,b)}),Ef=Zb(Df,function(a,b){return a===u?b:a}),Ff=Zb(Cf,Ic),Gf=bc(nb),Hf=bc(ob),If=ec(Je),Jf=ec(Ke),Kf=fc(nb),Lf=fc(ob),Mf=te?function(a){var b=null==a?u:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&Cc(a)?Lc(a):pd(a)?te(a):[]}:Lc,Nf=gc(!0),Of=gc(),Pf=jd(function(a,b){if(null==a)return{};if("function"!=typeof b[0])return b=Wa(lb(b),Vd),Jc(a,gb(Ad(a),b));var c=Nb(b[0],b[1],3);return Kc(a,function(a,b,d){return!c(a,b,d)})}),Qf=jd(function(a,b){return null==a?{}:"function"==typeof b[0]?Kc(a,Nb(b[0],b[1],3)):Jc(a,lb(b))}),Rf=Wb(function(a,b,c){return b=b.toLowerCase(),a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),Sf=Wb(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Tf=hc(),Uf=hc(!0),Vf=Wb(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Wf=Wb(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))}),Xf=jd(function(a,b){try{return a.apply(u,b)}catch(c){return nd(c)?c:new Pd(c)}}),Yf=jd(function(a,b){return function(c){return Bc(c,a,b)}}),Zf=jd(function(a,b){return function(c){return Bc(a,c,b)}}),$f=nc("ceil"),_f=nc("floor"),ag=$b(kd,ze),bg=$b(wd,Ae),cg=nc("round");return Ja.prototype=Ka.prototype,La.prototype=Ge(Ka.prototype),La.prototype.constructor=La,Ma.prototype=Ge(Ka.prototype),Ma.prototype.constructor=Ma,Na.prototype["delete"]=function(a){return this.has(a)&&delete this.__data__[a]},Na.prototype.get=function(a){return"__proto__"==a?u:this.__data__[a]},Na.prototype.has=function(a){return"__proto__"!=a&&_d.call(this.__data__,a)},Na.prototype.set=function(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this},Oa.prototype.push=function(a){var b=this.data;"string"==typeof a||pd(a)?b.set.add(a):b.hash[a]=!0},id.Cache=Na,Ja.after=function(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new Wd(M);var c=a;a=b,b=c}return a=se(a=+a)?a:0,function(){return 1>--a?b.apply(this,arguments):void 0}},Ja.ary=function(a,b,c){return c&&Ec(a,b,c)&&(b=u),b=a&&null==b?a.length:ue(+b||0,0),pc(a,D,u,u,u,u,b)},Ja.assign=Df,Ja.at=_e,Ja.before=gd,Ja.bind=of,Ja.bindAll=pf,Ja.bindKey=qf,Ja.callback=Hd,Ja.chain=$c,Ja.chunk=function(a,b,c){b=(c?Ec(a,b,c):null==b)?1:ue(qe(b)||1,1),c=0;for(var d=a?a.length:0,e=-1,f=Nd(oe(d/b));d>c;)f[++e]=Cb(a,c,c+=b);return f},Ja.compact=function(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e},Ja.constant=function(a){return function(){return a}},Ja.countBy=af,Ja.create=function(a,b,c){var d=Ge(a);return c&&Ec(a,b,c)&&(b=u),b?ab(d,b):d},Ja.curry=rf,Ja.curryRight=sf,Ja.debounce=hd,Ja.defaults=Ef,Ja.defaultsDeep=Ff,Ja.defer=tf,Ja.delay=uf,Ja.difference=Pe,Ja.drop=Qc,Ja.dropRight=Rc,Ja.dropRightWhile=function(a,b,c){return a&&a.length?Jb(a,tc(b,c,3),!0,!0):[]},Ja.dropWhile=function(a,b,c){return a&&a.length?Jb(a,tc(b,c,3),!0):[]},Ja.fill=function(a,b,c,d){var e=a?a.length:0;if(!e)return[];for(c&&"number"!=typeof c&&Ec(a,b,c)&&(c=0,d=e),e=a.length,c=null==c?0:+c||0,0>c&&(c=-c>e?0:e+c),d=d===u||d>e?e:+d||0,0>d&&(d+=e),e=c>d?0:d>>>0,c>>>=0;e>c;)a[c++]=b;return a},Ja.filter=bd,Ja.flatten=function(a,b,c){var d=a?a.length:0;return c&&Ec(a,b,c)&&(b=!1),d?lb(a,b):[]},Ja.flattenDeep=function(a){return a&&a.length?lb(a,!0):[]},Ja.flow=vf,Ja.flowRight=wf,Ja.forEach=df,Ja.forEachRight=ef,Ja.forIn=If,Ja.forInRight=Jf,Ja.forOwn=Kf,Ja.forOwnRight=Lf,Ja.functions=zd,Ja.groupBy=ff,Ja.indexBy=gf,Ja.initial=function(a){return Rc(a,1)},Ja.intersection=Se,Ja.invert=function(a,b,c){c&&Ec(a,b,c)&&(b=u),c=-1;for(var d=Mf(a),e=d.length,f={};++c<e;){var g=d[c],h=a[g];b?_d.call(f,h)?f[h].push(g):f[h]=[g]:f[h]=g}return f},Ja.invoke=hf,Ja.keys=Mf,Ja.keysIn=Ad,Ja.map=dd,Ja.mapKeys=Nf,Ja.mapValues=Of,Ja.matches=Jd,Ja.matchesProperty=function(a,b){
return vb(a,eb(b,!0))},Ja.memoize=id,Ja.merge=Cf,Ja.method=Yf,Ja.methodOf=Zf,Ja.mixin=Kd,Ja.modArgs=xf,Ja.negate=function(a){if("function"!=typeof a)throw new Wd(M);return function(){return!a.apply(this,arguments)}},Ja.omit=Pf,Ja.once=function(a){return gd(2,a)},Ja.pairs=Bd,Ja.partial=yf,Ja.partialRight=zf,Ja.partition=jf,Ja.pick=Qf,Ja.pluck=function(a,b){return dd(a,Md(b))},Ja.property=Md,Ja.propertyOf=function(a){return function(b){return qb(a,Oc(b),b+"")}},Ja.pull=function(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=vc(),e=a.length;++c<e;)for(var f=0,g=a[c];-1<(f=d(b,g,f));)le.call(b,f,1);return b},Ja.pullAt=Te,Ja.range=function(a,b,c){c&&Ec(a,b,c)&&(b=c=u),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;var d=-1;b=ue(oe((b-a)/(c||1)),0);for(var e=Nd(b);++d<b;)e[d]=a,a+=c;return e},Ja.rearg=Af,Ja.reject=function(a,b,c){var d=Bf(a)?Ta:jb;return b=tc(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})},Ja.remove=function(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=tc(b,c,3);++e<g;)c=a[e],b(c,e,a)&&(d.push(c),f.push(e));return zb(a,f),d},Ja.rest=Vc,Ja.restParam=jd,Ja.set=function(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||Fc(b,a)?[d]:Oc(b);for(var d=-1,e=b.length,f=e-1,g=a;null!=g&&++d<e;){var h=b[d];pd(g)&&(d==f?g[h]=c:null==g[h]&&(g[h]=Dc(b[d+1])?[]:{})),g=g[h]}return a},Ja.shuffle=function(a){return ed(a,Ae)},Ja.slice=function(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&Ec(a,b,c)&&(b=0,c=d),Cb(a,b,c)):[]},Ja.sortBy=function(a,b,c){if(null==a)return[];c&&Ec(a,b,c)&&(b=u);var d=-1;return b=tc(b,c,3),a=tb(a,function(a,c,e){return{a:b(a,c,e),b:++d,c:a}}),Eb(a,h)},Ja.sortByAll=mf,Ja.sortByOrder=function(a,b,c,d){return null==a?[]:(d&&Ec(b,c,d)&&(c=u),Bf(b)||(b=null==b?[]:[b]),Bf(c)||(c=null==c?[]:[c]),Fb(a,b,c))},Ja.spread=function(a){if("function"!=typeof a)throw new Wd(M);return function(b){return a.apply(this,b)}},Ja.take=function(a,b,c){return a&&a.length?((c?Ec(a,b,c):null==b)&&(b=1),Cb(a,0,0>b?0:b)):[]},Ja.takeRight=function(a,b,c){var d=a?a.length:0;return d?((c?Ec(a,b,c):null==b)&&(b=1),b=d-(+b||0),Cb(a,0>b?0:b)):[]},Ja.takeRightWhile=function(a,b,c){return a&&a.length?Jb(a,tc(b,c,3),!1,!0):[]},Ja.takeWhile=function(a,b,c){return a&&a.length?Jb(a,tc(b,c,3)):[]},Ja.tap=function(a,b,c){return b.call(c,a),a},Ja.throttle=function(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Wd(M);return!1===c?d=!1:pd(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),hd(a,b,{leading:d,maxWait:+b,trailing:e})},Ja.thru=_c,Ja.times=function(a,b,c){if(a=qe(a),1>a||!se(a))return[];var d=-1,e=Nd(ve(a,4294967295));for(b=Nb(b,c,1);++d<a;)4294967295>d?e[d]=b(d):b(d);return e},Ja.toArray=xd,Ja.toPlainObject=yd,Ja.transform=function(a,b,c,d){var e=Bf(a)||vd(a);return b=tc(b,d,4),null==c&&(e||pd(a)?(d=a.constructor,c=e?Bf(a)?new d:[]:Ge(od(d)?d.prototype:u)):c={}),(e?Ra:nb)(a,function(a,d,e){return b(c,a,d,e)}),c},Ja.union=We,Ja.uniq=Wc,Ja.unzip=Xc,Ja.unzipWith=Yc,Ja.values=Cd,Ja.valuesIn=function(a){return Ib(a,Ad(a))},Ja.where=function(a,b){return bd(a,ub(b))},Ja.without=Xe,Ja.wrap=function(a,b){return b=null==b?Id:b,pc(b,B,u,[a],[])},Ja.xor=function(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Cc(c))var d=d?Xa(gb(d,c),gb(c,d)):c}return d?Hb(d):[]},Ja.zip=Ye,Ja.zipObject=Zc,Ja.zipWith=Ze,Ja.backflow=wf,Ja.collect=dd,Ja.compose=wf,Ja.each=df,Ja.eachRight=ef,Ja.extend=Df,Ja.iteratee=Hd,Ja.methods=zd,Ja.object=Zc,Ja.select=bd,Ja.tail=Vc,Ja.unique=Wc,Kd(Ja,Ja),Ja.add=function(a,b){return(+a||0)+(+b||0)},Ja.attempt=Xf,Ja.camelCase=Rf,Ja.capitalize=function(a){return(a=e(a))&&a.charAt(0).toUpperCase()+a.slice(1)},Ja.ceil=$f,Ja.clone=function(a,b,c,d){return b&&"boolean"!=typeof b&&Ec(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),"function"==typeof c?eb(a,b,Nb(c,d,3)):eb(a,b)},Ja.cloneDeep=function(a,b,c){return"function"==typeof b?eb(a,!0,Nb(b,c,3)):eb(a,!0)},Ja.deburr=Dd,Ja.endsWith=function(a,b,c){a=e(a),b+="";var d=a.length;return c=c===u?d:ve(0>c?0:+c||0,d),c-=b.length,c>=0&&a.indexOf(b,c)==c},Ja.escape=function(a){return(a=e(a))&&ma.test(a)?a.replace(ka,j):a},Ja.escapeRegExp=function(a){return(a=e(a))&&ua.test(a)?a.replace(ta,k):a||"(?:)"},Ja.every=ad,Ja.find=bf,Ja.findIndex=Qe,Ja.findKey=Gf,Ja.findLast=cf,Ja.findLastIndex=Re,Ja.findLastKey=Hf,Ja.findWhere=function(a,b){return bf(a,ub(b))},Ja.first=Sc,Ja.floor=_f,Ja.get=function(a,b,c){return a=null==a?u:qb(a,Oc(b),b+""),a===u?c:a},Ja.gt=kd,Ja.gte=function(a,b){return a>=b},Ja.has=function(a,b){if(null==a)return!1;var c=_d.call(a,b);if(!c&&!Fc(b)){if(b=Oc(b),a=1==b.length?a:qb(a,Cb(b,0,-1)),null==a)return!1;b=Uc(b),c=_d.call(a,b)}return c||Hc(a.length)&&Dc(b,a.length)&&(Bf(a)||ld(a))},Ja.identity=Id,Ja.includes=cd,Ja.indexOf=Tc,Ja.inRange=function(a,b,c){return b=+b||0,c===u?(c=b,b=0):c=+c||0,a>=ve(b,c)&&a<ue(b,c)},Ja.isArguments=ld,Ja.isArray=Bf,Ja.isBoolean=function(a){return!0===a||!1===a||n(a)&&be.call(a)==Q},Ja.isDate=function(a){return n(a)&&be.call(a)==R},Ja.isElement=function(a){return!!a&&1===a.nodeType&&n(a)&&!sd(a)},Ja.isEmpty=function(a){return null==a?!0:Cc(a)&&(Bf(a)||ud(a)||ld(a)||n(a)&&od(a.splice))?!a.length:!Mf(a).length},Ja.isEqual=md,Ja.isError=nd,Ja.isFinite=function(a){return"number"==typeof a&&se(a)},Ja.isFunction=od,Ja.isMatch=function(a,b,c,d){return c="function"==typeof c?Nb(c,d,3):u,sb(a,wc(b),c)},Ja.isNaN=function(a){return rd(a)&&a!=+a},Ja.isNative=qd,Ja.isNull=function(a){return null===a},Ja.isNumber=rd,Ja.isObject=pd,Ja.isPlainObject=sd,Ja.isRegExp=td,Ja.isString=ud,Ja.isTypedArray=vd,Ja.isUndefined=function(a){return a===u},Ja.kebabCase=Sf,Ja.last=Uc,Ja.lastIndexOf=function(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?ue(d+c,0):ve(c||0,d-1))+1;else if(c)return e=Lb(a,b,!0)-1,a=a[e],(b===b?b===a:a!==a)?e:-1;if(b!==b)return m(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1},Ja.lt=wd,Ja.lte=function(a,b){return b>=a},Ja.max=ag,Ja.min=bg,Ja.noConflict=function(){return Ua._=ce,this},Ja.noop=Ld,Ja.now=nf,Ja.pad=function(a,b,c){a=e(a),b=+b;var d=a.length;return b>d&&se(b)?(d=(b-d)/2,b=qe(d),d=oe(d),c=lc("",d,c),c.slice(0,b)+a+c):a},Ja.padLeft=Tf,Ja.padRight=Uf,Ja.parseInt=function(a,b,c){return(c?Ec(a,b,c):null==b)?b=0:b&&(b=+b),a=Fd(a),xe(a,b||(za.test(a)?16:10))},Ja.random=function(a,b,c){c&&Ec(a,b,c)&&(b=c=u);var d=null==a,e=null==b;return null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1?(c=ye(),ve(a+c*(b-a+ge("1e-"+((c+"").length-1))),b)):Ab(a,b)},Ja.reduce=kf,Ja.reduceRight=lf,Ja.repeat=Ed,Ja.result=function(a,b,c){var d=null==a?u:a[b];return d===u&&(null==a||Fc(b,a)||(b=Oc(b),a=1==b.length?a:qb(a,Cb(b,0,-1)),d=null==a?u:a[Uc(b)]),d=d===u?c:d),od(d)?d.call(a):d},Ja.round=cg,Ja.runInContext=t,Ja.size=function(a){var b=a?Ne(a):0;return Hc(b)?b:Mf(a).length},Ja.snakeCase=Vf,Ja.some=fd,Ja.sortedIndex=Ue,Ja.sortedLastIndex=Ve,Ja.startCase=Wf,Ja.startsWith=function(a,b,c){return a=e(a),c=null==c?0:ve(0>c?0:+c||0,a.length),a.lastIndexOf(b,c)==c},Ja.sum=function(a,b,c){if(c&&Ec(a,b,c)&&(b=u),b=tc(b,c,3),1==b.length){a=Bf(a)?a:Mc(a),c=a.length;for(var d=0;c--;)d+=+b(a[c])||0;a=d}else a=Gb(a,b);return a},Ja.template=function(a,b,c){var d=Ja.templateSettings;c&&Ec(a,b,c)&&(b=c=u),a=e(a),b=_a(ab({},c||b),d,$a),c=_a(ab({},b.imports),d.imports,$a);var f,g,h=Mf(c),i=Ib(c,h),j=0;c=b.interpolate||Da;var k="__p+='";c=Ud((b.escape||Da).source+"|"+c.source+"|"+(c===pa?xa:Da).source+"|"+(b.evaluate||Da).source+"|$","g");var m="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":"";if(a.replace(c,function(b,c,d,e,h,i){return d||(d=e),k+=a.slice(j,i).replace(Ea,l),c&&(f=!0,k+="'+__e("+c+")+'"),h&&(g=!0,k+="';"+h+";\n__p+='"),d&&(k+="'+((__t=("+d+"))==null?'':__t)+'"),j=i+b.length,b}),k+="';",(b=b.variable)||(k="with(obj){"+k+"}"),k=(g?k.replace(ga,""):k).replace(ha,"$1").replace(ia,"$1;"),k="function("+(b||"obj")+"){"+(b?"":"obj||(obj={});")+"var __t,__p=''"+(f?",__e=_.escape":"")+(g?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+k+"return __p}",b=Xf(function(){return Qd(h,m+"return "+k).apply(u,i)}),b.source=k,nd(b))throw b;return b},Ja.trim=Fd,Ja.trimLeft=function(a,b,c){var d=a;return(a=e(a))?a.slice((c?Ec(d,b,c):null==b)?q(a):f(a,b+"")):a},Ja.trimRight=function(a,b,c){var d=a;return(a=e(a))?(c?Ec(d,b,c):null==b)?a.slice(0,r(a)+1):a.slice(0,g(a,b+"")+1):a},Ja.trunc=function(a,b,c){c&&Ec(a,b,c)&&(b=u);var d=F;if(c=G,null!=b)if(pd(b)){var f="separator"in b?b.separator:f,d="length"in b?+b.length||0:d;c="omission"in b?e(b.omission):c}else d=+b||0;if(a=e(a),d>=a.length)return a;if(d-=c.length,1>d)return c;if(b=a.slice(0,d),null==f)return b+c;if(td(f)){if(a.slice(d).search(f)){var g,h=a.slice(0,d);for(f.global||(f=Ud(f.source,(ya.exec(f)||"")+"g")),f.lastIndex=0;a=f.exec(h);)g=a.index;b=b.slice(0,null==g?d:g)}}else a.indexOf(f,d)!=d&&(f=b.lastIndexOf(f),f>-1&&(b=b.slice(0,f)));return b+c},Ja.unescape=function(a){return(a=e(a))&&la.test(a)?a.replace(ja,s):a},Ja.uniqueId=function(a){var b=++ae;return e(a)+b},Ja.words=Gd,Ja.all=ad,Ja.any=fd,Ja.contains=cd,Ja.eq=md,Ja.detect=bf,Ja.foldl=kf,Ja.foldr=lf,Ja.head=Sc,Ja.include=cd,Ja.inject=kf,Kd(Ja,function(){var a={};return nb(Ja,function(b,c){Ja.prototype[c]||(a[c]=b)}),a}(),!1),Ja.sample=ed,Ja.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return ed(b,a)}):ed(this.value())},Ja.VERSION=v,Ra("bind bindKey curry curryRight partial partialRight".split(" "),function(a){Ja[a].placeholder=Ja}),Ra(["drop","take"],function(a,b){Ma.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new Ma(this);c=null==c?1:ue(qe(c)||0,0);var e=this.clone();return d?e.__takeCount__=ve(e.__takeCount__,c):e.__views__.push({size:c,type:a+(0>e.__dir__?"Right":"")}),e},Ma.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),Ra(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c!=L;Ma.prototype[a]=function(a,b){var e=this.clone();return e.__iteratees__.push({iteratee:tc(a,b,1),type:c}),e.__filtered__=e.__filtered__||d,e}}),Ra(["first","last"],function(a,b){var c="take"+(b?"Right":"");Ma.prototype[a]=function(){return this[c](1).value()[0]}}),Ra(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Ma.prototype[a]=function(){return this.__filtered__?new Ma(this):this[c](1)}}),Ra(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?ub:Md;Ma.prototype[a]=function(a){return this[c](d(a))}}),Ma.prototype.compact=function(){return this.filter(Id)},Ma.prototype.reject=function(a,b){return a=tc(a,b,1),this.filter(function(b){return!a(b)})},Ma.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=this;return c.__filtered__&&(a>0||0>b)?new Ma(c):(0>a?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==u&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a)),c)},Ma.prototype.takeRightWhile=function(a,b){return this.reverse().takeWhile(a,b).reverse()},Ma.prototype.toArray=function(){return this.take(Ae)},nb(Ma.prototype,function(a,b){var c=/^(?:filter|map|reject)|While$/.test(b),d=/^(?:first|last)$/.test(b),e=Ja[d?"take"+("last"==b?"Right":""):b];e&&(Ja.prototype[b]=function(){function b(a){return d&&g?e(a,1)[0]:e.apply(u,Xa([a],f))}var f=d?[1]:arguments,g=this.__chain__,h=this.__wrapped__,i=!!this.__actions__.length,j=h instanceof Ma,k=f[0],l=j||Bf(h);return l&&c&&"function"==typeof k&&1!=k.length&&(j=l=!1),k={func:_c,args:[b],thisArg:u},i=j&&!i,d&&!g?i?(h=h.clone(),h.__actions__.push(k),a.call(h)):e.call(u,this.value())[0]:!d&&l?(h=i?h:new Ma(this),h=a.apply(h,f),h.__actions__.push(k),new La(h,g)):this.thru(b)})}),Ra("join pop push replace shift sort splice split unshift".split(" "),function(a){var b=(/^(?:replace|split)$/.test(a)?Zd:Xd)[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:join|pop|replace|shift)$/.test(a);Ja.prototype[a]=function(){var a=arguments;return d&&!this.__chain__?b.apply(this.value(),a):this[c](function(c){return b.apply(c,a)})}}),nb(Ma.prototype,function(a,b){var c=Ja[b];if(c){var d=c.name+"";(Fe[d]||(Fe[d]=[])).push({name:b,func:c})}}),Fe[kc(u,x).name]=[{name:"wrapper",func:u}],Ma.prototype.clone=function(){var a=new Ma(this.__wrapped__);return a.__actions__=Qa(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Qa(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Qa(this.__views__),a},Ma.prototype.reverse=function(){if(this.__filtered__){var a=new Ma(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a},Ma.prototype.value=function(){var a,b=this.__wrapped__.value(),c=this.__dir__,d=Bf(b),e=0>c,f=d?b.length:0;a=f;for(var g=this.__views__,h=0,i=-1,j=g.length;++i<j;){var k=g[i],l=k.size;switch(k.type){case"drop":h+=l;break;case"dropRight":a-=l;break;case"take":a=ve(a,h+l);break;case"takeRight":h=ue(h,a-l)}}if(a={start:h,end:a},g=a.start,h=a.end,a=h-g,e=e?h:g-1,g=this.__iteratees__,h=g.length,i=0,j=ve(a,this.__takeCount__),!d||J>f||f==a&&j==a)return Kb(b,this.__actions__);d=[];a:for(;a--&&j>i;){for(e+=c,f=-1,k=b[e];++f<h;){var m=g[f],l=m.type,m=m.iteratee(k);if(l==L)k=m;else if(!m){if(l==K)continue a;break a}}d[i++]=k}return d},Ja.prototype.chain=function(){return $c(this)},Ja.prototype.commit=function(){return new La(this.value(),this.__chain__)},Ja.prototype.concat=$e,Ja.prototype.plant=function(a){for(var b,c=this;c instanceof Ka;){var d=Pc(c);b?e.__wrapped__=d:b=d;var e=d,c=c.__wrapped__}return e.__wrapped__=a,b},Ja.prototype.reverse=function(){function a(a){return a.reverse()}var b=this.__wrapped__;return b instanceof Ma?(this.__actions__.length&&(b=new Ma(this)),b=b.reverse(),b.__actions__.push({func:_c,args:[a],thisArg:u}),new La(b,this.__chain__)):this.thru(a)},Ja.prototype.toString=function(){return this.value()+""},Ja.prototype.run=Ja.prototype.toJSON=Ja.prototype.valueOf=Ja.prototype.value=function(){return Kb(this.__wrapped__,this.__actions__)},Ja.prototype.collect=Ja.prototype.map,Ja.prototype.head=Ja.prototype.first,Ja.prototype.select=Ja.prototype.filter,Ja.prototype.tail=Ja.prototype.rest,Ja}var u,v="3.10.1",w=1,x=2,y=4,z=8,A=16,B=32,C=64,D=128,E=256,F=30,G="...",H=150,I=16,J=200,K=1,L=2,M="Expected a function",N="__lodash_placeholder__",O="[object Arguments]",P="[object Array]",Q="[object Boolean]",R="[object Date]",S="[object Error]",T="[object Function]",U="[object Number]",V="[object Object]",W="[object RegExp]",X="[object String]",Y="[object ArrayBuffer]",Z="[object Float32Array]",$="[object Float64Array]",_="[object Int8Array]",aa="[object Int16Array]",ba="[object Int32Array]",ca="[object Uint8Array]",da="[object Uint8ClampedArray]",ea="[object Uint16Array]",fa="[object Uint32Array]",ga=/\b__p\+='';/g,ha=/\b(__p\+=)''\+/g,ia=/(__e\(.*?\)|\b__t\))\+'';/g,ja=/&(?:amp|lt|gt|quot|#39|#96);/g,ka=/[&<>"'`]/g,la=RegExp(ja.source),ma=RegExp(ka.source),na=/<%-([\s\S]+?)%>/g,oa=/<%([\s\S]+?)%>/g,pa=/<%=([\s\S]+?)%>/g,qa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ra=/^\w*$/,sa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ta=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,ua=RegExp(ta.source),va=/[\u0300-\u036f\ufe20-\ufe23]/g,wa=/\\(\\)?/g,xa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ya=/\w*$/,za=/^0[xX]/,Aa=/^\[object .+?Constructor\]$/,Ba=/^\d+$/,Ca=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Da=/($^)/,Ea=/['\n\r\u2028\u2029\\]/g,Fa=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Ga="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap".split(" "),Ha={};Ha[Z]=Ha[$]=Ha[_]=Ha[aa]=Ha[ba]=Ha[ca]=Ha[da]=Ha[ea]=Ha[fa]=!0,Ha[O]=Ha[P]=Ha[Y]=Ha[Q]=Ha[R]=Ha[S]=Ha[T]=Ha["[object Map]"]=Ha[U]=Ha[V]=Ha[W]=Ha["[object Set]"]=Ha[X]=Ha["[object WeakMap]"]=!1;var Ia={};Ia[O]=Ia[P]=Ia[Y]=Ia[Q]=Ia[R]=Ia[Z]=Ia[$]=Ia[_]=Ia[aa]=Ia[ba]=Ia[U]=Ia[V]=Ia[W]=Ia[X]=Ia[ca]=Ia[da]=Ia[ea]=Ia[fa]=!0,Ia[S]=Ia[T]=Ia["[object Map]"]=Ia["[object Set]"]=Ia["[object WeakMap]"]=!1;var Ja={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ka={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},La={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ma={"function":!0,object:!0},Na={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Oa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pa=Ma[typeof exports]&&exports&&!exports.nodeType&&exports,Qa=Ma[typeof module]&&module&&!module.nodeType&&module,Ra=Ma[typeof self]&&self&&self.Object&&self,Sa=Ma[typeof window]&&window&&window.Object&&window,Ta=Qa&&Qa.exports===Pa&&Pa,Ua=Pa&&Qa&&"object"==typeof global&&global&&global.Object&&global||Sa!==(this&&this.window)&&Sa||Ra||this,Va=t();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ua._=Va,define(function(){return Va})):Pa&&Qa?Ta?(Qa.exports=Va)._=Va:Pa._=Va:Ua._=Va}).call(this),function(a){var b=!0;a.flexslider=function(c,d){var e=a(c);e.vars=a.extend({},a.flexslider.defaults,d);var f,g=e.vars.namespace,h=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,i=("ontouchstart"in window||h||window.DocumentTouch&&document instanceof DocumentTouch)&&e.vars.touch,j="click touchend MSPointerUp keyup",k="",l="vertical"===e.vars.direction,m=e.vars.reverse,n=e.vars.itemWidth>0,o="fade"===e.vars.animation,p=""!==e.vars.asNavFor,q={};a.data(c,"flexslider",e),q={init:function(){e.animating=!1,e.currentSlide=parseInt(e.vars.startAt?e.vars.startAt:0,10),isNaN(e.currentSlide)&&(e.currentSlide=0),e.animatingTo=e.currentSlide,e.atEnd=0===e.currentSlide||e.currentSlide===e.last,e.containerSelector=e.vars.selector.substr(0,e.vars.selector.search(" ")),e.slides=a(e.vars.selector,e),e.container=a(e.containerSelector,e),e.count=e.slides.length,e.syncExists=a(e.vars.sync).length>0,"slide"===e.vars.animation&&(e.vars.animation="swing"),e.prop=l?"top":"marginLeft",e.args={},e.manualPause=!1,e.stopped=!1,e.started=!1,e.startTimeout=null,e.transitions=!e.vars.video&&!o&&e.vars.useCSS&&function(){var a=document.createElement("div"),b=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return e.pfx=b[c].replace("Perspective","").toLowerCase(),e.prop="-"+e.pfx+"-transform",!0;return!1}(),e.ensureAnimationEnd="",""!==e.vars.controlsContainer&&(e.controlsContainer=a(e.vars.controlsContainer).length>0&&a(e.vars.controlsContainer)),""!==e.vars.manualControls&&(e.manualControls=a(e.vars.manualControls).length>0&&a(e.vars.manualControls)),""!==e.vars.customDirectionNav&&(e.customDirectionNav=2===a(e.vars.customDirectionNav).length&&a(e.vars.customDirectionNav)),e.vars.randomize&&(e.slides.sort(function(){return Math.round(Math.random())-.5}),e.container.empty().append(e.slides)),e.doMath(),e.setup("init"),e.vars.controlNav&&q.controlNav.setup(),e.vars.directionNav&&q.directionNav.setup(),e.vars.keyboard&&(1===a(e.containerSelector).length||e.vars.multipleKeyboard)&&a(document).bind("keyup",function(a){var b=a.keyCode;if(!e.animating&&(39===b||37===b)){var c=39===b?e.getTarget("next"):37===b?e.getTarget("prev"):!1;e.flexAnimate(c,e.vars.pauseOnAction)}}),e.vars.mousewheel&&e.bind("mousewheel",function(a,b,c,d){a.preventDefault();var f=0>b?e.getTarget("next"):e.getTarget("prev");e.flexAnimate(f,e.vars.pauseOnAction)}),e.vars.pausePlay&&q.pausePlay.setup(),e.vars.slideshow&&e.vars.pauseInvisible&&q.pauseInvisible.init(),e.vars.slideshow&&(e.vars.pauseOnHover&&e.hover(function(){e.manualPlay||e.manualPause||e.pause()},function(){e.manualPause||e.manualPlay||e.stopped||e.play()}),e.vars.pauseInvisible&&q.pauseInvisible.isHidden()||(e.vars.initDelay>0?e.startTimeout=setTimeout(e.play,e.vars.initDelay):e.play())),p&&q.asNav.setup(),i&&e.vars.touch&&q.touch(),(!o||o&&e.vars.smoothHeight)&&a(window).bind("resize orientationchange focus",q.resize),e.find("img").attr("draggable","false"),setTimeout(function(){e.vars.start(e)},200)},asNav:{setup:function(){e.asNav=!0,e.animatingTo=Math.floor(e.currentSlide/e.move),e.currentItem=e.currentSlide,e.slides.removeClass(g+"active-slide").eq(e.currentItem).addClass(g+"active-slide"),h?(c._slider=e,e.slides.each(function(){var b=this;b._gesture=new MSGesture,b._gesture.target=b,b.addEventListener("MSPointerDown",function(a){a.preventDefault(),a.currentTarget._gesture&&a.currentTarget._gesture.addPointer(a.pointerId)},!1),b.addEventListener("MSGestureTap",function(b){b.preventDefault();var c=a(this),d=c.index();a(e.vars.asNavFor).data("flexslider").animating||c.hasClass("active")||(e.direction=e.currentItem<d?"next":"prev",e.flexAnimate(d,e.vars.pauseOnAction,!1,!0,!0))})})):e.slides.on(j,function(b){b.preventDefault();var c=a(this),d=c.index(),f=c.offset().left-a(e).scrollLeft();0>=f&&c.hasClass(g+"active-slide")?e.flexAnimate(e.getTarget("prev"),!0):a(e.vars.asNavFor).data("flexslider").animating||c.hasClass(g+"active-slide")||(e.direction=e.currentItem<d?"next":"prev",e.flexAnimate(d,e.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){e.manualControls?q.controlNav.setupManual():q.controlNav.setupPaging()},setupPaging:function(){var b,c,d="thumbnails"===e.vars.controlNav?"control-thumbs":"control-paging",f=1;if(e.controlNavScaffold=a('<ol class="'+g+"control-nav "+g+d+'"></ol>'),e.pagingCount>1)for(var h=0;h<e.pagingCount;h++){if(c=e.slides.eq(h),void 0===c.attr("data-thumb-alt")&&c.attr("data-thumb-alt",""),altText=""!==c.attr("data-thumb-alt")?altText=' alt="'+c.attr("data-thumb-alt")+'"':"",b="thumbnails"===e.vars.controlNav?'<img src="'+c.attr("data-thumb")+'"'+altText+"/>":'<a href="#">'+f+"</a>","thumbnails"===e.vars.controlNav&&!0===e.vars.thumbCaptions){var i=c.attr("data-thumbcaption");""!==i&&void 0!==i&&(b+='<span class="'+g+'caption">'+i+"</span>")}e.controlNavScaffold.append("<li>"+b+"</li>"),f++}e.controlsContainer?a(e.controlsContainer).append(e.controlNavScaffold):e.append(e.controlNavScaffold),q.controlNav.set(),q.controlNav.active(),e.controlNavScaffold.delegate("a, img",j,function(b){if(b.preventDefault(),""===k||k===b.type){var c=a(this),d=e.controlNav.index(c);c.hasClass(g+"active")||(e.direction=d>e.currentSlide?"next":"prev",e.flexAnimate(d,e.vars.pauseOnAction))}""===k&&(k=b.type),q.setToClearWatchedEvent()})},setupManual:function(){e.controlNav=e.manualControls,q.controlNav.active(),e.controlNav.bind(j,function(b){if(b.preventDefault(),""===k||k===b.type){var c=a(this),d=e.controlNav.index(c);c.hasClass(g+"active")||(d>e.currentSlide?e.direction="next":e.direction="prev",e.flexAnimate(d,e.vars.pauseOnAction))}""===k&&(k=b.type),q.setToClearWatchedEvent()})},set:function(){var b="thumbnails"===e.vars.controlNav?"img":"a";e.controlNav=a("."+g+"control-nav li "+b,e.controlsContainer?e.controlsContainer:e)},active:function(){e.controlNav.removeClass(g+"active").eq(e.animatingTo).addClass(g+"active")},update:function(b,c){e.pagingCount>1&&"add"===b?e.controlNavScaffold.append(a('<li><a href="#">'+e.count+"</a></li>")):1===e.pagingCount?e.controlNavScaffold.find("li").remove():e.controlNav.eq(c).closest("li").remove(),q.controlNav.set(),e.pagingCount>1&&e.pagingCount!==e.controlNav.length?e.update(c,b):q.controlNav.active()}},directionNav:{setup:function(){var b=a('<ul class="'+g+'direction-nav"><li class="'+g+'nav-prev"><a class="'+g+'prev" href="#">'+e.vars.prevText+'</a></li><li class="'+g+'nav-next"><a class="'+g+'next" href="#">'+e.vars.nextText+"</a></li></ul>");e.customDirectionNav?e.directionNav=e.customDirectionNav:e.controlsContainer?(a(e.controlsContainer).append(b),e.directionNav=a("."+g+"direction-nav li a",e.controlsContainer)):(e.append(b),e.directionNav=a("."+g+"direction-nav li a",e)),q.directionNav.update(),e.directionNav.bind(j,function(b){b.preventDefault();var c;(""===k||k===b.type)&&(c=a(this).hasClass(g+"next")?e.getTarget("next"):e.getTarget("prev"),e.flexAnimate(c,e.vars.pauseOnAction)),""===k&&(k=b.type),q.setToClearWatchedEvent()})},update:function(){var a=g+"disabled";1===e.pagingCount?e.directionNav.addClass(a).attr("tabindex","-1"):e.vars.animationLoop?e.directionNav.removeClass(a).removeAttr("tabindex"):0===e.animatingTo?e.directionNav.removeClass(a).filter("."+g+"prev").addClass(a).attr("tabindex","-1"):e.animatingTo===e.last?e.directionNav.removeClass(a).filter("."+g+"next").addClass(a).attr("tabindex","-1"):e.directionNav.removeClass(a).removeAttr("tabindex")}},pausePlay:{setup:function(){var b=a('<div class="'+g+'pauseplay"><a href="#"></a></div>');e.controlsContainer?(e.controlsContainer.append(b),e.pausePlay=a("."+g+"pauseplay a",e.controlsContainer)):(e.append(b),e.pausePlay=a("."+g+"pauseplay a",e)),q.pausePlay.update(e.vars.slideshow?g+"pause":g+"play"),e.pausePlay.bind(j,function(b){b.preventDefault(),(""===k||k===b.type)&&(a(this).hasClass(g+"pause")?(e.manualPause=!0,e.manualPlay=!1,e.pause()):(e.manualPause=!1,e.manualPlay=!0,e.play())),""===k&&(k=b.type),q.setToClearWatchedEvent()})},update:function(a){"play"===a?e.pausePlay.removeClass(g+"pause").addClass(g+"play").html(e.vars.playText):e.pausePlay.removeClass(g+"play").addClass(g+"pause").html(e.vars.pauseText)}},touch:function(){function a(a){a.stopPropagation(),e.animating?a.preventDefault():(e.pause(),c._gesture.addPointer(a.pointerId),w=0,j=l?e.h:e.w,p=Number(new Date),i=n&&m&&e.animatingTo===e.last?0:n&&m?e.limit-(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo:n&&e.currentSlide===e.last?e.limit:n?(e.itemW+e.vars.itemMargin)*e.move*e.currentSlide:m?(e.last-e.currentSlide+e.cloneOffset)*j:(e.currentSlide+e.cloneOffset)*j)}function b(a){a.stopPropagation();var b=a.target._slider;if(b){var d=-a.translationX,e=-a.translationY;return w+=l?e:d,k=w,t=l?Math.abs(w)<Math.abs(-d):Math.abs(w)<Math.abs(-e),a.detail===a.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){c._gesture.stop()}):void((!t||Number(new Date)-p>500)&&(a.preventDefault(),!o&&b.transitions&&(b.vars.animationLoop||(k=w/(0===b.currentSlide&&0>w||b.currentSlide===b.last&&w>0?Math.abs(w)/j+2:1)),b.setProps(i+k,"setTouch"))))}}function d(a){a.stopPropagation();var b=a.target._slider;if(b){if(b.animatingTo===b.currentSlide&&!t&&null!==k){var c=m?-k:k,d=c>0?b.getTarget("next"):b.getTarget("prev");b.canAdvance(d)&&(Number(new Date)-p<550&&Math.abs(c)>50||Math.abs(c)>j/2)?b.flexAnimate(d,b.vars.pauseOnAction):o||b.flexAnimate(b.currentSlide,b.vars.pauseOnAction,!0)}f=null,g=null,k=null,i=null,w=0}}var f,g,i,j,k,p,q,r,s,t=!1,u=0,v=0,w=0;h?(c.style.msTouchAction="none",c._gesture=new MSGesture,c._gesture.target=c,c.addEventListener("MSPointerDown",a,!1),c._slider=e,c.addEventListener("MSGestureChange",b,!1),c.addEventListener("MSGestureEnd",d,!1)):(q=function(a){e.animating?a.preventDefault():(window.navigator.msPointerEnabled||1===a.touches.length)&&(e.pause(),j=l?e.h:e.w,p=Number(new Date),u=a.touches[0].pageX,v=a.touches[0].pageY,i=n&&m&&e.animatingTo===e.last?0:n&&m?e.limit-(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo:n&&e.currentSlide===e.last?e.limit:n?(e.itemW+e.vars.itemMargin)*e.move*e.currentSlide:m?(e.last-e.currentSlide+e.cloneOffset)*j:(e.currentSlide+e.cloneOffset)*j,f=l?v:u,g=l?u:v,c.addEventListener("touchmove",r,!1),c.addEventListener("touchend",s,!1))},r=function(a){u=a.touches[0].pageX,v=a.touches[0].pageY,k=l?f-v:f-u,t=l?Math.abs(k)<Math.abs(u-g):Math.abs(k)<Math.abs(v-g);var b=500;(!t||Number(new Date)-p>b)&&(a.preventDefault(),!o&&e.transitions&&(e.vars.animationLoop||(k/=0===e.currentSlide&&0>k||e.currentSlide===e.last&&k>0?Math.abs(k)/j+2:1),e.setProps(i+k,"setTouch")))},s=function(a){if(c.removeEventListener("touchmove",r,!1),e.animatingTo===e.currentSlide&&!t&&null!==k){var b=m?-k:k,d=b>0?e.getTarget("next"):e.getTarget("prev");e.canAdvance(d)&&(Number(new Date)-p<550&&Math.abs(b)>50||Math.abs(b)>j/2)?e.flexAnimate(d,e.vars.pauseOnAction):o||e.flexAnimate(e.currentSlide,e.vars.pauseOnAction,!0)}c.removeEventListener("touchend",s,!1),f=null,g=null,k=null,i=null},c.addEventListener("touchstart",q,!1))},resize:function(){!e.animating&&e.is(":visible")&&(n||e.doMath(),o?q.smoothHeight():n?(e.slides.width(e.computedW),e.update(e.pagingCount),e.setProps()):l?(e.viewport.height(e.h),e.setProps(e.h,"setTotal")):(e.vars.smoothHeight&&q.smoothHeight(),e.newSlides.width(e.computedW),e.setProps(e.computedW,"setTotal")))},smoothHeight:function(a){if(!l||o){var b=o?e:e.viewport;a?b.animate({height:e.slides.eq(e.animatingTo).height()},a):b.height(e.slides.eq(e.animatingTo).height())}},sync:function(b){var c=a(e.vars.sync).data("flexslider"),d=e.animatingTo;switch(b){case"animate":c.flexAnimate(d,e.vars.pauseOnAction,!1,!0);break;case"play":c.playing||c.asNav||c.play();break;case"pause":c.pause()}},uniqueID:function(b){return b.filter("[id]").add(b.find("[id]")).each(function(){var b=a(this);b.attr("id",b.attr("id")+"_clone")}),b},pauseInvisible:{visProp:null,init:function(){var a=q.pauseInvisible.getHiddenProp();if(a){var b=a.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(b,function(){q.pauseInvisible.isHidden()?e.startTimeout?clearTimeout(e.startTimeout):e.pause():e.started?e.play():e.vars.initDelay>0?setTimeout(e.play,e.vars.initDelay):e.play()})}},isHidden:function(){var a=q.pauseInvisible.getHiddenProp();return a?document[a]:!1},getHiddenProp:function(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(f),f=setTimeout(function(){k=""},3e3)}},e.flexAnimate=function(b,c,d,f,h){if(e.vars.animationLoop||b===e.currentSlide||(e.direction=b>e.currentSlide?"next":"prev"),p&&1===e.pagingCount&&(e.direction=e.currentItem<b?"next":"prev"),!e.animating&&(e.canAdvance(b,h)||d)&&e.is(":visible")){if(p&&f){var j=a(e.vars.asNavFor).data("flexslider");if(e.atEnd=0===b||b===e.count-1,j.flexAnimate(b,!0,!1,!0,h),e.direction=e.currentItem<b?"next":"prev",j.direction=e.direction,Math.ceil((b+1)/e.visible)-1===e.currentSlide||0===b)return e.currentItem=b,e.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),!1;e.currentItem=b,e.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),b=Math.floor(b/e.visible)}if(e.animating=!0,e.animatingTo=b,c&&e.pause(),e.vars.before(e),e.syncExists&&!h&&q.sync("animate"),e.vars.controlNav&&q.controlNav.active(),n||e.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),e.atEnd=0===b||b===e.last,e.vars.directionNav&&q.directionNav.update(),b===e.last&&(e.vars.end(e),e.vars.animationLoop||e.pause()),o)i?(e.slides.eq(e.currentSlide).css({opacity:0,zIndex:1}),e.slides.eq(b).css({opacity:1,zIndex:2}),e.wrapup(t)):(e.slides.eq(e.currentSlide).css({zIndex:1}).animate({opacity:0},e.vars.animationSpeed,e.vars.easing),e.slides.eq(b).css({zIndex:2}).animate({opacity:1},e.vars.animationSpeed,e.vars.easing,e.wrapup));else{var k,r,s,t=l?e.slides.filter(":first").height():e.computedW;n?(k=e.vars.itemMargin,s=(e.itemW+k)*e.move*e.animatingTo,r=s>e.limit&&1!==e.visible?e.limit:s):r=0===e.currentSlide&&b===e.count-1&&e.vars.animationLoop&&"next"!==e.direction?m?(e.count+e.cloneOffset)*t:0:e.currentSlide===e.last&&0===b&&e.vars.animationLoop&&"prev"!==e.direction?m?0:(e.count+1)*t:m?(e.count-1-b+e.cloneOffset)*t:(b+e.cloneOffset)*t,
e.setProps(r,"",e.vars.animationSpeed),e.transitions?(e.vars.animationLoop&&e.atEnd||(e.animating=!1,e.currentSlide=e.animatingTo),e.container.unbind("webkitTransitionEnd transitionend"),e.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(e.ensureAnimationEnd),e.wrapup(t)}),clearTimeout(e.ensureAnimationEnd),e.ensureAnimationEnd=setTimeout(function(){e.wrapup(t)},e.vars.animationSpeed+100)):e.container.animate(e.args,e.vars.animationSpeed,e.vars.easing,function(){e.wrapup(t)})}e.vars.smoothHeight&&q.smoothHeight(e.vars.animationSpeed)}},e.wrapup=function(a){o||n||(0===e.currentSlide&&e.animatingTo===e.last&&e.vars.animationLoop?e.setProps(a,"jumpEnd"):e.currentSlide===e.last&&0===e.animatingTo&&e.vars.animationLoop&&e.setProps(a,"jumpStart")),e.animating=!1,e.currentSlide=e.animatingTo,e.vars.after(e)},e.animateSlides=function(){!e.animating&&b&&e.flexAnimate(e.getTarget("next"))},e.pause=function(){clearInterval(e.animatedSlides),e.animatedSlides=null,e.playing=!1,e.vars.pausePlay&&q.pausePlay.update("play"),e.syncExists&&q.sync("pause")},e.play=function(){e.playing&&clearInterval(e.animatedSlides),e.animatedSlides=e.animatedSlides||setInterval(e.animateSlides,e.vars.slideshowSpeed),e.started=e.playing=!0,e.vars.pausePlay&&q.pausePlay.update("pause"),e.syncExists&&q.sync("play")},e.stop=function(){e.pause(),e.stopped=!0},e.canAdvance=function(a,b){var c=p?e.pagingCount-1:e.last;return b?!0:p&&e.currentItem===e.count-1&&0===a&&"prev"===e.direction?!0:p&&0===e.currentItem&&a===e.pagingCount-1&&"next"!==e.direction?!1:a!==e.currentSlide||p?e.vars.animationLoop?!0:e.atEnd&&0===e.currentSlide&&a===c&&"next"!==e.direction?!1:e.atEnd&&e.currentSlide===c&&0===a&&"next"===e.direction?!1:!0:!1},e.getTarget=function(a){return e.direction=a,"next"===a?e.currentSlide===e.last?0:e.currentSlide+1:0===e.currentSlide?e.last:e.currentSlide-1},e.setProps=function(a,b,c){var d=function(){var c=a?a:(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo,d=function(){if(n)return"setTouch"===b?a:m&&e.animatingTo===e.last?0:m?e.limit-(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo:e.animatingTo===e.last?e.limit:c;switch(b){case"setTotal":return m?(e.count-1-e.currentSlide+e.cloneOffset)*a:(e.currentSlide+e.cloneOffset)*a;case"setTouch":return m?a:a;case"jumpEnd":return m?a:e.count*a;case"jumpStart":return m?e.count*a:a;default:return a}}();return-1*d+"px"}();e.transitions&&(d=l?"translate3d(0,"+d+",0)":"translate3d("+d+",0,0)",c=void 0!==c?c/1e3+"s":"0s",e.container.css("-"+e.pfx+"-transition-duration",c),e.container.css("transition-duration",c)),e.args[e.prop]=d,(e.transitions||void 0===c)&&e.container.css(e.args),e.container.css("transform",d)},e.setup=function(b){if(o)e.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===b&&(i?e.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+e.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(e.currentSlide).css({opacity:1,zIndex:2}):0==e.vars.fadeFirstSlide?e.slides.css({opacity:0,display:"block",zIndex:1}).eq(e.currentSlide).css({zIndex:2}).css({opacity:1}):e.slides.css({opacity:0,display:"block",zIndex:1}).eq(e.currentSlide).css({zIndex:2}).animate({opacity:1},e.vars.animationSpeed,e.vars.easing)),e.vars.smoothHeight&&q.smoothHeight();else{var c,d;"init"===b&&(e.viewport=a('<div class="'+g+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(e).append(e.container),e.cloneCount=0,e.cloneOffset=0,m&&(d=a.makeArray(e.slides).reverse(),e.slides=a(d),e.container.empty().append(e.slides))),e.vars.animationLoop&&!n&&(e.cloneCount=2,e.cloneOffset=1,"init"!==b&&e.container.find(".clone").remove(),e.container.append(q.uniqueID(e.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(q.uniqueID(e.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),e.newSlides=a(e.vars.selector,e),c=m?e.count-1-e.currentSlide+e.cloneOffset:e.currentSlide+e.cloneOffset,l&&!n?(e.container.height(200*(e.count+e.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){e.newSlides.css({display:"block"}),e.doMath(),e.viewport.height(e.h),e.setProps(c*e.h,"init")},"init"===b?100:0)):(e.container.width(200*(e.count+e.cloneCount)+"%"),e.setProps(c*e.computedW,"init"),setTimeout(function(){e.doMath(),e.newSlides.css({width:e.computedW,marginRight:e.computedM,"float":"left",display:"block"}),e.vars.smoothHeight&&q.smoothHeight()},"init"===b?100:0))}n||e.slides.removeClass(g+"active-slide").eq(e.currentSlide).addClass(g+"active-slide"),e.vars.init(e)},e.doMath=function(){var a=e.slides.first(),b=e.vars.itemMargin,c=e.vars.minItems,d=e.vars.maxItems;e.w=void 0===e.viewport?e.width():e.viewport.width(),e.h=a.height(),e.boxPadding=a.outerWidth()-a.width(),n?(e.itemT=e.vars.itemWidth+b,e.itemM=b,e.minW=c?c*e.itemT:e.w,e.maxW=d?d*e.itemT-b:e.w,e.itemW=e.minW>e.w?(e.w-b*(c-1))/c:e.maxW<e.w?(e.w-b*(d-1))/d:e.vars.itemWidth>e.w?e.w:e.vars.itemWidth,e.visible=Math.floor(e.w/e.itemW),e.move=e.vars.move>0&&e.vars.move<e.visible?e.vars.move:e.visible,e.pagingCount=Math.ceil((e.count-e.visible)/e.move+1),e.last=e.pagingCount-1,e.limit=1===e.pagingCount?0:e.vars.itemWidth>e.w?e.itemW*(e.count-1)+b*(e.count-1):(e.itemW+b)*e.count-e.w-b):(e.itemW=e.w,e.itemM=b,e.pagingCount=e.count,e.last=e.count-1),e.computedW=e.itemW-e.boxPadding,e.computedM=e.itemM},e.update=function(a,b){e.doMath(),n||(a<e.currentSlide?e.currentSlide+=1:a<=e.currentSlide&&0!==a&&(e.currentSlide-=1),e.animatingTo=e.currentSlide),e.vars.controlNav&&!e.manualControls&&("add"===b&&!n||e.pagingCount>e.controlNav.length?q.controlNav.update("add"):("remove"===b&&!n||e.pagingCount<e.controlNav.length)&&(n&&e.currentSlide>e.last&&(e.currentSlide-=1,e.animatingTo-=1),q.controlNav.update("remove",e.last))),e.vars.directionNav&&q.directionNav.update()},e.addSlide=function(b,c){var d=a(b);e.count+=1,e.last=e.count-1,l&&m?void 0!==c?e.slides.eq(e.count-c).after(d):e.container.prepend(d):void 0!==c?e.slides.eq(c).before(d):e.container.append(d),e.update(c,"add"),e.slides=a(e.vars.selector+":not(.clone)",e),e.setup(),e.vars.added(e)},e.removeSlide=function(b){var c=isNaN(b)?e.slides.index(a(b)):b;e.count-=1,e.last=e.count-1,isNaN(b)?a(b,e.slides).remove():l&&m?e.slides.eq(e.last).remove():e.slides.eq(b).remove(),e.doMath(),e.update(c,"remove"),e.slides=a(e.vars.selector+":not(.clone)",e),e.setup(),e.vars.removed(e)},q.init()},a(window).blur(function(a){b=!1}).focus(function(a){b=!0}),a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},a.fn.flexslider=function(b){if(void 0===b&&(b={}),"object"==typeof b)return this.each(function(){var c=a(this),d=b.selector?b.selector:".slides > li",e=c.find(d);1===e.length&&b.allowOneSlide===!0||0===e.length?(e.fadeIn(400),b.start&&b.start(c)):void 0===c.data("flexslider")&&new a.flexslider(this,b)});var c=a(this).data("flexslider");switch(b){case"play":c.play();break;case"pause":c.pause();break;case"stop":c.stop();break;case"next":c.flexAnimate(c.getTarget("next"),!0);break;case"prev":case"previous":c.flexAnimate(c.getTarget("prev"),!0);break;default:"number"==typeof b&&c.flexAnimate(b,!0)}}}(jQuery),function(){"use strict";angular.module("angular-flexslider",[]).directive("flexSlider",["$parse","$timeout",function(a,b){return{restrict:"AE",scope:!1,replace:!0,transclude:!0,template:'<div class="flexslider-container"></div>',compile:function(c,d,e){return function(c,f){var g,h,i,j,k,l,m,n,o;return l=(d.slide||d.flexSlide).match(/^\s*(.+)\s+in\s+(.*?)(?:\s+track\s+by\s+(.+?))?\s*$/),k=l[1],h=l[2],o=a(angular.isDefined(l[3])?l[3]:""+k),i=null,n={},j=function(a,b){var d;return d={},d[k]=a,d.$index=b,o(c,d)},g=function(a,b,d){var f,g;if(g=j(a,b),null!=n[g])throw"Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys.";return f=c.$new(),f[k]=a,f.$index=b,e(f,function(b){var c;return c={collectionItem:a,childScope:f,element:b},n[g]=c,"function"==typeof d?d(c):void 0})},m=function(a,b){var c,d;return d=j(a,b),c=n[d],null!=c?(delete n[d],c.childScope.$destroy(),c):void 0},c.$watchCollection(h,function(e,h){var k,l,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;if((null!=e?e.length:void 0)||(null!=h?h.length:void 0)){if(null!=i){for(v=i.data("flexslider"),p=Object.keys(n).length,null==e&&(e=[]),A={},r=B=0,F=e.length;F>B;r=++B)o=e[r],A[j(o,r)]=o;if(y=function(){var a,b,c;for(c=[],r=a=0,b=e.length;b>a;r=++a)o=e[r],null==n[j(o,r)]&&c.push({value:o,index:r});return c}(),z=function(){var a;a=[];for(x in n)r=n[x],null==A[x]&&a.push(r.collectionItem);return a}(),1===y.length&&0===z.length||0===y.length){for(C=0,G=z.length;G>C;C++)q=z[C],q=m(q,e.indexOf(q)),v.removeSlide(q.element);for(D=0,H=y.length;H>D;D++)q=y[D],s=q.index,g(q.value,s,function(a){return s===p&&(s=void 0),c.$evalAsync(function(){return v.addSlide(a.element,s)})});return}}for(n={},null!=i&&i.remove(),w=angular.element('<ul class="slides"></ul>'),i=angular.element('<div class="flexslider"></div>'),i.append(w),f.append(i),r=E=0,I=e.length;I>E;r=++E)o=e[r],g(o,r,function(a){return w.append(a.element)});u={};for(k in d)l=d[k],0!==k.indexOf("$")&&(isNaN(t=parseInt(l))?"false"!==l&&"true"!==l?"start"!==k&&"before"!==k&&"after"!==k&&"end"!==k&&"added"!==k&&"removed"!==k?"startAt"!==k?u[k]=l:u[k]=a(l)(c):u[k]=function(b){var d;return d=a(b),function(a){return c.$apply(function(){return d(c,{$slider:{element:a}})})}}(l):u[k]="true"===l:u[k]=t);return!u.sliderId&&d.id&&(u.sliderId=""+d.id+"-slider"),u.sliderId&&i.attr("id",u.sliderId),b(function(){return i.flexslider(u)},0)}})}}}}])}.call(this);var test=function(a){var b=a.getMyself();return null==b?"NOT_CONNECTED":b.type},initializeCommonRoutes=function(){myApp.config(["$routeProvider","$locationProvider",function(a,b){a.when("/shopnews/:param*?",{templateUrl:"/assets/js/view/web/home.html",controller:"HomeCtrl",resolve:{a:["accountService","$rootScope",function(a,b){b.$broadcast("PROGRESS_BAR_START");test(a)}]}}).when("/profile",{templateUrl:"/assets/js/view/web/profile.html",controller:"ProfileCtrl",resolve:{a:["accountService","$location","$rootScope",function(a,b,c){c.$broadcast("PROGRESS_BAR_START"),"NOT_CONNECTED"==test(a)&&b.path("/")}]}}).when("/search/:param?",{templateUrl:"/assets/js/view/web/search_page.html",controller:"SearchPageCtrl",resolve:{a:["$rootScope",function(a){a.$broadcast("PROGRESS_BAR_START")}]}}).when("/my-businesses",{templateUrl:"/assets/js/view/web/followed_business_page.html",controller:"FollowedBusinessPageCtrl",resolve:{a:["$rootScope",function(a){a.$broadcast("PROGRESS_BAR_START")}]}}).when("/map",{templateUrl:"/assets/js/view/web/map.html",controller:"MapCtrl",resolve:{a:["$rootScope",function(a){a.$broadcast("PROGRESS_BAR_START")}]}}).when("/business/:businessId",{templateUrl:"/assets/js/view/web/business.html",controller:"BusinessCtrl",resolve:{a:["$rootScope",function(a){a.$broadcast("PROGRESS_BAR_START")}]}}).when("/business/:businessId/publication/:publicationId",{templateUrl:"/assets/js/view/web/business.html",controller:"BusinessCtrl",resolve:{a:["$rootScope",function(a){a.$broadcast("PROGRESS_BAR_START")}]}}).when("/welcome",{templateUrl:"/assets/js/view/web/welcome.html",controller:"WelcomeCtrl",resolve:{a:["$rootScope",function(a){a.$broadcast("PROGRESS_BAR_START")}]}}).when("/about/",{resolve:{a:["$rootScope",function(a){window.location.replace("/about/")}]}}).when("/legal/",{resolve:{a:["$rootScope",function(a){window.location.replace("/legal/")}]}}).when("/help/",{resolve:{a:["$rootScope",function(a){window.location.replace("/help/")}]}}).otherwise({redirectTo:"/welcome/"}),b.html5Mode(!0)}])},myApp=angular.module("app",["ngAnimate","ui.bootstrap","ui.bootstrap.datetimepicker","angucomplete","angularFileUpload","ngRoute","ngTable","geolocation","timer","angular-flexslider"]);app.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]),app.run(["$route","$rootScope","$location",function(a,b,c){var d=c.path;c.path=function(e,f){if(f===!1)var g=a.current,h=b.$on("$locationChangeSuccess",function(){a.current=g,h()});return d.apply(c,[e])}}]),myApp.directive("businessCreationFormCtrl",["$flash","facebookService","translationService","directiveService","$timeout","accountService","businessService",function(a,b,c,d,e,f,g){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/businessCreationForm/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(b){return d.autoScopeImpl(b),b.business={},b.businessNameField={name:"name",fieldTitle:"--.generic.name",validationRegex:"^.{2,50}$",validationMessage:["--.generic.validation.size","2","250"],field:b.business,disabled:function(){return b.loading},fieldName:"name"},b.importFromFacebookParam={name:"facebookUrl",validationRegex:"^($|https://www.facebook.com/.*$)",validationMessage:"--.generic.validation.facebook",fieldTitle:"Facebook",field:b.business,disabled:function(){return b.loading},fieldName:"facebookUrl"},b.setLoading=function(a){return b.loading=a},b.save=function(){return b.businessNameField.isValid?(b.setLoading(!0),g.createBusiness(f.getMyself().id,b.business.name,function(a){return b.getInfo().callbackSuccess(a)},function(){return b.loading=!1,b.getInfo().callbackFail()})):(b.businessNameField.displayErrorMessage=!0,a.error(c.get("--.generic.error.complete.fields")))},b.importBusinessFromFacebook=function(){var c;return b.importFromFacebookParam.isValid?(b.setLoading(!0),c=encodeURIComponent(b.business.facebookUrl),g.importBusinessFormFacebook(c,function(a){return b.getInfo().callbackSuccess(a)},function(){return b.setLoading(!1),b.getInfo().callbackFail()})):(b.importFromFacebookParam.displayErrorMessage=!0,a.error($filter("translateText")("--.generic.error.complete.fields")))}}}}}}]),myApp.controller("LoginModalCtrl",["$scope","$flash","$filter","facebookService","translationService","$modal","$modalInstance","accountService","$location","modalService","fctToExecute","fctToExecuteParams","helpMessage",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return a.fctToExecute=k,a.helpMessage=m,a.loginFormParam={facebookSuccess:function(b){return null!=k&&k(l),a.close()},loading:!1},a.close=function(){return g.close()},a.save=function(){return a.loginFormParam.isValid?(a.loginFormParam.loading=!0,h.login(a.loginFormParam.dto,function(){return b.success(e.get("--.login.flash.success")),a.loading=!1,a.close(),"BUSINESS"===h.getMyself().type&&i.path("/business/"+h.getMyself().businessId),null!=k?k(l):void 0},function(){return a.loginFormParam.loading=!1})):(a.loginFormParam.displayErrorMessage=!0,b.error(e.get("--.generic.error.complete.fields")))},a.toForgotPassword=function(){j.openForgotPasswordModal(a.loginFormParam.dto.email),a.close()},a.toBusinessRegistration=function(){return a.close(),j.openBusinessRegistrationModal()},a.toCustomerRegistration=function(){return a.close(),j.openCustomerRegistrationModal(k,l)}}]),myApp.controller("ChangePasswordModalCtrl",["$scope","$flash","$modalInstance","accountService","$timeout",function(a,b,c,d,e){a.loading=!1,a.dto={},a.fields={oldPassword:{id:"change-password-input-password",name:"password",fieldTitle:"--.generic.oldPassword",validationRegex:"^[a-zA-Z0-9-_%]{6,18}$",validationMessage:"--.generic.validation.password",fieldType:"password",focus:function(){return!0},disabled:function(){return a.loading},field:a.dto,fieldName:"oldPassword"},newPassword:{id:"change-password-input-new-password",name:"newPassword",fieldTitle:"--.changePasswordModal.newPassword",validationRegex:"^[a-zA-Z0-9-_%]{6,18}$",validationMessage:"--.generic.validation.password",fieldType:"password",details:"--.registration.form.password.help",disabled:function(){return a.loading},field:a.dto,fieldName:"newPassword"},repeatPassword:{id:"change-password-input-repeat-password",name:"repeatNewPassword",fieldTitle:"--.generic.repeatPassword",fieldType:"password",validationMessage:"--.generic.validation.repeatPassword",validation:function(){return a.dto.newPassword===a.dto.repeatPassword},disabled:function(){return a.loading},field:a.dto,fieldName:"repeatPassword"}},a.close=function(){c.close()},a.$watch("fields",function(){var b=!0;for(var c in a.fields){var d=a.fields[c];!a.fields.hasOwnProperty(c)||null!=d.isValid&&d.isValid!==!1||(d.firstAttempt=!a.displayErrorMessage,b=!1)}a.isValid=b},!0),a.$watch("displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.displayErrorMessage}}),a.save=function(){a.isValid&&(a.loading=!0,d.changePassword(a.dto.oldPassword,a.dto.newPassword,function(){a.loading=!1,a.close()},function(){a.loading=!1}))}}]),myApp.controller("ForgotPasswordModalCtrl",["$scope","$http","$flash","$modalInstance","$filter","email","accountService",function(a,b,c,d,e,f,g){a.loading=!1,a.dto={email:f},a.fields={email:{fieldType:"email",name:"email",fieldTitle:"--.changeEmailModal.email",validationRegex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,validationMessage:"--.generic.validation.email",focus:function(){return!0},disabled:function(){return a.loading},field:a.dto,fieldName:"email"}},a.close=function(){d.close()},a.$watch("fields",function(){var b=!0;for(var c in a.fields){var d=a.fields[c];!a.fields.hasOwnProperty(c)||null!=d.isValid&&d.isValid!==!1||(d.firstAttempt=!a.displayErrorMessage,b=!1)}a.isValid=b},!0),a.$watch("displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.displayErrorMessage}}),a.save=function(){a.isValid?(a.loading=!0,g.forgotPassword(a.dto,function(){c.success(e("translateText")("--.forgotPassword.success")),a.loading=!1,a.close()},function(){a.loading=!1})):a.displayErrorMessage=!0}}]),myApp.controller("HelpModalCtrl",["$scope","$modalInstance","message",function(a,b,c){a.message=c,a.close=function(){b.close()}}]),myApp.controller("DownloadFieldModalCtrl",["$scope","$flash","$modalInstance",function(a,b,c){a.loading=!1,a.fields={file:{fieldTitle:"generic.file",disabled:function(){return a.loading}}},a.close=function(){c.close()},a.allFieldValid=function(){var b=!0;for(var c in a.fields){var d=a.fields[c];!a.fields.hasOwnProperty(c)||null!=d.isValid&&d.isValid!==!1||(d.firstAttempt=!1,b=!1)}return b},a.save=function(){a.allFieldValid()}}]),myApp.controller("CustomerRegistrationModalCtrl",["$scope","$flash","$modal","$modalInstance","translationService","accountService","facebookService","modalService","fctToExecute","fctToExecuteParams",function(a,b,c,d,e,f,g,h,i,j){return a.accountParam={},a.close=function(){return d.close()},a.toBusinessRegistration=function(){return a.close(),h.openBusinessRegistrationModal()},a.setLoading=function(b){return a.loading=b,a.accountParam.disabled=b},a.fb_login=function(){return a.setLoading(!0),g.login(function(b){return f.setMyself(b),"BUSINESS"===b.type&&$location.path("/business/"+f.getMyself().businessId),a.setLoading(!1),a.close()},function(a){return b.error(a.message)})},a.save=function(){return a.accountParam.isValid?(a.setLoading(!0),f.registration(a.accountParam.dto,function(){return a.setLoading(!1),b.success(e.get("--.login.flash.success")),null!=i&&i(j),a.close()},function(){return a.setLoading(!1)})):(a.accountParam.displayErrorMessage=!0,b.error(e.get("--.generic.error.complete.fields")))}}]),myApp.controller("BusinessRegistrationModalCtrl",["$scope","$flash","$modal","$modalInstance","translationService","accountService","facebookService","businessService","$location",function(a,b,c,d,e,f,g,h,i){return a.badgeSelected=1,a.accountParam={},a.account=null,a.businessRegistrationParams={callbackSuccess:function(b){return f.setMyself(b),i.path("/business/"+f.getMyself().businessId),a.close(),a.setLoading(!1)},callbackFail:function(){}},a.setLoading=function(b){return a.loading=b,a.accountParam.disabled=b},a.close=function(){return d.close()},a.toBusinessStep=function(){return"BUSINESS"===f.getMyself().type?(b.success(e.get("--.businessRegistration.alreadyBusiness")),a.close()):a.badgeSelected=2},a.fb_login=function(){return a.setLoading(!0),g.login(function(b){return f.setMyself(b),a.setLoading(!1),a.toBusinessStep()},function(a){return b.error(a.message)})},a.createAccount=function(){return a.accountParam.isValid?(a.setLoading(!0),f.registration(a.accountParam.dto,function(){return a.setLoading(!1),a.toBusinessStep()},function(){return a.setLoading(!1)})):(a.accountParam.displayErrorMessage=!0,b.error($filter("translateText")("--.generic.error.complete.fields")))}}]),myApp.controller("AddressModalCtrl",["$scope","$flash","$modalInstance","businessService","accountService","translationService","addName","dto","isBusiness","callback",function(a,b,c,d,e,f,g,h,i,j){a.loading=!1,a.update=null!=h,a.addressParam={addName:g,dto:angular.copy(h)},a.close=function(){c.close()},a.success=function(b){a.loading=!1,a.close(),null!=j&&void 0!=j&&j(b)},a.save=function(){a.addressParam.isValid?(a.loading=!0,a.update?e.editAddress(a.addressParam.dto,function(b){a.success(b)},function(){a.loading=!1}):e.addAddress(a.addressParam.dto,function(b){a.success(b)},function(){a.loading=!1})):a.addressParam.displayErrorMessage=!0}}]),myApp.controller("EditCustomerInterestModalCtrl",["$scope","$flash","$modal","$modalInstance","translationService","accountService","facebookService","modalService",function(a,b,c,d,e,f,g,h){a.customerInterestParam={result:f.getMyself().customerInterests},a.close=function(){d.close()},a.save=function(){a.loading=!0,f.editCustomerInterest(a.customerInterestParam.result,function(){a.loading=!1,a.close()},function(){a.loading=!1})}}]),myApp.controller("PromotionModalCtrl",["$scope","$flash","$modalInstance","translationService","dto","promotionService","callback","facebookService","business","modalService","superAdminService","accountService",function(a,b,c,d,e,f,g,h,i,j,k,l){a.loading=!1,a.update=null!=e,a.promotionParam={dto:angular.copy(e),business:i},a.getHeight=function(){var a={height:$(window).height()-190+"px"};return a},a.close=function(){c.close()},a.getIllustration=function(a){return a.pictures.length>0?a.pictures[O]:a.businessIllustration},a.success=function(b){a.loading=!1,a.close(),g()},a.save=function(c){a.promotionParam.isValid?a.promotionParam.minimalQuantity>a.promotionParam.quantity?b.error(d.get("--.promotion.validation.minimalQuantityMustBeLowerThanQuantity")):a.loading===!1&&(a.loading=!0,a.update?f.edit(a.promotionParam.dto,function(b){a.success(b)},function(){a.loading=!1}):"SUPERADMIN"==l.getMyself().role?k.createPromotion(i.id,a.promotionParam.dto,function(b){a.success(b),j.successAndShare(a.promotionParam.business.id,b.id)},function(){a.loading=!1}):f.add(a.promotionParam.dto,function(b){a.success(b),j.successAndShare(a.promotionParam.business.id,b.id)},function(){a.loading=!1})):a.promotionParam.displayErrorMessage=!0}}]),myApp.controller("BusinessNotificationModalCtrl",["$scope","$flash","$modalInstance","translationService","dto","businessNotificationService","callback","facebookService","business","modalService","superAdminService","accountService",function(a,b,c,d,e,f,g,h,i,j,k,l){a.loading=!1,a.update=null!=e,a.businessNotificationParam={dto:angular.copy(e),business:i},a.getHeight=function(){var a={height:$(window).height()-190+"px"};return a},a.close=function(){c.close()},a.getIllustration=function(a){return a.pictures.length>0?a.pictures[O]:a.businessIllustration},a.success=function(b){a.loading=!1,a.close(),g()},a.save=function(b){a.businessNotificationParam.isValid?a.loading===!1&&(a.loading=!0,a.update?f.edit(a.businessNotificationParam.dto,function(b){a.success(b)},function(){a.loading=!1}):"SUPERADMIN"==l.getMyself().role?k.createBusinessNotification(i.id,a.businessNotificationParam.dto,function(b){a.success(b),j.successAndShare(a.businessNotificationParam.business.id,b.id)},function(){a.loading=!1}):f.add(a.businessNotificationParam.dto,function(b){a.success(b),j.successAndShare(a.businessNotificationParam.business.id,b.id)},function(){a.loading=!1})):a.businessNotificationParam.displayErrorMessage=!0}}]),myApp.controller("OneFieldModalCtrl",["$scope","$flash","facebookService","translationService","$modal","$modalInstance","accountService","$location","field","callback",function(a,b,c,d,e,f,g,h,i,j){var k={data:null};a.text={fieldTitle:i.name,validationRegex:"^.{1,255}$",validationMessage:["--.generic.validation.size","1","255"],field:k,fieldName:"data"},a.loading=!1,a.close=function(){f.close()},a.save=function(){a.text.isValid?(j(k.data),f.close()):a.text.firstAttempt=!1}}]),myApp.controller("BasicModalCtrl",["$scope","$flash","$modalInstance","businessService","accountService","translationService","param","$compile","directiveName","save","$timeout","title",function(a,b,c,d,e,f,g,h,i,j,k,l){a.title=l;var m=h("<"+i+' ng-info="param"/>')(a);k(function(){$(".inject-data:first").append(m)},1),a.loading=!1,a.param=g,a.close=function(){c.close()},a.setLoading=function(b){g.disabled=b,a.loading=b},a.save=function(){var b=!0;null!=g.callBackSave&&g.callBackSave(),console.log(g.isValid),void 0!=g.isValid&&(b=g.isValid,g.displayErrorMessage=!0),b&&(a.setLoading(!0),j(a.close,a.setLoading))}}]),myApp.controller("MessageModalCtrl",["$scope","$flash","$modalInstance","$compile","title","message","save",function(a,b,c,d,e,f,g){a.message=f,a.title=e,a.loading=!1,a.close=function(){c.close()},a.displaySaveButton=function(){return null!=g&&void 0!=g},a.save=function(){g(a.close)}}]),myApp.controller("GalleryModalCtrl",["$scope","$modalInstance","image","images",function(a,b,c,d){a.image=c,a.images=d,a.imageNb=null,a.close=function(){b.close()};for(var e in a.images)a.images[e]==a.image&&(a.imageNb=e- -1);a.previous=function(){for(var b in a.images)if(a.images[b]==a.image){void 0==a.images[b-1]?(a.image=a.images[a.images.length-1],a.imageNb=a.images.length):(a.image=a.images[b-1],a.imageNb=b-1- -1);break}},a.next=function(){for(var b in a.images)if(a.images[b]==a.image){var c=b- -1;void 0==a.images[c]?(a.image=a.images[0],a.imageNb=1):(a.image=a.images[c],a.imageNb=b- -1- -1);break}}}]),myApp.controller("iframeModalCtrl",["$scope","$flash","$modalInstance","title","url",function(a,b,c,d,e){a.title=d,a.url=e,a.close=function(){c.close()}}]),myApp.controller("BusinessCreationModalCtrl",["$scope","$flash","$modal","$modalInstance","translationService","accountService","facebookService","businessService","$location",function(a,b,c,d,e,f,g,h,i){return a.businessRegistrationParams={callbackSuccess:function(b){return f.setMyself(b),i.path("/business/"+f.getMyself().businessId),a.close()},callbackFail:function(){}},a.close=function(){return d.close()}}]),myApp.controller("HomeCtrl",["$scope","modalService","customerInterestService","searchService","$rootScope","geolocationService","accountService","$timeout","addressService","$location","$route","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q;return a.param=l.param,n=j.path,a.interestDisplayMax=12,a.interestDisplayed=[],a.interestDisplayed2=[],a.followingMode=null!=a.param&&-1!==a.param.indexOf("following"),a.businessInfoParam={},a.businessListParam={data:[]},a.accountService=g.model,a.publicationListCtrl={},a.currentPage=0,a.allLoaded=!1,a.loadSemaphore=!1,a.emptyMessage=null,o=function(){var b,c;c="/shopnews",a.followingMode&&(c+="/following");for(b in a.customerInterests)a.customerInterests[b].selected===!0&&(c+="/"+a.customerInterests[b].name);return j.path(c,!1),e.$broadcast("PROGRESS_BAR_STOP")},a.displaySharePositionWarning=function(){return!(f.sharePosition!==!1||null!=g.getMyself()&&null!=g.getMyself().selectedAddress)},e.$watch(function(){return f.sharePosition},function(b){return a.sharePosition=b}),a.setFollowedMode=function(c){return console.log("setFollowedMode:"+c),null==c&&(c=!a.followingMode),null==g.getMyself()?b.openLoginModal(a.switchFollowedMode,c,"--.loginModal.help.followMode"):a.switchFollowedMode(c)},a.switchFollowedMode=function(b){return console.log("switchFollowedMode:"+b),a.followingMode=b,o()},a.customerRegistration=function(){return b.openCustomerRegistrationModal()},a.searchByInterest=function(b){var c;if(b.selected===!0)b.selected=!1;else{for(c in a.customerInterests)a.customerInterests[c].selected=!1;b.selected=!0}return a.currentPage=0,a.allLoaded=!1,a.search(),o()},a.$on("POSITION_CHANGED",function(){return a.currentPage=0,a.allLoaded=!1,a.search()}),a.$watch("followingMode",function(b,c){return c!==b?(a.currentPage=0,a.allLoaded=!1,a.search()):void 0}),a.$on("LOGOUT",function(){return a.followingMode?a.followingMode=!1:void 0}),$(window).on("scroll",function(){var b;return b=$(window).scrollTop()+$(window).height(),$(".container-content").height()-b<200&&a.loadSemaphore===!1?(a.currentPage=a.currentPage+1,a.search()):void 0}),q=function(b,c){var d,e,f,g;for(0===a.currentPage&&(a.publicationListCtrl.data=[]),a.loadSemaphore=!1,a.publicationListCtrl.loading=!1,(null==b||b.length<=5)&&(a.allLoaded=!0,0===a.currentPage&&null!=c&&(c(),0!==b.length&&(a.emptyMessage="moreBusiness"))),g=[],e=0,f=b.length;f>e;e++)d=b[e],g.push(a.publicationListCtrl.data.push(d));return g},p=function(b){return a.businessListParam.data=b,a.businessListParam.loading=!1},a.search=function(){var b,c;if(a.allLoaded===!1){c=null;for(b in a.customerInterests)a.customerInterests[b].selected&&(c=a.customerInterests[b]);return a.loadSemaphore=!0,0===a.currentPage&&(a.publicationListCtrl.loading=!0,a.emptyMessage=null,a.publicationListCtrl.data=[],a.businessListParam.data=[]),a.followingMode?null!=c?d.byFollowedAndInterest(a.currentPage,c.id,function(b){return q(b,function(){return a.emptyMessage="followedWithInterest",a.businessListParam.loading=!0,d.nearBusinessByInterest(c.id,function(a){return p(a)})})}):d.byFollowed(a.currentPage,function(b){return q(b,function(){return a.emptyMessage="followed",a.businessListParam.loading=!0,d.nearBusiness(function(a){return p(a)})})}):null!=c?d.byInterest(a.currentPage,c.id,function(b){return q(b,function(){return a.emptyMessage="newsFeedWithInterest",a.businessListParam.loading=!0,d.nearBusinessByInterest(c.id,function(a){return p(a)})})}):d["default"](a.currentPage,function(b){return q(b,function(){return a.emptyMessage="newsFeed",a.businessListParam.loading=!0,d.nearBusiness(function(a){return p(a)})})})}},a.createNewAddress=function(){return null!=g.getMyself()?m():b.openLoginModal(m,null,"--.loginModal.help.address")},m=function(){return b.addressModal(!0,null,!1,function(a){return h(function(){return i.changeAddress(a.name,function(a){return g.getMyself().selectedAddress=a,h(function(){return e.$broadcast("CHANGE_ADDRESS_SELECTED")},1)})},1)})},$(window).scrollTop(0),e.$broadcast("PROGRESS_BAR_STOP"),a.currentPage=0,a.allLoaded=!1,c.getAll(function(b){var c;if(a.customerInterests=b,null!=a.param)for(c in a.customerInterests)-1!==a.param.indexOf(a.customerInterests[c].name)&&(a.customerInterests[c].selected=!0);return a.interestDisplayed=a.customerInterests.slice(0,a.interestDisplayMax),a.interestDisplayed2=a.customerInterests.slice(a.interestDisplayMax,a.customerInterests.length)}),a.search()}]),myApp.controller("ProfileCtrl",["$scope","modalService","accountService","$rootScope","$window","businessService","facebookService","translationService","$flash",function(a,b,c,d,e,f,g,h,i){
return a.model=c.model,a.accountParam={updateMode:!0,dto:angular.copy(c.getMyself()),disabled:!0},a.editPassword=function(){return b.openEditPasswordModal()},a.interestEdit=function(){return b.openEditCustomerInterest()},a.personalEdit=function(){return a.oldLang=angular.copy(a.accountParam.dto.lang),a.accountParam.disabled=!1},a.personalSave=function(){return a.accountParam.disabled=!0,c.editAccount(a.accountParam.dto,function(){return a.oldLang.code!==a.accountParam.dto.lang.code?e.location.reload():void 0})},a.personalCancel=function(){return a.accountParam.dto.firstname=c.getMyself().firstname,a.accountParam.dto.lastname=c.getMyself().lastname,a.accountParam.dto.email=c.getMyself().email,a.accountParam.dto.gender=c.getMyself().gender,a.accountParam.disabled=!0},a.addAddress=function(){return b.addressModal(!0,null,!1)},a.editAddress=function(a){return b.addressModal(!0,a,!1)},a.deleteAddress=function(a){return c.deleteAddress(a)},a.createBusiness=function(){return b.openCreationBusiness()},a.facebookSuccess=function(a){return c.setMyself(a),i.success(h.get("--.profile.linkFacebook.success"))},a.fb_login=function(){return a.loading=!0,g.linkToAccount(null,function(b){return a.facebookSuccess(b),a.loading=!1},function(b){return a.loading=!1,failed(b)})},d.$broadcast("PROGRESS_BAR_STOP"),$(window).scrollTop(0),d.$broadcast("PROGRESS_BAR_STOP")}]),myApp.controller("BusinessCtrl",["$rootScope","$scope","modalService","businessService","$routeParams","accountService","$window","addressService","geolocationService","translationService","$flash","$timeout","contactService","$filter","constantService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return null!==e.publicationId&&(b.publicationIdToGo=e.publicationId),b.displayError=!1,b.loading=!0,b.business=null,b.edit=!1,b.myBusiness=!1,b.businessId=e.businessId,b.descriptionLimitBase=200,b.descriptionLimit=b.descriptionLimitBase,null!=f.model.myself?b.myself=f.model.myself:b.$watch(function(){return f.model},function(a){return null!=a&&f.model.myself?b.myself=f.model.myself:void 0},!0),b.publicationOptions=[{key:"BASIC",value:"--.business.publication.basic"},{key:"ARCHIVE",value:"--.business.publication.archive"}],b.googleMapParams={staticMap:!0},b.displayEditMode=function(){return b.myBusiness===!0||null!=f.getMyself()&&"SUPERADMIN"===f.getMyself().role},b.publicationListParam={scrollTo:b.publicationIdToGo,displayRemoveIcon:b.edit,type:"BASIC",businessId:e.businessId},b.$watch("edit",function(){return b.publicationListParam.displayRemoveIcon=b.edit}),d.getBusiness(e.businessId,function(a){return b.loading=!1,b.business=a,b.publicationListParam.business=b.business,b.$watch("business.businessStatus",function(){return null!=f.getMyself()&&o.compareNumber(f.getMyself().businessId,e.businessId)&&("WAITING_CONFIRMATION"!==b.business.businessStatus&&(b.edit=!0),b.myBusiness=!0),b.myBusiness?b.publicationOptions.push({key:"PREVISUALIZATION",value:"--.business.publication.previsualization"}):void 0}),b.computeDistance=function(){null!=b.business.address&&h.distance(b.business.address.id,function(a){b.business.distance=a.distance})},b.computeDistance(),b.$on("POSITION_CHANGED",function(){return b.computeDistance()}),b.publish=function(){return c.messageModal("--.business.page.askPublication.window.title","--.business.page.askPublication.window.message",function(a){return d.publishBusiness(),a(),k.info(j.get("--.business.page.askPublication.window.flash")),b.business.businessStatus="WAITING_CONFIRMATION"})},b.cancelPublishRequest=function(){return c.messageModal("--.business.page.cancelPublishRequest.window.title","--.business.page.cancelPublishRequest.window.message",function(a){return d.cancelPublishRequest(),a(),k.info(j.get("--.business.page.cancelPublishRequest.window.flash")),b.business.businessStatus="NOT_PUBLISHED"})},b.stopPublish=function(){return c.messageModal("--.business.page.stopPublication.window.title","--.business.page.stopPublication.window.message",function(a){return d.stopPublication(),a(),k.info(j.get("--.business.page.stopPublication.window.flash")),b.business.businessStatus="NOT_PUBLISHED"})},b.editbusiness=function(){var a;return a=angular.copy(b.business),c.basicModal("--.business.edit.data.modal.title","business-form-ctrl",{dto:a,status:a.businessStatus},function(c,e){return d.edit(a,function(a){return b.business.name=a.name,b.business.description=a.description,b.business.phone=a.phone,b.business.website=a.website,b.business.email=a.email,c()},function(){return e(!1)})})},b.editIllustration=function(){var a;return a=angular.copy(b.business),c.basicModal("--.business.edit.illustration.modal.title","image-form-ctrl",{dto:a,target:"business_illustration",fieldName:"illustration",details:"--.business.logo.edit.modal.description"},function(c,e){return d.editIllustration(a.id,a.illustration,function(){b.business.illustration=a.illustration,c()},function(){return e(!1)})})},b.editLandscape=function(){var a;return a=angular.copy(b.business),c.basicModal("--.business.edit.landscape.modal.title","image-form-ctrl",{dto:a,target:"business_landscape",fieldName:"landscape",details:"--.business.landscape.edit.modal.description"},function(c,e){return d.editLandscape(a.id,a.landscape,function(){return b.business.landscape=a.landscape,c()},function(){return e(!1)})})},b.googleMapParams.address=b.business.address,l(function(){return null!=b.business.address?b.googleMapParams.refreshNow():void 0},1),b.editAddress=function(){var a;return"PUBLISHED"===b.business.businessStatus?k.success(n("translateText")("--.business.error.editAddress.wrongStatus")):(a=angular.copy(b.business.address),null==a&&(a={}),c.basicModal("--.business.edit.address.modal.title","address-form-ctrl",{dto:a,addName:!1},function(c,e){return d.editAddress(b.business.id,a,function(a){return b.business.address=a,b.googleMapParams.address=a,c()},function(){return e(!1)})}))},b.categoryLineParams={categories:b.business.categories},b.editCategory=function(){var a,e,f,g,h,i,j,k;a=[],k=b.business.categories;for(e in k){h=k[e];for(f in h){i=h[f];for(g in i)j=i[g],a.push(j)}}return c.basicModal("--.business.edit.category.modal.title","business-category-form-ctrl",{value:a},function(c,e){return d.editBusinessCategory(b.business.id,a,function(a){return b.business.categories=a.categories,b.categoryLineParams.categories=b.business.categories,c()},function(){return e(!1)})})},b.editSchedule=function(){var a;return a=angular.copy(b.business.schedules),c.basicModal("--.business.edit.schedule.modal.title","schedule-form-ctrl",{dto:a,disabled:!1},function(c,e){return d.createSchedule(b.business.id,{schedules:a},function(d){return b.business.schedules=a,c()},function(){return e(!1)})})},b.editGallery=function(){var a;return a=angular.copy(b.business),c.basicModal("--.business.edit.address.modal.title","dir-field-image-mutiple",{fieldTitle:"--.business.modal.gallery.title",validationMessage:"--.error.validation.image",help:"--.business.gallery.download.help",details:"--gallery.maximumImage",field:a,maxImage:10,multiple:!0,target:"galley_picture",fieldName:"galleryPictures"},function(c,e){return d.editGallery(b.business.id,{list:a.galleryPictures},function(a){return b.business.galleryPictures=a,c()},function(){return e(!1)})})},b.editSocialNetwork=function(){var a;return a=angular.copy(b.business.socialNetwork),null==a&&(a={}),c.basicModal("--.business.edit.socialNetwork.modal.title","business-social-network-ctrl",{dto:a},function(c,e){return d.editSocialNetwork(b.business.id,a,function(d){return b.business.socialNetwork=a,c()},function(){return e(!1)})})},b.createPromotion=function(){return c.openPromotionModal(null,b.business,function(){return b.$broadcast("RELOAD_PUBLICATION")})},b.createNotification=function(){return c.openBusinessNotificationModal(null,b.business,function(){return b.$broadcast("RELOAD_PUBLICATION")})},b.$on("POSITION_CHANGED",function(){b.$broadcast("RELOAD_PUBLICATION")}),b.$watch("publicationListParam.type",function(a,c){return a!==c?b.$broadcast("RELOAD_PUBLICATION"):void 0}),b.refreshPublications=function(){return b.$broadcast("RELOAD_PUBLICATION")},b.$on("RELOAD_PUBLICATION",function(){return b.publicationListParam.refresh(b.publicationListParam.type)}),b.numberCategories=function(){return Object.keys(b.business.categories).length},null!=i.currentPosition&&b.$broadcast("RELOAD_PUBLICATION"),b.displaySchedule=function(){var a;for(a in b.business.schedules)if(b.business.schedules[a].length>0)return!0;return!1},b.displaySocialNetwork=function(){var a;return a=b.business.socialNetwork,null==a?!1:null!=a.facebookLink||null!=a.twitterLink||null!=a.instagramLink||null!=a.deliveryLink||null!=a.opinionLink||null!=a.reservationLink||null!=a.pinterestLink||null!=a.googlePlusLink},b.computeProgression=function(){var a;return a=0,null!=b.business.address&&a++,b.numberCategories()>0&&a++,null!=b.business.description&&a++,null!=b.business.illustration&&a++,null!=b.business.landscape&&a++,b.business.galleryPictures.length>0&&a++,b.displaySocialNetwork()&&a++,b.displaySchedule()&&a++,a},b.getProgressionStyle=function(){return"width:"+300*b.computeProgression()/5+"px"},b.tryClaimBusiness=function(){return null!=f.getMyself()?b.claimBusiness():c.openLoginModal(b.claimBusiness,null,"--.loginModal.help.claimBusiness")},b.claimBusiness=function(){var a;return a={},c.basicModal("--.business.claim.modal.title","claim-business-ctrl",{dto:a},function(c,e){return d.claimBusiness(b.business.id,a.phone,a.vta,function(){return k.success(n("translateText")("--.business.claim.modal.success")),c(),f.model.myself.claimedBusinessId=b.business.id,b.myself.claimedBusinessId=b.business.id,e(!1)},function(){return e(!1)})})},b.openContact=function(){var a;return a={target:"HELP"},c.basicModal("--.contactForm.modal.title","contact-form-ctrl",{dto:a},function(b,c){return m.contact(a,function(){return k.success(n("translateText")("--.contactForm.send.success")),b(),c(!1)},function(){return c(!1)})})}},function(){return b.loading=!1,b.displayError=!0}),$(window).scrollTop(0),a.$broadcast("PROGRESS_BAR_STOP")}]),myApp.controller("SearchPageCtrl",["$rootScope","$scope","searchService","$routeParams","searchBarService","geolocationService",function(a,b,c,d,e,f){var g;return g=d.param,e.setCurrentSearch(g),b.businessTab={currentPage:0},b.categoryTab={currentPage:0},b.publicationTab={currentPage:0},b.results=null,b.init=function(){return c.searchByString(0,g,function(a){var d,f,g,h,i,j;b.businessTab.display=!1,b.categoryTab.display=!1,b.publicationTab.display=!1,j=0;for(i in e.searchCriteria)e.searchCriteria[i].selected&&("business"===e.searchCriteria[i].key?b.businessTab.display=!0:"category"===e.searchCriteria[i].key?b.categoryTab.display=!0:"publication"===e.searchCriteria[i].key&&(b.publicationTab.display=!0),j++);if(0===j&&(b.businessTab.display=!0,b.categoryTab.display=!0,b.publicationTab.display=!0),b.results=a,d=!1,b.businessTab.display&&(b.businessTab.total=b.results.businesses.length,!d&&b.businessTab.total>0&&(b.businessTab.active=!0,d=!0),b.businessTab.totalToDisplay=b.businessTab.total,20===b.results.businesses.length&&(b.businessTab.totalToDisplay+="+")),b.publicationTab.display&&(b.publicationTab.total=b.results.publications.length,!d&&b.publicationTab.total>0&&(b.publicationTab.active=!0,d=!0),b.publicationTab.totalToDisplay=b.publicationTab.total,20===b.results.publications.length&&(b.publicationTab.totalToDisplay+="+")),b.categoryTab.display){b.categoryTab.total=0;for(f in b.results.categoriesMap)for(g in b.results.categoriesMap[f])for(h in b.results.categoriesMap[f][g])b.categoryTab.total+=b.results.categoriesMap[f][g][h].length,20===b.results.categoriesMap[f][g][h].length&&(b.categoryTab.loadCategory=!0);!d&&b.categoryTab.total>0&&(b.categoryTab.active=!0,d=!0),b.categoryTab.totalToDisplay=b.categoryTab.total,b.categoryTab.total>=20&&(b.categoryTab.totalToDisplay+="+")}return b.businessTab.data=b.results.businesses,b.publicationTab.data=b.results.publications,b.categoryTab.data=b.results.categoriesMap,b.loadSemaphore=!1,$(window).on("scroll",function(){var a;a=$(window).scrollTop()+$(window).height(),$(".container-content").height()-a<200&&b.search()}),b.search=function(){var a,d;if(b.loadSemaphore===!1&&(b.loadSemaphore=!0,d=void 0,b.businessTab.active?d=b.businessTab:b.publicationTab.active?d=b.publicationTab:b.categoryTab.active&&(d=b.categoryTab),20===d.total&&d.allLoaded!==!0)){if(a=e.currentSearch,-1!==a.indexOf(":")&&(a=a.split(":")[1]),d.currentPage++,b.businessTab.active)return a="business:"+a,c.searchByString(d.currentPage,a,function(a){var c;if(b.loadSemaphore=!1,0===a.businesses.length)d.allLoaded=!0;else for(c in a.businesses)d.data.push(a.businesses[c])});if(b.publicationTab.active)return a="publication:"+a,c.searchByString(d.currentPage,a,function(a){var c;if(b.loadSemaphore=!1,0===a.publications.length)d.allLoaded=!0;else for(c in a.publications)d.data.push(a.publications[c])});if(b.categoryTab.active&&b.categoryTab.loadCategory===!0)return a="category:"+a,c.searchByString(d.currentPage,a,function(a){var c;return b.loadSemaphore=!1,c=b.fusionCategories(a.categoriesMap),0===c?d.allLoaded=!0:void 0})}}})},b.fusionCategories=function(a){var c,d,e,f,g,h,i,j,k,l,m;m=0;for(f in a){e=!1;for(d in b.results.categoriesMap)if(d===f){e=!0;break}if(e)for(g in a[f]){j=!1;for(i in b.results.categoriesMap[f])if(i===g){j=!0;break}if(j)for(h in a[f][g]){l=!1;for(k in b.results.categoriesMap[f][g])if(k===h){l=!0;break}if(l)for(c in a[f][g][h])b.results.categoriesMap[f][g][h].push(a[f][g][h][c]),m++;else b.results.categoriesMap[f][g].newSSCat=a[f][g][h]}else b.results.categoriesMap[f].newSCat=a[f][g]}else b.results.categoriesMap.newCat=a[f]}return m},$(window).scrollTop(0),a.$broadcast("PROGRESS_BAR_STOP"),b.init(),b.$on("POSITION_CHANGED",function(){return b.init()})}]),myApp.controller("FollowedBusinessPageCtrl",["$rootScope","$scope","businessService","ngTableParams","$filter","followService",function(a,b,c,d,e,f){return b.businessListParams={loading:!0},c.getFollowedBusinesses(function(a){return b.businesses=a,b.$watch("filter.$",function(a,c){return c!==a?b.tableParams.reload():void 0}),b.tableParams=new d({page:1,count:10,sorting:{name:"asc"}},{counts:[],total:b.businesses.length,getData:function(a,c){var d,f;return d=e("filter")(b.businesses,b.filter),f=c.sorting()?e("orderBy")(d,c.orderBy()):d,a.resolve(f.slice((c.page()-1)*c.count(),c.page()*c.count()))}}),b.checkAll=function(a){var c,d,e,f,g;for(f=b.businesses,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.followingNotification!==a?(c.followingNotification=a,b.setNotification(c)):void 0);return g},b.setNotification=function(a){return f.setNotification(a.id,a.followingNotification)},b.stopFollow=function(a){return f.addFollow(!1,a.id,function(){var c;for(c in b.businesses)b.businesses[c]===a&&b.businesses.splice(c,1);return b.tableParams.reload()})}},function(){return b.loading=!1,b.displayError=!0}),$(window).scrollTop(0),a.$broadcast("PROGRESS_BAR_STOP")}]),myApp.controller("MapCtrl",["$scope","$rootScope","mapService","customerInterestService","$compile","$timeout","geolocationService","$location",function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n;return a.mapDataBusinesses=null,a.map=null,a.interests=null,a.markers=[],a.currentMarker=null,a.listDisplayedBusiness=[],a.displayList=!0,a.initialPos={lat:50.8471417,lng:4.3528959,force:!1,zoom:12},a.$watch(function(){return g.position},function(b){return null!=b&&a.initialPos.force===!1?a.centerToPosition():void 0}),a.centerToPosition=function(){return null!=g.position&&null!=a.map&&a.initialPos.force===!1?(a.map.setCenter({lat:g.position.x,lng:g.position.y}),a.map.setZoom(15),google.maps.event.trigger(a.map,"resize"),null==a.currentMarker&&(a.currentMarker=new google.maps.Marker({})),a.currentMarker.setPosition(new google.maps.LatLng(g.position.x,g.position.y)),a.currentMarker.setTitle("Ma position"),a.currentMarker.setMap(a.map)):void 0},a.height=$(window).height()-140,window.addEventListener("resize",function(){return a.height=$(window).height()-140}),a.infowindow=new google.maps.InfoWindow({content:'<div class="info-window-inject"></div>'}),a.windowParam={},a.filters={open:!1,following:!1},l=function(b){var c,d,e,f;for(f=a.markers,d=0,e=f.length;e>d;d++)if(c=f[d],c.id===b.id)return c;return null},j=function(b){var c,d,e,f;for(f=a.mapDataBusinesses,d=0,e=f.length;e>d;d++)if(c=f[d],c.id===b)return c;return null},a.$watch("filters",function(){return a.computeFilters()},!0),a.$watch("interests",function(){return a.computeFilters()},!0),a.computeFilters=function(){var b,c,d,e,f,g;if(null!=a.mapDataBusinesses){for(g=a.mapDataBusinesses,e=0,f=g.length;f>e;e++)b=g[e],d=!0,c=l(b),a.filters.open&&null==b.attendance?d=!1:a.filters.following&&!b.following?d=!1:m(b)||(d=!1),b.visible=d,d?null==c.getMap()&&c.setMap(a.map):null!=c.getMap()&&c.setMap(null);return a.computeList()}},m=function(b){var c,d,e,f,g,h,i,j,k;for(e=l(b),j=a.interests,f=0,h=j.length;h>f;f++)if(c=j[f],"empty"===c.name){if(null==b.interests||0===b.interests.length)return c.selected===!0?!0:!1}else for(k=b.interests,g=0,i=k.length;i>g;g++)if(d=k[g],c.name===d.name&&c.selected===!0)return!0;return!1},a.selectAllInterest=function(b){var c,d,e,f,g;for(f=a.interests,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.selected=b);return g},a.generateMapMarkers=function(){var b,c,d;if(null!=a.map&&null!=a.mapDataBusinesses)for(b in a.mapDataBusinesses)c=a.mapDataBusinesses[b],d=new google.maps.Marker({}),d.id=c.id,d.setPosition(new google.maps.LatLng(c.posx,c.posy)),d.setTitle(c.name),d.setIcon(k(c)),d.setMap(a.map),a.markers.push(d),c.visible=!0,i(d,c);return a.computeList()},k=function(a){var b;return b="/assets/images/google-map-marker/marker_",a.following&&(b+="bell_"),b+=a.isOpen?"green_light.png":"black.png"},a.refreshMarkerIcon=function(a){var b;return b=l(a),b.setIcon(k(a))},i=function(b,c){return b.addListener("click",function(){return null!=a.infowindow&&a.infowindow.close(),a.windowParam=c,null==a.directive&&(a.directive=e('<business-for-map-ctrl ng-info="{business:windowParam,followingCallback:refreshMarkerIcon}"/></business-for-map-ctrl>')(a),f(function(){return $(".info-window-inject").append(a.directive)},1)),a.infowindow.open(a.map,b)})},a.startAnimation=function(b,c){var d,e,g,h,i;if(c){for(h=a.markers,i=[],e=0,g=h.length;g>e;e++)d=h[e],i.push(d.id===b.id?d.setAnimation(google.maps.Animation.BOUNCE):void 0);return i}return f(function(){var c,d,e,f,g;for(f=a.markers,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.id===b.id?c.setAnimation(null):void 0);return g},1e3)},c.loadMapDataBusiness(function(b){return a.mapDataBusinesses=b,a.generateMapMarkers()}),d.getAll(function(b){var c,d,e,f,g;for(a.interests=angular.copy(b),a.interests.push({name:"empty",translationName:"Sans intérêt particulier"}),f=a.interests,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.selected=!0);return g}),$(window).scrollTop(0),b.$broadcast("PROGRESS_BAR_STOP"),n=h.search(),h.search().hasOwnProperty("x")&&h.search().hasOwnProperty("y")&&(a.initialPos.lat=parseFloat(n.x),a.initialPos.lng=parseFloat(n.y),a.initialPos.force=!0,a.initialPos.zoom=16),f(function(){var b;return console.log(a.initialPos),a.map=new google.maps.Map(document.getElementById("map"),{center:{lat:a.initialPos.lat,lng:a.initialPos.lng},zoom:a.initialPos.zoom,mapTypeControl:!1,streetViewControl:!1}),a.map.addListener("center_changed",function(){return a.lastMove=(new Date).getTime(),null!=a.promise&&f.cancel(a.promise),a.promise=f(function(){return a.computeList()},500)}),a.computeList=function(){var b,c,d,e,f;for(a.listDisplayedBusiness=[],e=a.markers,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(j(b.id).visible&&null!=a.map.getBounds()&&a.map.getBounds().contains(b.getPosition())?a.listDisplayedBusiness.push(j(b.id)):void 0);return f},b=[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}],a.map.setOptions({styles:b}),a.generateMapMarkers(),a.centerToPosition()},1)}]),myApp.controller("WelcomeCtrl",["$rootScope","$scope","publicationService","$location","businessService","constantService","customerInterestService","searchService","$timeout","accountService",function(a,b,c,d,e,f,g,h,i,j){return b.LAST_BUSINESS_NB=5,b.MAX_PUBLICATION=4,b.descriptionLimitBase=120,b.publicationListCtrl={data:[]},b.lastChange=null,b.myself=j.getMyself(),b.maps=[{name:"Chaussée de Wavre",src:"/assets/images/map/1160.png",position:{x:50.81506,y:4.425933}},{name:"Rue des Tongres",src:"/assets/images/map/tongres.png",position:{x:50.840479,y:4.401033}},{name:"Place Flagey",src:"/assets/images/map/flagey.png",position:{x:50.827821,y:4.372452}}],b.openMap=function(a){return console.log(a),b.goTo("/map",a.position)},b.getInterestClass=function(a){return"gling-icon-"+a.name},b.navigateTo=function(a){return d.path("/business/"+a.businessId+"/publication/"+a.id)},b.goTo=function(a,b){return d.path(a).search(b)},b.getBackgroundClass=function(a){return null!=a.pictures[0]&&a.pictures[0].width/a.pictures[0].height>1?"picture-horizontal":"picture-vertical"},b.$on("POSITION_CHANGED",function(){return b.loadBusiness()}),b.loadBusiness=function(){return e.loadLastBusiness(b.LAST_BUSINESS_NB,function(a){var c,d,e,f,g;for(b.businesses=a,f=b.businesses,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.descriptionLimit=b.descriptionLimitBase);return g})},h.lastOnes(b.MAX_PUBLICATION,function(a){return b.publicationListCtrl.loading=!1,b.publicationListCtrl.data=a}),i(function(){return FB.XFBML.parse()},1),$(window).scrollTop(0),a.$broadcast("PROGRESS_BAR_STOP"),b.loadBusiness()}]),myApp.directive("publicationListCtrl",["$rootScope","businessService","geolocationService","directiveService","searchService","$location","modalService",function(a,b,c,d,e,f,g){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/publicationList/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){return d.autoScopeImpl(a),a.getInfo().loading=!0,a.changeInterestCallback=function(b,c){var d,e,f,g,h;for(g=a.publications,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(d.businessId===b?d.following=c:void 0);return h},a.$watch("getInfo().data",function(b){var c,d,e,f,g;if(null!=b){for(a.publications=b,f=a.publications,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.interval=c.endDate-new Date);return g}})}}}}}]),myApp.directive("publicationWidgetCtrl",["$rootScope","businessService","geolocationService","directiveService","searchService","$location","modalService",function(a,b,c,d,e,f,g){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/publicationWidget/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){var b;return d.autoScopeImpl(a),a.descriptionLimit=200,a.descriptionLimitBase=a.descriptionLimit,a.navigateTo=function(a){return f.path(a)},a.getInterestClass=function(a){return null!=a.interest?"gling-icon-"+a.interest.name:null},b=function(a){return void 0===a||null===a||""===a},a.descriptionIsEmpty=function(a){return"PROMOTION"!==a.type&&b(a.description)},a.openGallery=function(a,b){return g.galleryModal(a,b.pictures)},a.getIllustrationClass=function(a){return void 0!==a&&a.height>a.width?"publication-illustration-high":"publication-illustration"},a.$watch("getInfo().publication.following",function(b,c){return b!==c&&null!=a.getInfo().changeInterestCallback?a.getInfo().changeInterestCallback(a.getInfo().publication.businessId,b):void 0})}}}}}]),myApp.directive("publicationListForBusinessCtrl",["$rootScope","directiveService","searchService","$timeout","publicationService","modalService",function(a,b,c,d,e,f){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/publicationListForBusiness/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(g){var h;return b.autoScopeImpl(g),g.descriptionLimitBase=250,g.currentPage=0,g.allLoaded=!1,g.loadSemaphore=!1,g.publications=[],g.loading=!1,g.isArchived=function(a){return a.endDate<(new Date).getTime()},g.success=function(a){var b,c,e,f,h,i,j;for(0===g.currentPage&&(g.publications=[]),0===a.length&&(g.allLoaded=!0),g.loadSemaphore=!1,e=0,h=a.length;h>e;e++)b=a[e],g.publications.push(b);for(j=g.publications,f=0,i=j.length;i>f;f++)c=j[f],c.descriptionLimit=g.descriptionLimitBase,c.interval=(c.endDate-new Date)/1e3;return null!=g.getInfo().scrollTo&&d(function(){var a;return a="#publication"+g.getInfo().scrollTo,$(window).scrollTop($(a).offset().top-70),g.getInfo().scrollTo=null,g.$apply()},1),g.loading=!1},$(window).on("scroll",function(){var a;return a=$(window).scrollTop()+$(window).height(),$(".container-content").height()-a<200&&g.loadSemaphore===!1?(g.loadSemaphore=!0,g.currentPage=g.currentPage+1,console.log("-- from scrolling"),g.search()):void 0}),g.getInfo().refresh=function(a){return g.currentPage=0,g.publications=[],g.type!==a?g.type=a:(g.allLoaded=!1,console.log("-- from refresh"),g.search())},g.search=function(){return g.allLoaded!==!0?(g.loading=!0,null!=g.type&&void 0!==g.type&&"ARCHIVE"===g.type?c.byBusinessArchived(g.currentPage,g.getInfo().businessId,g.success):null!=g.type&&void 0!==g.type&&"PREVISUALIZATION"===g.type?c.byBusinessPrevisualization(g.currentPage,g.getInfo().businessId,g.success):c.byBusiness(g.currentPage,g.getInfo().businessId,g.success)):void 0},g.$watch("type",function(a,b){return a!==b?(g.allLoaded=!1,g.search()):void 0}),console.log("-- SERACH FROM initialization"),g.search(),g.removePublication=function(b){return f.messageModal("--.business.publication.remove.confirmationModal.title","--.business.publication.remove.confirmationModal.body",function(c){return e["delete"](b,function(){return a.$broadcast("RELOAD_PUBLICATION"),c()})})},g.editPublication=function(b){return"PROMOTION"===b.type?f.openPromotionModal(b,g.getInfo().business,function(){return a.$broadcast("RELOAD_PUBLICATION")}):f.openBusinessNotificationModal(b,g.getInfo().business,function(){return a.$broadcast("RELOAD_PUBLICATION")})},g.getInterestClass=function(a){return null!=a.interest?"gling-icon-"+a.interest.name:null},h=function(a){return!(null!=a)||""===a},g.descriptionIsEmpty=function(a){return"PROMOTION"!==a.type&&h(a.description)},g.openGallery=function(a,b){return f.galleryModal(a,b.pictures)},g.getIllustrationClass=function(a){return void 0!==a&&a.height>a.width?"publication-illustration-high":"publication-illustration"}}}}}}]),myApp.directive("businessListCtrl",["$rootScope","businessService","geolocationService","directiveService","searchService","$location",function(a,b,c,d,e,f){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/businessList/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){return d.autoScopeImpl(a),console.log("et merde encore 2"),a.descriptionLimitBase=200,a.descriptionLimit=a.descriptionLimitBase,a.getInfo().loading=!0,a.navigateTo=function(a){return f.path(a)},a.$watch("getInfo().data",function(b){return null!=b?a.businesses=b:void 0})}}}}}]),myApp.directive("categoryLineCtrl",["$rootScope","directiveService","$location",function(a,b,c){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/categoryLine/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){return b.autoScopeImpl(a),a.searchCat=function(a){return c.path("/search/category:"+a)}}}}}}]),myApp.directive("businessForMapCtrl",["$rootScope","businessService","geolocationService","directiveService","$location",function(a,b,c,d,e){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/map/businessForMap/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){d.autoScopeImpl(a),a.$watch("getInfo().business.following",function(b,c){return null!=b&&null!=c&&b!==c?a.getInfo().followingCallback(a.getInfo().business):void 0}),a.goTo=function(a){return e.path(a)}}}}}}]),myApp.directive("publicationForMapCtrl",["$rootScope","businessService","geolocationService","directiveService","$timeout",function(a,b,c,d,e){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/map/publicationForMap/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){d.autoScopeImpl(a)}}}}}]),myApp.directive("headerBarCtrl",["addressService","$rootScope","languageService","$location","accountService","facebookService","modalService","$timeout","geolocationService","addressService",function(a,b,c,d,e,f,g,h,i,a){return{restrict:"E",scope:{},templateUrl:"/assets/js/directive/web/headerBar/template.html",replace:!0,compile:function(){return{post:function(f){var j;return f.currentLang=c.currentLang,f.languageService=c,f.myself=e.getMyself(),f.accountService=e,f.testPath=function(a){return d.path().indexOf(a)>-1},f.goTo=function(a){return d.path(a)},f.goToHome=function(){return $(window).scrollTop(0),f.navigateTo("/shopnews")},f.navigateTo=function(a){return d.path(a)},f.login=function(){return g.openLoginModal()},f.registration=function(){return g.openCustomerRegistrationModal()},f.editProfile=function(){return g.openEditProfileModal()},f.logout=function(){return b.$broadcast("LOGOUT"),e.logout(function(){return d.path("/")})},f.$watch("lang",function(){return angular.isUndefined(f.lang)?void 0:c.changeLanguage(f.lang)}),f.currentPosition=null,f.suspendWatching=!1,f.positionBasicData=[{key:"currentPosition",translation:"--.position.current"},{key:"createNewAddress",translation:"--.position.newAddress"}],b.$on("CHANGE_ADDRESS_SELECTED",function(){return null==e.getMyself().selectedAddress&&(null==i.position?f.currentPosition="default":f.currentPosition="currentPosition"),f.currentPosition=e.getMyself().selectedAddress.name}),h(function(){return j(),f.$watch("currentPosition",function(c,d){return console.log(c+"/"+d+"=>"+f.suspendWatching),null!=c&&d!==c&&f.suspendWatching!==!0?(f.suspendWatching=!0,"createNewAddress"===f.currentPosition?(f.currentPosition=d,null!=e.getMyself()?g.addressModal(!0,null,!1,function(a){return h(function(){return f.currentPosition=a.name},1)}):g.openLoginModal(f.createNewAddress,angular.copy(d),"--.loginModal.help.address")):"currentPosition"===f.currentPosition&&null==i.position?(f.currentPosition=d,g.messageModal("--.message.modal.notLocalised.title","--.message.modal.notLocalised.content")):f.currentPosition!==f.positionCurrenltyComputed&&(f.positionCurrenltyComputed=f.currentPosition,a.changeAddress(f.currentPosition,function(a){return null!=e.getMyself()&&(-1===a.__type.indexOf("AddressDTO")?e.getMyself().selectedAddress=null:e.getMyself().selectedAddress=a),h(function(){return b.$broadcast("POSITION_CHANGED")},1)})),h(function(){return f.suspendWatching=!1},1)):void 0}),b.$watch(function(){return e.model.myself},function(){return j()})},1),b.$on("POSITION_CHANGED",function(){return j()}),j=function(){var a;if(f.positions=angular.copy(f.positionBasicData),null==i.position?f.positions.splice(0,0,{key:"default",translation:"--.position.brussel"}):"default"===f.currentPosition&&(f.currentPosition="currentPosition"),null!=e.getMyself())for(a in e.getMyself().addresses)f.positions.splice(f.positions.length-1,0,{key:e.getMyself().addresses[a].name,translation:e.getMyself().addresses[a].name});return f.currentPosition=i.getLocationText()},b.$watch(function(){return e.model.myself},function(){return j()},!0)}}}}}]),myApp.directive("footerBarCtrl",["modalService","contactService","$flash","$filter",function(a,b,c,d){return{restrict:"E",scope:{},templateUrl:"/assets/js/directive/web/footerBar/template.html",replace:!0,compile:function(){return{post:function(e){e.openContactForm=function(e){var f={target:e};a.basicModal("--.contactForm.modal.title","contact-form-ctrl",{dto:f},function(a){b.contact(f,function(){c.success(d("translateText")("--.contactForm.send.success")),a()})})}}}}}}]),myApp.directive("toTopCtrl",["$window",function(a){return{restrict:"E",
scope:{},templateUrl:"/assets/js/directive/component/toTop/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(b){return b.toTop=function(){return $(window).scrollTop(0)},b.displayToTopButton=$(window).scrollTop()>100,angular.element(a).bind("scroll",function(){return b.displayToTopButton=$(window).scrollTop()>100,b.$apply()})}}}}}]),myApp.service("$flash",["$filter",function(a){Messenger.options={extraClasses:"messenger-fixed messenger-on-bottom messenger-on-right cr-messenger",theme:"block"},this.success=function(a){print(a,"success")},this.info=function(a){print(a,"info")},this.error=function(a){print(a,"error")},this.warning=function(a){print(a,"warning")},print=function(a,b){if(!angular.isUndefined(a)&&null!==a)for(var c in a.split("\n")){var d=a.split("\n")[c];Messenger().post({message:d,type:b,showCloseButton:!0})}}}]);
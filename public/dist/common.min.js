myApp.directive("dirEnter",function(){return function(a,b,c){return b.bind("keydown keypress",function(b){return 13===b.which?(a.$apply(function(){return a.$eval(c.dirEnter)}),b.preventDefault()):void 0})}}),myApp.directive("dirFieldDate",["directiveService","$filter","generateId",function(a,b,c){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/field/dirFieldDate/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(b){return a.autoScopeImpl(b),b.id=c.generate(),b.idHtag="#"+b.id},post:function(c){a.autoScopeImpl(c),c.result=null,null!=c.getInfo().field[c.getInfo().fieldName]&&(c.result=new Date(Number(c.getInfo().field[c.getInfo().fieldName])),"day"==c.getInfo().minimalDelay?c.resultFormated=b("date")(c.result,"yyyy-MM-dd"):c.resultFormated=b("date")(c.result,"yyyy-MM-dd HH:mm")),c.$watch("result",function(a,d){a!=d&&(null!=c.result?c.getInfo().field[c.getInfo().fieldName]=c.result.getTime():c.getInfo().field[c.getInfo().fieldName]=null,c.isValid(),"day"==c.getInfo().minimalDelay?c.resultFormated=b("date")(c.result,"yyyy-MM-dd"):c.resultFormated=b("date")(c.result,"yyyy-MM-dd HH:mm"))}),c.isActive=function(){return!(null!=c.getInfo().active&&void 0!=c.getInfo().active&&0==c.getInfo().active())},c.$watch("getInfo().field[getInfo().fieldName]",function(a,b){if(a!=b){if(null!=c.getInfo().field[c.getInfo().fieldName])return c.result=new Date(Number(c.getInfo().field[c.getInfo().fieldName]));c.isValid()}}),c.isValid=function(){var a;return c.getInfo().disabled===!0||c.isActive()===!1?void(c.getInfo().isValid=!0):(a=!0,null==c.getInfo().field[c.getInfo().fieldName]&&(a=!1),null!=c.getInfo().validationFct&&(a=a&&c.getInfo().validationFct()),void(c.getInfo().isValid=a))},c.isValid(),c.logField=function(){return console.log(c.getInfo())},c.displayError=function(){return 0==c.getInfo().isValid&&c.getInfo().firstAttempt===!1?!0:!1}}}}}}]),myApp.directive("dirFieldDateSimple",["directiveService","$filter","generateId","$filter",function(a,b,c,b){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/field/dirFieldDateSimple/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(b){return a.autoScopeImpl(b),b.id=c.generate(),b.idHtag="#"+b.id},post:function(b){a.autoScopeImpl(b),b.result=null,b.hours=[],b.days=[],b.day=null,b.hour=null,b.$watch("getInfo().startDate",function(){b.compileDate()}),b.compileDate=function(){if(b.days=[],b.hours=[],null!=b.getInfo().startDate&&void 0!=b.getInfo().startDate){for(var a=0;23>=a;a++)b.hours.push({value:a,key:a+":00"});for(var a=0;a<b.getInfo().maxDay;a++){var c=new Date(b.getTime(b.getInfo().startDate)+24*a*60*60*1e3);c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);var d=c.getDate(),e=(c.getMonth()+1,c.getTime());b.days.push(e)}if(b.days.length>0&&((b.day<b.days[0]||b.day>b.days[b.days.length-1])&&(b.day=null),null==b.day))if(null!=b.getInfo().field[b.getInfo().fieldName]){var c=b.getDate(b.getInfo().field[b.getInfo().fieldName]);c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);var f=c.getHours();c.setHours(0);var d=c.getTime();b.day=d,b.hour=f}else"lastDay"==b.getInfo().defaultSelection?b.day=b.days[b.days.length-1]:b.day=b.days[0],null==b.hour&&(b.hour=(new Date).getHours())}},b.$watch("day",function(){b.compileValue()}),b.$watch("hour",function(){b.compileValue()}),b.compileValue=function(){var a=b.day;a+=60*b.hour*60*1e3,b.getInfo().field[b.getInfo().fieldName]=new Date(a),b.isValid()},b.isActive=function(){return!(null!=b.getInfo().active&&void 0!=b.getInfo().active&&0==b.getInfo().active())},b.isValid=function(){var a;return b.getInfo().disabled===!0||b.isActive()===!1?void(b.getInfo().isValid=!0):(a=!0,null==b.getInfo().field[b.getInfo().fieldName]&&(a=!1),null!=b.getInfo().validationFct&&(a=a&&b.getInfo().validationFct()),void(b.getInfo().isValid=a))},b.getTime=function(a){return a instanceof Date?a.getTime():a},b.getDate=function(a){return a instanceof Date?a:new Date(a)}}}}}}]),myApp.directive("dirFieldSelect",["directiveService","$timeout","modalService",function(a,b,c){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/field/dirFieldSelect/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(b){return a.autoScopeImpl(b)},post:function(c){a.autoScopeImpl(c),void 0==c.getInfo().autoCompleteValue&&(c.getInfo().autoCompleteValue=[]),c.isActive=function(){return!(null!=c.getInfo().active&&void 0!=c.getInfo().active&&0==c.getInfo().active())},c.errorMessage="",c.hideIsValidIcon=!!c.getInfo().hideIsValidIcon,c.fieldType=null!=c.getInfo().fieldType?c.getInfo().fieldType:"text",c.isValid=function(){var a;return c.getInfo().disabled===!0||c.isActive()===!1?void(c.getInfo().isValid=!0):(a=void 0!=c.getInfo().optional&&c.getInfo().optional()===!0||null!=c.getInfo().field[c.getInfo().fieldName],void(c.getInfo().isValid=a))},c.isValid(),c.$watch("getInfo().options",function(a,b){return c.computeResult(),c.isValid()}),c.$watch("getInfo().field[getInfo().fieldName]",function(a,b){return a!=b&&c.computeResult(),c.isValid()}),c.computeResult=function(){if(void 0!=c.getInfo().comparableFct&&null!=c.getInfo().field[c.getInfo().fieldName])for(var a in c.getInfo().options)c.getInfo().comparableFct(c.getInfo().options[a].key,c.getInfo().field[c.getInfo().fieldName])&&(c.getInfo().field[c.getInfo().fieldName]=c.getInfo().options[a].key)},c.logField=function(){return console.log(c.getInfo())},c.setErrorMessage=function(a){return c.errorMessage=a,null!=c.lastTimeOut&&b.cancel(c.lastTimeOut),c.lastTimeOut=b(function(){return c.errorMessage="",c.lastTimeOut=null},2e3)},c.displayError=function(){return 0==c.getInfo().isValid&&c.getInfo().firstAttempt===!1?!0:!1}}}}}}]),myApp.directive("dirFieldText",["directiveService","$timeout","modalService",function(a,b,c){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/field/dirFieldText/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(b){return a.autoScopeImpl(b)},post:function(d){a.autoScopeImpl(d),void 0==d.getInfo().autoCompleteValue&&(d.getInfo().autoCompleteValue=[]),d.isActive=function(){return!(null!=d.getInfo().active&&void 0!=d.getInfo().active&&0==d.getInfo().active())},d.errorMessage="",d.isValidationDefined=null!=d.getInfo().validationRegex||null!=d.getInfo().validationFct,d.hideIsValidIcon=!!d.getInfo().hideIsValidIcon,d.fieldType=null!=d.getInfo().fieldType?d.getInfo().fieldType:"text",null==d.getInfo().field[d.getInfo().fieldName]&&(d.getInfo().field[d.getInfo().fieldName]=""),null==d.getInfo().isValid&&(d.getInfo().isValid=!d.isValidationDefined),d.isValidationDefined&&d.$watch("getInfo().field[getInfo().fieldName]",function(a,b){return d.isValid()}),d.$watch("getInfo().active()",function(a,b){a!=b&&d.isValid()},!0),d.isValid=function(){var a;return d.getInfo().disabled===!0||d.isActive()===!1?void(d.getInfo().isValid=!0):(null==d.getInfo().field[d.getInfo().fieldName]&&(d.getInfo().field[d.getInfo().fieldName]=""),a=!0,"string"!=typeof d.getInfo().field[d.getInfo().fieldName]&&(d.getInfo().field[d.getInfo().fieldName]+=""),null!=d.getInfo().validationRegex&&(a=null!=d.getInfo().field[d.getInfo().fieldName].match(d.getInfo().validationRegex)),null!=d.getInfo().validationFct&&(a=a&&d.getInfo().validationFct()),void(d.getInfo().isValid=a))},d.isValid(),d.logField=function(){return console.log(d.getInfo())},d.setErrorMessage=function(a){return d.errorMessage=a,null!=d.lastTimeOut&&b.cancel(d.lastTimeOut),d.lastTimeOut=b(function(){return d.errorMessage="",d.lastTimeOut=null},2e3)},d.displayError=function(){return 0==d.getInfo().isValid&&d.getInfo().firstAttempt===!1?!0:!1},d.openCalculator=function(){c.openCalculatorModal(new function(a){d.getInfo().field[d.getInfo().fieldName]=a})}}}}}}]),myApp.directive("dirFieldTextArea",["directiveService","$timeout","modalService","$timeout",function(a,b,c,b){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/field/dirFieldTextArea/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(b){return a.autoScopeImpl(b)},post:function(d){a.autoScopeImpl(d),void 0==d.getInfo().autoCompleteValue&&(d.getInfo().autoCompleteValue=[]),d.isActive=function(){return!(null!=d.getInfo().active&&void 0!=d.getInfo().active&&0==d.getInfo().active())},d.errorMessage="",d.isValidationDefined=null!=d.getInfo().validationRegex||null!=d.getInfo().validationFct,d.hideIsValidIcon=!!d.getInfo().hideIsValidIcon,d.fieldType=null!=d.getInfo().fieldType?d.getInfo().fieldType:"text",null==d.getInfo().field[d.getInfo().fieldName]&&(d.getInfo().field[d.getInfo().fieldName]=""),null==d.getInfo().isValid&&(d.getInfo().isValid=!d.isValidationDefined),d.isValidationDefined&&d.$watch("getInfo().field[getInfo().fieldName]",function(a,b){return d.isValid()}),d.$watch("getInfo().active()",function(a,b){a!=b&&d.isValid()},!0),d.isValid=function(){var a;return d.getInfo().disabled===!0||d.isActive()===!1?void(d.getInfo().isValid=!0):(null==d.getInfo().field[d.getInfo().fieldName]&&(d.getInfo().field[d.getInfo().fieldName]=""),a=!0,"string"!=typeof d.getInfo().field[d.getInfo().fieldName]&&(d.getInfo().field[d.getInfo().fieldName]+=""),null!=d.getInfo().validationRegex&&(a=null!=d.getInfo().field[d.getInfo().fieldName].match(d.getInfo().validationRegex)),null!=d.getInfo().validationFct&&(a=a&&d.getInfo().validationFct()),void(d.getInfo().isValid=a))},d.isValid(),d.logField=function(){return console.log(d.getInfo())},d.setErrorMessage=function(a){return d.errorMessage=a,null!=d.lastTimeOut&&b.cancel(d.lastTimeOut),d.lastTimeOut=b(function(){return d.errorMessage="",d.lastTimeOut=null},2e3)},d.displayError=function(){return 0==d.getInfo().isValid&&d.getInfo().firstAttempt===!1?!0:!1},d.openCalculator=function(){c.openCalculatorModal(new function(a){d.getInfo().field[d.getInfo().fieldName]=a})}}}}}}]),myApp.directive("dirFocusMe",function(){return{restrict:"A",scope:{dirFocusMe:"="},link:function(a,b,c){a.$watch("dirFocusMe",function(){return a.dirFocusMe===!0?b[0].focus():void 0})}}}),myApp.directive("numbersOnly",["$filter","translationService","$locale",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(b,d,e,f){return b.$watch(e.numbersOnly,function(){var d,g,h,i,j,k,l;return"integer"!==e.numbersOnly&&"double"!==e.numbersOnly&&"percent"!==e.numbersOnly||(b.lastValidValue=0,"integer"===e.numbersOnly?(i=a("translateText")("--.generic.numberOnly"),k=0):(i=a("translateText")("--.generic.numberOnly"),k=2),b.$root.$on("$localeChangeSuccess",function(a,b,c){var d;return null!=f.$modelValue&&(d=g(parseFloat(f.$modelValue)),null!=d)?(f.$setViewValue(d.toString()),f.$render()):void 0}),f.$parsers.unshift(function(a){var c,g,i;return""===a?null:(c=d(a),isNaN(c)?(h(),b.lastValidValue?(g=b.lastValidValue.toString(),i="percent"===e.numbersOnly?(100*b.lastValidValue).toString():b.lastValidValue.toString()):(g="",i=""),f.$setViewValue(i),f.$render()):("percent"===e.numbersOnly&&(c/=100),b.lastValidValue=c,g=c.toString()),""===g?null:g)}),f.$formatters.unshift(function(a){return b.displayValue(a)}),b.displayValue=function(a){var b;return b=parseFloat(a),"percent"===e.numbersOnly&&(b=100*b),g(b)},h=function(){return null!=b.setErrorMessage?b.setErrorMessage(i):void 0},g=function(a){var b,d;return null==a||isNaN(a)?"":(a=a.toFixed(k),b=c.NUMBER_FORMATS,d=a.toString().replace(new RegExp("\\.","g"),b.DECIMAL_SEP))},d=function(a){var b,d,e;return""===a?NaN:(d=c.NUMBER_FORMATS,b=d.DECIMAL_SEP,"."===b&&(b="\\."),e=a.replace(new RegExp(b,"g"),"."),j(e))},j=function(a){var b;return a.isNaN?NaN:(b="integer"===e.numbersOnly?new RegExp("^(\\-|\\+)?([0-9]+|Infinity)?$"):new RegExp("^(\\-|\\+)?([0-9]+(\\.[0-9]*)?|Infinity)?$"),b.test(a)?Number(a):NaN)},null==f.$modelValue)?void 0:(b.lastValidValue=parseFloat(f.$modelValue),l=b.displayValue(b.lastValidValue),f.$setViewValue(l),f.$render())})}}}]),myApp.directive("dirFieldCheck",["directiveService","$timeout",function(a,b){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/field/dirFieldCheck/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(b){return a.autoScopeImpl(b)},post:function(c){a.autoScopeImpl(c),c.errorMessage="",c.hideIsValidIcon=!!c.getInfo().hideIsValidIcon,null==c.getInfo().field[c.getInfo().fieldName]&&(c.getInfo().field[c.getInfo().fieldName]=""),c.isActive=function(){return!(null!=c.getInfo().active&&void 0!=c.getInfo().active&&0==c.getInfo().active())},c.isValid=function(){void 0!=c.getInfo().valid?c.getInfo().isValid=c.getInfo().valid():c.getInfo().isValid=!0},c.isValid(),c.$watch("getInfo().field[getInfo().fieldName]",function(a,b){return c.isValid()}),c.logField=function(){return console.log(c.getInfo())},c.setErrorMessage=function(a){return c.errorMessage=a,null!=c.lastTimeOut&&b.cancel(c.lastTimeOut),c.lastTimeOut=b(function(){return c.errorMessage="",c.lastTimeOut=null},2e3)},c.displayError=function(){return 0==c.getInfo().isValid&&c.getInfo().firstAttempt===!1?!0:!1}}}}}}]),myApp.directive("dirFieldDocument",["directiveService","$upload","$flash","$filter","generateId","$window",function(a,b,c,d,e,f){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/field/dirFieldDocument/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(d){a.autoScopeImpl(d),console.log("getInfo()"),console.log(d.getInfo()),d.id=e.generate(),d.errorMessage="",d.isActive=function(){return!(null!=d.getInfo().active&&void 0!=d.getInfo().active&&0==d.getInfo().active())},d.isValid=function(){d.getInfo().isValid=null!=d.getInfo().optional&&d.getInfo().optional()||0==d.isActive()||null!=d.getInfo().field[d.getInfo().fieldName]},d.isValid(),d.displayError=function(){return 0==d.getInfo().isValid&&d.getInfo().firstAttempt===!1?!0:!1},d.inDownload=!1,d.percent=0,d.$watch("percent",function(){var a;return d.style={width:d.percent+"%",color:null!=(a=d.percent>50)?a:{white:"black"}}}),d.success=!1,d.onFileSelect=function(a){var e,f;for(d.inDownload=!0,f=0;f<a.length;){e=a[f];var g="/rest/file/"+d.getInfo().target;console.log("-- scope.getInfo()"),console.log(d.getInfo()),console.log("-- url:"+g),d.upload=b.upload({url:g,data:{myObj:d.myModelObj},file:e}).progress(function(a){d.percent=parseInt(100*a.loaded/a.total)}).success(function(a,b){d.success=!0,d.percent=100,d.getInfo().field[d.getInfo().fieldName]=a,d.inDownload=!1}).error(function(a,b){d.percent=0,d.inDownload=!1,c.error(a.message)}),f++}},d.$watch("getInfo().field[getInfo().fieldName]",function(a,b){d.isValid()})}}}}}]),myApp.directive("dirFieldImageMutiple",["directiveService","$upload","$flash","$filter","generateId","$window",function(a,b,c,d,e,f){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/field/dirFieldImageMutiple/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(d){a.autoScopeImpl(d),d.id=e.generate(),d.errorMessage="",d.inDownload=!1,d.isActive=function(){return!(null!=d.getInfo().active&&void 0!=d.getInfo().active&&0==d.getInfo().active())},null==d.getInfo().field[d.getInfo().fieldName]&&(d.getInfo().field[d.getInfo().fieldName]=[]),d.$watch("inDownload",function(){d.isValid()}),d.isValid=function(){null!=d.getInfo().optional&&d.getInfo().optional()||0==d.isActive()||1!=d.inDownload?d.getInfo().isValid=!0:d.getInfo().isValid=d.getInfo().field[d.getInfo().fieldName].length>0&&1!=d.inDownload},d.isValid(),d.displayError=function(){return 0==d.getInfo().isValid&&d.getInfo().firstAttempt===!1?!0:!1},d.remove=function(a){for(var b in d.images)d.images[b]==a&&d.images.splice(b,1)},d.success=!1,d.images=[];for(var f in d.getInfo().field[d.getInfo().fieldName])d.images.push({image:d.getInfo().field[d.getInfo().fieldName][f]});d.onFileSelect=function(a){var e,f,g={};for(d.inDownload=!0,f=0;f<a.length;){e=a[f];var h="/rest/file/"+d.getInfo().target;d.unique!==!0&&d.images.push(g),d.upload=b.upload({url:h,data:{myObj:d.myModelObj},file:e}).progress(function(a){g.percent=parseInt(100*a.loaded/a.total)}).success(function(a,b){d.success=!0,g.percent=100,g.image=a,d.inDownload=!1}).error(function(a,b){console.log("je suis un échec !! : "+a.message),console.log(a);for(var e in d.images)d.images[e]==g&&d.images.splice(e,1);g.percent=0,d.inDownload=!1,c.error(a.message)}),f++}},d.$watch("images",function(){d.getInfo().field[d.getInfo().fieldName]=[];for(var a in d.images)d.getInfo().field[d.getInfo().fieldName].push(d.images[a].image);d.isValid()},!0)}}}}}]),myApp.directive("dirFieldImageMultipleResizable",["$rootScope","directiveService","$upload","$flash","$filter","generateId","imageService","modalService","constantService",function(a,b,c,d,e,f,g,h,i){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/field/dirFieldImageMultipleResizable/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(c){b.autoScopeImpl(c),c.id=f.generate(),c.errorMessage="",c.images=[],c.isActive=function(){return!(null!=c.getInfo().active&&void 0!=c.getInfo().active&&0==c.getInfo().active())},null==c.getInfo().field[c.getInfo().fieldName]&&(c.getInfo().field[c.getInfo().fieldName]=[]),c.isValid=function(){null!=c.getInfo().optional&&c.getInfo().optional()||0==c.isActive()?c.getInfo().isValid=!0:c.getInfo().isValid=c.getInfo().field[c.getInfo().fieldName].length>0},c.isValid(),c.displayError=function(){return 0==c.getInfo().isValid&&c.getInfo().firstAttempt===!1?!0:!1},c.remove=function(a){for(var b in c.images)c.images[b]==a&&c.images.splice(b,1)},c.success=!1,c.resize=function(a){var b={image:angular.copy(a.originalImage),maxWidth:c.getInfo().maxWidth,maxHeight:c.getInfo().maxHeight};i.isMobile?h.resizeImageMobileModal(b,function(c){c(),a.image=b.result}):h.basicModal("--.field.imageMultipleResize.resizeModal.title","image-tool-ctrl",b,function(c){c(),a.image=b.result})},c.$watch("images",function(){c.getInfo().field[c.getInfo().fieldName]=[];for(var a in c.images)c.getInfo().field[c.getInfo().fieldName].push({originalName:c.images[a].originalName,image64:c.images[a].image,comment:c.images[a].comment});c.isValid()},!0),c.defaultResize=function(a){return g.resizeImage(a,c.getInfo().maxWidth,c.getInfo().maxHeight)},c.treatFile=function(a,b){var f=document.createElement("img");f.setAttribute("src",a);var g=f,h=!0;null!=c.getInfo().maxHeight&&c.getInfo().maxHeight>g.height&&(d.error(e("translateText")("--.field.imageMultipleResize.minimalHeight",[c.getInfo().maxHeight,g.height])),h=!1),null!=c.getInfo().maxWidth&&c.getInfo().maxWidth>g.width&&(d.error(e("translateText")("--.field.imageMultipleResize.minimalWidth",[c.getInfo().maxWidth,g.width])),h=!1),h&&(c.images.push({originalName:b,originalImage:a,comment:null,image:c.defaultResize(angular.copy(a))}),c.$apply())},c.fullSize=function(b){var d=[];for(var e in c.images)d.push(c.images[e].image);i.isMobile===!0?h.galleryModal(b,d):a.$broadcast("DISPLAY_PICTURE_IN_GALLERY",{list:d,first:b})},c.readURL=function(a){if(a.files&&a.files[0]){var b=new FileReader,d=a.files[0].name;b.onload=function(a){c.treatFile(a.target.result,d)},b.readAsDataURL(a.files[0])}},$("#a").change(function(){c.readURL(this)}),c.convertToNumber=function(a){return a=parseInt(a),isNaN(a)&&(a=null),a},c.$watch("getInfo().maxHeight",function(a,b){a!=b&&(c.getInfo().maxHeight=c.convertToNumber(c.getInfo().maxHeight))}),c.$watch("getInfo().maxWidth",function(a,b){a!=b&&(c.getInfo().maxWidth=c.convertToNumber(c.getInfo().maxWidth))}),c.getInfo().maxHeight=c.convertToNumber(c.getInfo().maxHeight),c.getInfo().maxWidth=c.convertToNumber(c.getInfo().maxWidth)}}}}}]),myApp.directive("compile",["$compile","$filter",function(a,b){return function(c,d,e){c.$watch(function(a){return a.$eval(e.compile)},function(e,f){e=b("translateText")(e),d.html(e),a(d.contents())(c)})}}]),myApp.directive("loginFormCtrl",["$flash","facebookService","translationService","directiveService","$timeout","accountService","$location","modalService",function(a,b,c,d,e,f,g,h){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/login/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(c){var e;return d.autoScopeImpl(c),c.facebookAppId=b.facebookAppId,c.facebookAuthorization=b.facebookAuthorization,c.basic_url=location.host,-1===c.basic_url.indexOf("http")&&(-1!==c.basic_url.indexOf("localhost")?c.basic_url="http://"+c.basic_url:c.basic_url="https://"+c.basic_url),null==c.getInfo().dto&&(c.getInfo().dto={}),c.fields={email:{fieldType:"email",name:"email",fieldTitle:"--.registration.form.yourEmail",validationRegex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,validationMessage:"--.generic.validation.email",disabled:function(){return c.getInfo().loading},field:c.getInfo().dto,fieldName:"email"},password:{name:"password",fieldTitle:"--.generic.yourPassword",validationRegex:"^[a-zA-Z0-9-_%]{6,18}$",validationMessage:"--.generic.validation.password",fieldType:"password",disabled:function(){return c.getInfo().loading},field:c.getInfo().dto,fieldName:"password"}},c.setLoading=function(a){return c.getInfo().mobileVersion?a===!0?h.openLoadingModal():h.closeLoadingModal():c.getInfo().loading=a},c.$watch("fields",function(){var a,b,d;d=!0;for(a in c.fields)b=c.fields[a],(null==b.isValid||b.isValid===!1)&&(b.firstAttempt=!c.getInfo().displayErrorMessage,d=!1);return c.getInfo().isValid=d},!0),c.$watch("getInfo().displayErrorMessage",function(){var a,b,d;d=[];for(a in c.fields)b=c.fields[a],d.push(b.firstAttempt=!c.getInfo().displayErrorMessage);return d}),c.facebookSuccess=function(a){return f.setMyself(a),"BUSINESS"===a.type?g.path("/business/"+f.getMyself().businessId):c.getInfo().mobileVersion&&g.path("/"),c.getInfo().facebookSuccess(a),c.setLoading(!1)},c.fb_login=function(){var d,e,f;return e=function(a){return c.facebookSuccess(a),c.setLoading(!1)},d=function(b){return a.error(b.message),c.setLoading(!1),c.$apply()},c.setLoading(!0),c.getInfo().mobileVersion?b.isConnected()?b.loginToServer(e,d):(f="https://www.facebook.com/dialog/oauth/?scope="+b.facebookAuthorization+"&client_id="+c.facebookAppId+"&redirect_uri="+c.basic_url+"/&state=BELGIUM&scope="+c.facebookAuthorization+"&response_type=token",window.open(f,"_self")):b.login(function(a){return e(a)},function(a){return d(a)})},c.getUrlParam=function(a,b){var c,d,e;return b||(b=location.href),a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),d="[\\?&]"+a+"=([^&#]*)",c=new RegExp(d),e=c.exec(b),null===e?null:e[1]},-1!==location.href.indexOf("access_token")&&(e=c.getUrlParam("access_token",location.href),null!=e)?(c.setLoading(!0),b.loginToServerSimple(e,function(a){return c.facebookSuccess(a)},function(a,b){return c.setLoading(!1),g.path("/customer_registration")})):void 0}}}}}]),myApp.directive("addressFormCtrl",["$flash","directiveService","$timeout","$filter","translationService","modalService",function(a,b,c,d,e,f){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/address/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a);var c=[{key:e.get("--.address.type.home"),value:"--.address.type.home"},{key:e.get("--.address.type.work"),value:"--.address.type.work"},{key:e.get("--.address.type.other"),value:"--.address.type.other"}];if(null==a.getInfo().dto)a.getInfo().dto={name:d("translateText")("--.generic.home")};else{var f=!1;for(var g in c)c[g].key==a.getInfo().dto.name&&(f=!0,a.getInfo().dto.listName=a.getInfo().dto.name);f||(console.log("not found"),a.getInfo().dto.listName=c[c.length-1].key,a.getInfo().dto.customName=a.getInfo().dto.name)}a.fields={name:{fieldTitle:"--.form.address.field.name",name:"name",options:c,disabled:function(){return a.getInfo().disabled},active:function(){return 1==a.getInfo().addName},field:a.getInfo().dto,fieldName:"listName"},customName:{fieldTitle:"--.address.customName.fieldTitle",name:"customName",validationRegex:"^.{2,255}$",validationMessage:["--.generic.validation.size","2","255"],disabled:function(){return a.getInfo().disabled},active:function(){return 1==a.getInfo().addName&&a.getInfo().dto.listName==e.get("--.address.type.other")},field:a.getInfo().dto,fieldName:"customName"},street:{fieldType:"text",name:"street",fieldTitle:"--.form.address.field.street",validationRegex:"^.{2,255}$",validationMessage:["--.generic.validation.size","2","255"],disabled:function(){return a.getInfo().disabled},focus:function(){return!a.getInfo().addName},field:a.getInfo().dto,fieldName:"street"},zip:{fieldType:"text",name:"zip",fieldTitle:"--.form.address.field.zip",validationRegex:"^.{2,20}$",validationMessage:["--.generic.validation.size","2","20"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"zip"},city:{fieldType:"text",name:"city",fieldTitle:"--.form.address.field.city",validationRegex:"^.{2,255}$",validationMessage:["--.generic.validation.size","2","255"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"city"}},a.$watch("fields",function(){var b=!0;for(var c in a.fields){var d=a.fields[c];a.fields.hasOwnProperty(c)&&(null==d.isValid||d.isValid===!1)&&(d.firstAttempt=!a.getInfo().displayErrorMessage,b=!1)}a.fields.customName.active()?a.getInfo().dto.name=a.getInfo().dto.customName:a.getInfo().dto.name=a.getInfo().dto.listName,a.getInfo().isValid=b},!0),a.$watch("getInfo().displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.getInfo().displayErrorMessage}})}}}}}]),myApp.directive("customerInterestFormCtrl",["$flash","directiveService","customerInterestService","$timeout",function(a,b,c,d){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/customerInterest/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a),a.interests={},c.getAll(function(b){a.interests=b;for(var c in a.interests)for(var d in a.getInfo().result)a.getInfo().result[d].name==a.interests[c].name&&(a.interests[c].registrationSelection=!0)}),a.select=function(a){a.registrationSelection=!a.registrationSelection},a.$watch("interests",function(b,c){if(b!=c){a.getInfo().isValid=!0,a.getInfo().result=[];for(var d in a.interests){var e=a.interests[d];e.registrationSelection&&a.getInfo().result.push(e)}}},!0)}}}}}]),myApp.directive("accountFormCtrl",["$flash","directiveService","languageService","modalService",function(a,b,c,d){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/account/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a),a.update=null!=a.getInfo().dto,null==a.getInfo().dto&&(a.getInfo().dto={gender:null}),a.passwordActive=!0;var e=[];a.fields={gender:{name:"gender",fieldTitle:"--.generic.gender",options:[{key:"MALE",value:"--.generic.male"},{key:"FEMALE",value:"--.generic.female"}],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"gender"},firstname:{name:"firstname",fieldTitle:"--.generic.firstname",validationRegex:"^.{2,50}$",validationMessage:["--.generic.validation.size","2","50"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"firstname"},lastname:{name:"lastname",fieldTitle:"--.generic.lastname",validationRegex:"^.{2,50}$",validationMessage:["--.generic.validation.size","2","50"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"lastname"},language:{name:"language",fieldTitle:"--.generic.favoriteLanguage",validationMessage:"--.error.validation.not_null",options:e,disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"lang"},email:{fieldType:"email",name:"email",fieldTitle:"--.generic.email",validationRegex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,validationMessage:"--.generic.validation.email",disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"email"},password:{name:"password",fieldTitle:"--.registration.form.password",validationRegex:"^[a-zA-Z0-9-_%]{6,18}$",validationMessage:"--.generic.validation.password",fieldType:"password",details:"--.registration.form.password.help",disabled:function(){return a.getInfo().disabled},active:function(){return!a.getInfo().updateMode&&a.passwordActive},field:a.getInfo().dto,fieldName:"password"},repeatPassword:{name:"repeatPassword",fieldTitle:"--.registration.form.repeatPassword",validationMessage:"--.generic.validation.wrongRepeatPassword",fieldType:"password",disabled:function(){return a.getInfo().disabled},validationFct:function(){return a.fields.password.field===a.fields.repeatPassword.field},active:function(){return!a.getInfo().updateMode&&a.passwordActive},field:a.getInfo().dto,fieldName:"repeatPassword"}};var f=c.getLanguages();for(var g in f){var h=f[g];e.push({key:h,value:h.code}),h.code==c.currentLanguage&&(a.getInfo().dto.lang=h)}a.getInfo().maskPassword=function(){a.passwordActive=!1},a.openSla=function(){d.openSla("--.sla.modal.title","/legal/")},a.$watch("fields",function(){var b=!0;for(var c in a.fields){var d=a.fields[c];!a.fields.hasOwnProperty(c)||null!=d.isValid&&d.isValid!==!1||(d.firstAttempt=!a.getInfo().displayErrorMessage,b=!1)}a.getInfo().isValid=b},!0),a.$watch("getInfo().displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.getInfo().displayErrorMessage}})}}}}}]),myApp.directive("businessFormCtrl",["$flash","directiveService",function(a,b){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/business/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a),null==a.getInfo().dto&&(a.getInfo().dto={}),console.log("scope.getInfo().status : "+a.getInfo().status),a.fields={name:{name:"name",fieldTitle:"--.generic.name",validationRegex:"^.{2,50}$",validationMessage:["--.generic.validation.size","2","250"],focus:function(){return!0},disabled:function(){return a.getInfo().disabled||void 0!=a.getInfo().status&&"PUBLISHED"===a.getInfo().status},field:a.getInfo().dto,fieldName:"name"},vta:{name:"vta",fieldTitle:"--.business.vta",validationRegex:/^($|[a-zA-Z0-9\.\- ]{6,20}$)/,validationMessage:"--.validation.dto.vta",disabled:function(){return a.getInfo().disabled||void 0!=a.getInfo().status&&"PUBLISHED"===a.getInfo().status},field:a.getInfo().dto,fieldName:"vta"},description:{name:"description",fieldTitle:"--.generic.desc",validationRegex:/^[\s\S]{2,1500}$/gi,validationMessage:["--.generic.validation.size","2","1500"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"description"},phone:{name:"phone",fieldTitle:"--.generic.phone",validationRegex:/^[0-9. *-+\/]{6,16}$/,validationMessage:"--.validation.dto.phone",disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"phone"},email:{name:"business-email",fieldTitle:"--.business.contactEmail",validationRegex:/^($|((([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$))/,validationMessage:"--.validation.dto.notNull",disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"email"},website:{name:"website",fieldTitle:"--.business.website",validationRegex:/^($|^(http[s]?:\/\/(www\.)?)[0-9A-Za-z-\.@:%_\+~#=]+\.[a-zA-Z]{2,3}((\/|\?).*)?$)/,validationMessage:"--.validation.dto.url",disabled:function(){return a.getInfo().disabled;
},field:a.getInfo().dto,fieldName:"website"}},a.$watch("fields",function(){var b=!0;for(var c in a.fields){var d=a.fields[c];!a.fields.hasOwnProperty(c)||null!=d.isValid&&d.isValid!==!1||(d.firstAttempt=!a.getInfo().displayErrorMessage,b=!1)}a.getInfo().isValid=b},!0),a.$watch("getInfo().displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.getInfo().displayErrorMessage}})}}}}}]),myApp.directive("businessCategoryFormCtrl",["$flash","directiveService","businessCategoryService","$timeout",function(a,b,c,d){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/businessCategory/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a),a.isDisabled=function(){return a.getInfo().disabled},a.getInfo().isValid=!1;a.getInfo().value;console.log(a.getInfo()),a.displayValue=function(){if(console.log("scope.displayValue"),null!=a.getInfo().value&&a.getInfo().value.length>0)for(var b in a.getInfo().value){var c=a.getInfo().value[b];for(var d in a.categories)for(var e in a.categories[d].children)for(var f in a.categories[d].children[e].children)a.categories[d].children[e].children[f].name==c.name&&(a.subcategories=a.categories[d].children,a.subsubcategories=a.categories[d].children[e].children,a.categories[d].selected=!0,a.categories[d].children[e].selected=!0,a.categories[d].children[e].children[f].selected=!0)}},a.loading=!0,c.getAll(function(b){a.categories=b.list,a.displayValue(),a.loading=!1}),a.$watch("getInfo().value",function(){a.displayValue()}),a.select=function(b){1!=b.selected&&(a.cleanSubSubCat(),a.cleanSubCat(),a.cleanCat(),b.selected=!0,a.subcategories=b.children,a.subsubcategories=null,a.compileValue())},a.selectSubcategory=function(b){1!=b.selected&&(a.cleanSubSubCat(),a.cleanSubCat(),a.subsubcategories=b.children,b.selected=!0,a.compileValue())},a.selectSubSubcategory=function(b){b.selected===!0?b.selected=!1:b.selected=!0,a.compileValue()},a.cleanCat=function(){for(var b in a.categories)a.categories[b].selected=!1},a.cleanSubCat=function(){for(var b in a.subcategories)a.subcategories[b].selected=!1},a.cleanSubSubCat=function(){for(var b in a.subsubcategories)a.subsubcategories[b].selected=!1},a.compileValue=function(){if(a.getInfo().isValid=!1,a.getInfo().value.splice(0,a.getInfo().value.length),null!=a.subsubcategories)for(var b in a.subsubcategories)1==a.subsubcategories[b].selected&&(a.getInfo().value.push(a.subsubcategories[b]),a.getInfo().isValid=!0)}}}}}}]),myApp.directive("downloadFormCtrl",["$flash","directiveService","$timeout",function(a,b,c){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/download/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a),a.fields={file:{fieldTitle:"generic.file",disabled:function(){return a.getInfo().disabled},size:a.getInfo().size}},a.$watch("getInfo().dto",function(b,c){a.fields.file.field=a.getInfo().dto}),a.fileCall=null,a.$watch("fields.file.field",function(b,c){null!=b&&(a.fileCall="/rest/file/"+a.fields.file.field.id),a.getInfo().isValid=null!=b,a.getInfo().dto=a.fields.file.field}),a.download=function(){if(null!=a.fields.file.field){var b="/rest/file/"+a.fields.file.field.id;$window.open(b)}},a.$watch("getInfo().displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.getInfo().displayErrorMessage}})}}}}}]),myApp.directive("promotionFormCtrl",["$flash","directiveService","$timeout","businessService","accountService",function(a,b,c,d,e){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/promotion/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){if(b.autoScopeImpl(a),a.update=null!=a.getInfo().dto,a.completePromotion=!0,a.editMode=!1,null==a.getInfo().dto){var f=new Date;f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0);var g=angular.copy(f);g=new Date(g.getTime()+6048e5),console.log("startDate:"+f),console.log("endDate:"+g),a.getInfo().dto={type:"PROMOTION",startDate:f,endDate:g}}else{var f=a.getInfo().dto.startDate;a.editMode=!0,a.completePromotion=null!=a.getInfo().dto.originalPrice}a.getInfo().dto.businessName=a.getInfo().business.name,a.getInfo().dto.businessIllustration=a.getInfo().business.illustration,a.getInfo().dto.distance=a.getInfo().business.distance,d.getInterests(function(b){if(a.interests=b,a.interests.length>1){a.fields.interests.active=function(){return!0};var c=[];for(var d in a.interests){var e=a.interests[d];c.push({key:e,value:e.translationName})}a.fields.interests.options=c}else 1==a.interests.length&&(a.getInfo().dto.interest=a.interests[0])}),a.fields={title:{name:"title",fieldTitle:"--.generic.title",validationRegex:"^.{2,100}$",validationMessage:["--.generic.validation.size","2","100"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"title"},description:{name:"description",fieldTitle:"--.publication.description",validationRegex:/^[\s\S]{0,1000}$/gi,validationMessage:["--.generic.validation.size","0","1000"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"description"},startDate:{name:"startDate",fieldTitle:"--.promotion.startDate",minimalDelay:"hour",disabled:function(){return a.getInfo().disabled||a.editMode===!0},field:a.getInfo().dto,startDate:f,fieldName:"startDate",maxDay:30},endDate:{name:"endDate",fieldTitle:"--.promotion.endDate",validationMessage:"--.promotion.validation.endDateBeforeStartDate",minimalDelay:"hour",details:"--.businessNotification.dayMax.details",disabled:function(){return a.getInfo().disabled||a.editMode===!0},validationFct:function(){return a.getInfo().dto.endDate>=a.getInfo().dto.startDate},field:a.getInfo().dto,startDate:f,fieldName:"endDate",maxDay:14},illustration:{name:"illustration",fieldTitle:"--.promotion.illustration",details:"--promotion.illustration.maximumImage",validationMessage:"--.error.validation.image",target:"publication_picture",disabled:function(){return a.getInfo().disabled},maxImage:4,optional:function(){return!0},field:a.getInfo().dto,multiple:!0,fieldName:"pictures"},originalPrice:{name:"originalPrice",fieldTitle:"--.promotion.originalUnitPrice",numbersOnly:"double",validationMessage:"--.generic.validation.numberExpected",validationFct:function(){return null!=a.getInfo().dto.originalPrice},disabled:function(){return a.getInfo().disabled},money:"€",active:function(){return a.completePromotion},field:a.getInfo().dto,fieldName:"originalPrice"},offPercent:{name:"offPercent",fieldTitle:"--.promotion.offPercent",numbersOnly:"percent",validationFct:function(){return null!=a.getInfo().dto.offPercent&&parseFloat(a.getInfo().dto.offPercent)>0&&parseFloat(a.getInfo().dto.offPercent)<=1},validationMessage:"--.promotion.validation.offPercent",disabled:function(){return a.getInfo().disabled},money:"%",field:a.getInfo().dto,fieldName:"offPercent"},offPrice:{name:"offPrice",fieldTitle:"--.promotion.offPrice",numbersOnly:"double",validationMessage:"--.promotion.validation.offPrice",validationFct:function(){return null!=a.getInfo().dto.offPrice&&parseFloat(a.getInfo().dto.offPrice)<parseFloat(a.getInfo().dto.originalPrice)},disabled:function(){return a.getInfo().disabled},money:"€",active:function(){return a.completePromotion},field:a.getInfo().dto,fieldName:"offPrice"},interests:{name:"interests",fieldTitle:"--.promotion.interest",details:"--.promotion.interest.help",validationMessage:"--.error.validation.not_null",options:[],optional:function(){return!0},disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"interest",comparableFct:function(a,b){return a.name==b.name}},editionReason:{fieldTitle:"--.publication.editionJustification",validationRegex:/^[\s\S]{1,1000}$/gi,validationMessage:["--.generic.validation.size","0","1000"],disabled:function(){return a.getInfo().disabled},active:function(){return"SUPERADMIN"==e.getMyself().role},field:a.getInfo().dto,fieldName:"editionReason"}},a.$watch("fields.startDate.field",function(){a.fields.endDate.startDate=a.fields.startDate.field[a.fields.startDate.fieldName]},!0);var h=!1;a.$watch("getInfo().dto.originalPrice",function(b,d){b!=d&&null!=a.getInfo().dto.originalPrice&&null!=a.getInfo().dto.offPercent&&0==h&&(h=!0,a.getInfo().dto.offPrice=parseFloat(a.getInfo().dto.originalPrice)*(1-parseFloat(a.getInfo().dto.offPercent)),c(function(){h=!1},1))}),a.$watch("getInfo().dto.offPercent",function(b,d){b!=d&&null!=a.getInfo().dto.originalPrice&&null!=a.getInfo().dto.offPercent&&0==h&&(h=!0,a.getInfo().dto.offPrice=parseFloat(a.getInfo().dto.originalPrice)*(1-parseFloat(a.getInfo().dto.offPercent)),c(function(){h=!1},1))}),a.$watch("getInfo().dto.offPrice",function(b,d){b!=d&&null!=a.getInfo().dto.originalPrice&&a.getInfo().dto.offPrice&&0==h&&(h=!0,a.getInfo().dto.offPercent=1-parseFloat(a.getInfo().dto.offPrice)/parseFloat(a.getInfo().dto.originalPrice),c(function(){h=!1},1))}),null!=a.getInfo().dto.originalPrice&&null!=a.getInfo().dto.offPercent&&0==h&&(h=!0,a.getInfo().dto.offPrice=parseFloat(a.getInfo().dto.originalPrice)*(1-parseFloat(a.getInfo().dto.offPercent)),c(function(){h=!1},1)),a.$watch("fields",function(){var b=!0;for(var c in a.fields){var d=a.fields[c];!a.fields.hasOwnProperty(c)||null!=d.isValid&&d.isValid!==!1||(d.firstAttempt=!a.getInfo().displayErrorMessage,b=!1)}a.getInfo().isValid=b},!0),a.$watch("getInfo().displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.getInfo().displayErrorMessage}})}}}}}]),myApp.directive("businessNotificationFormCtrl",["$flash","directiveService","businessService","accountService","constantService",function(a,b,c,d,e){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/businessNotification/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a);if(a.editMode=!1,null==a.getInfo().dto){var f=new Date;f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0);var g=angular.copy(f);g=new Date(g.getTime()+6048e5),a.getInfo().dto={type:"NOTIFICATION",startDate:f,endDate:g}}else{var f=a.getInfo().dto.startDate;a.editMode=!0,a.completePromotion=null!=a.getInfo().dto.originalPrice}a.getInfo().dto.businessName=a.getInfo().business.name,a.getInfo().dto.businessIllustration=a.getInfo().business.illustration,a.getInfo().dto.distance=a.getInfo().business.distance,c.getInterests(function(b){if(a.interests=b,a.interests.length>1){a.fields.interests.active=function(){return!0};var c=[];for(var d in a.interests){var e=a.interests[d];c.push({key:e,value:e.translationName})}a.fields.interests.options=c}else 1==a.interests.length&&(a.getInfo().dto.interest=a.interests[0])}),a.fields={title:{fieldTitle:"--.generic.title",validationRegex:"^.{2,100}$",validationMessage:["--.generic.validation.size","2","100"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"title"},description:{fieldTitle:"--.publication.description",validationRegex:/^[\s\S]{0,1000}$/gi,validationMessage:["--.generic.validation.size","0","1000"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"description"},startDate:{name:"startDate",fieldTitle:"--.promotion.startDate",minimalDelay:"hour",disabled:function(){return a.getInfo().disabled||a.editMode===!0},field:a.getInfo().dto,startDate:f,fieldName:"startDate",maxDay:30},endDate:{name:"endDate",fieldTitle:"--.promotion.endDate",validationMessage:"--.promotion.validation.endDateBeforeStartDate",minimalDelay:"hour",details:"--.businessNotification.dayMax.details",disabled:function(){return a.getInfo().disabled||a.editMode===!0},validationFct:function(){return a.getInfo().dto.endDate>=a.getInfo().dto.startDate},field:a.getInfo().dto,startDate:f,fieldName:"endDate",maxDay:28},illustration:{fieldTitle:"--.promotion.illustration",validationMessage:"--.error.validation.image",details:"--promotion.illustration.maximumImage",target:"publication_picture",maxHeight:e.PUBLICATION_PICTURE_HEIGHT,maxWidth:e.PUBLICATION_PICTURE_WIDTH,optional:function(){return!0},maxImage:4,disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,multiple:!0,fieldName:"pictures"},interests:{fieldTitle:"--.promotion.interest",details:"--.promotion.interest.help",validationMessage:"--.error.validation.not_null",options:[],optional:function(){return!0},disabled:function(){return a.getInfo().disabled},active:function(){return!1},field:a.getInfo().dto,fieldName:"interest",comparableFct:function(a,b){return a.name==b.name}},editionReason:{fieldTitle:"--.publication.editionJustification",validationRegex:/^[\s\S]{1,1000}$/gi,validationMessage:["--.generic.validation.size","1","1000"],disabled:function(){return a.getInfo().disabled},active:function(){return"SUPERADMIN"==d.getMyself().role},field:a.getInfo().dto,fieldName:"editionReason"}},a.$watch("fields.startDate.field",function(){a.fields.endDate.startDate=a.fields.startDate.field[a.fields.startDate.fieldName]},!0),a.$watch("fields",function(){var b=!0;for(var c in a.fields){var d=a.fields[c];!a.fields.hasOwnProperty(c)||null!=d.isValid&&d.isValid!==!1||(d.firstAttempt=!a.getInfo().displayErrorMessage,b=!1)}a.getInfo().isValid=b},!0),a.$watch("getInfo().displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.getInfo().displayErrorMessage}})}}}}}]),myApp.directive("scheduleFormCtrl",["$flash","directiveService",function(a,b){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/schedule/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a),a.days=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],a.attendance_selected="LIGHT",a.select_day=null,a.attendance_class={APPOINTMENT:"attendance-appointment",LIGHT:"attendance-light",MODERATE:"attendance-moderate",IMPORTANT:"attendance-heavy"},a.selectAttendance=function(b){a.attendance_selected=b},a.sections=[],a.nbPair=function(a){return!(a%2)},a.hours=[];for(var c=0;49>c;c++){var d="";a.nbPair(c)&&(d=c/2+"h"),a.hours.push({text:d})}for(var e in a.days){var f=a.days[e];a.sections[f]=[];for(var c=0;48>c;c++)a.sections[f].push({minutes:30*c,attendance:"CLOSE"});a.$watch("sections."+f,function(){a.compile()},!0)}a.select=function(b,c){(down||c)&&(b.attendance=a.attendance_selected)},a.compile=function(){for(var b in a.days){var c=a.days[b];(void 0==a.getInfo().dto[c]||null==a.getInfo().dto[c])&&(a.getInfo().dto[c]=[]),a.getInfo().dto[c].splice(0,a.getInfo().dto[c].length);var d=null;for(var e in a.sections[c]){var f=a.sections[c][e];if("CLOSE"!=f.attendance){if(null!=d){if(d.attendance==f.attendance){d.to=f.minutes+30;continue}a.getInfo().dto[c].push(d),d=null}d={attendance:f.attendance,from:f.minutes,to:f.minutes+30}}else null!=d&&(a.getInfo().dto[c].push(d),d=null)}null!=d&&(a.getInfo().dto[c].push(d),d=null)}},a.decompile=function(){for(var b in a.days){var c=a.days[b];for(var d in a.sections[c]){var e=a.sections[c][d];e.attendance="CLOSE"}for(var d in a.getInfo().dto[c]){var e=a.getInfo().dto[c][d];for(var f in a.sections[c]){var g=a.sections[c][f];g.minutes>=e.from&&g.minutes+30<=e.to&&(g.attendance=e.attendance)}}}},a.decompile(),a.startSection=null,a.select=function(b,c){c.attendance=a.attendance_selected,a.startSection=c,a.select_day=b,h()},$(document).mouseup(function(){a.startSection=null,a.select_day=null});var g=function(a,b){var c=a.minutes+30*b,d=c%60;return 10>d&&(d="0"+d),Math.floor(c/60%24)+"h"+d},h=function(){if(null!=a.startSection){for(var b=null,c=null,d=a.startSection.minutes/30;48>=d;d++)if(a.sections[a.select_day][d].attendance!=a.attendance_selected){b=a.sections[a.select_day][d-1];break}for(var d=a.startSection.minutes/30;d>=0;d--)if(a.sections[a.select_day][d].attendance!=a.attendance_selected){c=a.sections[a.select_day][d+1];break}a.selectedTiming=g(c,0)+" to "+g(b,1)}};a.progress=function(b,c,d){if(a.select_day==c&&(a.infoStyle={left:b.pageX+"px",top:b.pageY-75+"px"},null!=a.startSection))if(d.minutes<a.startSection.minutes){for(var e in a.sections[c]){var f=a.sections[c][e];f.minutes>=d.minutes&&f.minutes<=a.startSection.minutes&&(f.attendance=a.attendance_selected)}h()}else{for(var e in a.sections[c]){var f=a.sections[c][e];f.minutes<=d.minutes&&f.minutes>=a.startSection.minutes&&(f.attendance=a.attendance_selected)}h()}}}}}}}]),myApp.directive("imageFormCtrl",["$flash","directiveService",function(a,b){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/image/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a),a.imageParam={fieldTitle:"",validationMessage:"--.error.validation.image",target:a.getInfo().target,field:a.getInfo().dto,fieldName:a.getInfo().fieldName,fullSize:!0}}}}}}]),myApp.directive("businessSocialNetworkCtrl",["$flash","directiveService","languageService",function(a,b,c){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/businessSocialNetwork/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a),null==a.getInfo().dto&&(a.getInfo().dto={}),a.fields={facebook:{name:"facebook",fieldTitle:"--.generic.facebook",fieldImage:"assets/social_network/facebook.png",validationRegex:"^($|https://www.facebook.com/.*$)",validationMessage:"--.generic.validation.facebook",disabled:function(){return a.getInfo().disabled},focus:function(){return!0},field:a.getInfo().dto,fieldName:"facebookLink",placeholder:"https://facebook.com/"},twitter:{name:"twitter",fieldTitle:"--.generic.twitter",fieldImage:"assets/social_network/twitter.png",validationRegex:"^($|^https://twitter.com/.*$)",validationMessage:"--.generic.validation.twitter",disabled:function(){return a.getInfo().disabled},focus:function(){return!0},field:a.getInfo().dto,fieldName:"twitterLink",placeholder:"https://twitter.com/"},instagram:{name:"instagram",fieldTitle:"--.generic.instagram",fieldImage:"assets/social_network/instagram.png",validationRegex:"^($|^https://instagram.com/.*$)",validationMessage:"--.generic.validation.instagram",disabled:function(){return a.getInfo().disabled},focus:function(){return!0},field:a.getInfo().dto,fieldName:"instagramLink",placeholder:"https://instagram.com/"},delivery:{name:"delivery",details:"--.business.social.edit.modal.delivery.desc",fieldTitle:"--.business.socialNetwork.delivery",fieldImage:"assets/social_network/delivery.png",validationRegex:"^($|^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?$)",validationMessage:"--.validation.dto.url",disabled:function(){return a.getInfo().disabled},focus:function(){return!0},field:a.getInfo().dto,fieldName:"deliveryLink",placeholder:"http://..."},ecommerce:{name:"ecommerce",fieldTitle:"--.business.socialNetwork.ecommerce",fieldImage:"assets/social_network/e-commerce.png",validationRegex:"^($|^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?$)",validationMessage:"--.validation.dto.url",disabled:function(){return a.getInfo().disabled},focus:function(){return!0},field:a.getInfo().dto,fieldName:"ecommerceLink",placeholder:"http://..."},opinion:{name:"opinion",details:"--.business.social.edit.modal.opinion.desc",fieldTitle:"--.business.socialNetwork.opinion",fieldImage:"assets/social_network/opinion.png",validationRegex:"^($|^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?$)",validationMessage:"--.validation.dto.url",disabled:function(){return a.getInfo().disabled},focus:function(){return!0},field:a.getInfo().dto,fieldName:"opinionLink",placeholder:"http://..."},reservation:{name:"reservation",fieldTitle:"--.business.socialNetwork.reservation",fieldImage:"assets/social_network/reservation.png",validationRegex:"^($|^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?$)",validationMessage:"--.validation.dto.url",disabled:function(){return a.getInfo().disabled},focus:function(){return!0},field:a.getInfo().dto,fieldName:"reservationLink",placeholder:"http://..."}},a.$watch("fields",function(){var b=!0;for(var c in a.fields){var d=a.fields[c];!a.fields.hasOwnProperty(c)||null!=d.isValid&&d.isValid!==!1||(d.firstAttempt=!a.getInfo().displayErrorMessage,b=!1)}a.getInfo().isValid=b},!0),a.$watch("getInfo().displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.getInfo().displayErrorMessage}})}}}}}]),myApp.directive("contactFormCtrl",["$flash","directiveService","accountService",function(a,b,c){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/contact/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){return b.autoScopeImpl(a)},post:function(a){b.autoScopeImpl(a),a.fields={email:{fieldType:"email",name:"email",fieldTitle:"--.registration.form.yourEmail",validationRegex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,validationMessage:"--.generic.validation.email",disabled:function(){return a.getInfo().disabled},active:function(){return null==c.getMyself()},field:a.getInfo().dto,fieldName:"email"},subject:{name:"subject",fieldTitle:"--.contactForm.subject",validationRegex:"^.{2,255}$",validationMessage:["--.generic.validation.size","2","255"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"subject"},message:{name:"message",fieldTitle:"--.contactForm.message",validationRegex:/^[\s\S]{2,10000}$/gi,validationMessage:["--.generic.validation.size","2","10000"],disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"message"}},a.$watch("fields",function(){var b=!0;for(var c in a.fields){var d=a.fields[c];!a.fields.hasOwnProperty(c)||null!=d.isValid&&d.isValid!==!1||(d.firstAttempt=!a.getInfo().displayErrorMessage,b=!1)}a.getInfo().isValid=b},!0),a.$watch("getInfo().displayErrorMessage",function(){for(var b in a.fields){var c=a.fields[b];c.firstAttempt=!a.getInfo().displayErrorMessage}})}}}}}]),myApp.directive("claimBusinessCtrl",["$flash","facebookService","translationService","directiveService","$timeout","accountService","$location","modalService",function(a,b,c,d,e,f,g,h){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/form/claimBusiness/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){return d.autoScopeImpl(a),a.fields={phone:{name:"phone",fieldTitle:"--.generic.phone",validationRegex:/^[0-9. *-+\/]{6,16}$/,validationMessage:"--.validation.dto.phone",disabled:function(){return a.getInfo().disabled},field:a.getInfo().dto,fieldName:"phone"},vta:{name:"vta",fieldTitle:"--.business.vta",validationRegex:/^[a-zA-Z0-9\.\- ]{6,20}$/,validationMessage:"--.validation.dto.vta",disabled:function(){return a.getInfo().disabled||null!=a.getInfo().status==="PUBLISHED"},field:a.getInfo().dto,fieldName:"vta"}},a.setLoading=function(b){return a.getInfo().mobileVersion?b===!0?h.openLoadingModal():h.closeLoadingModal():a.getInfo().loading=b},a.$watch("fields",function(){var b,c,d;d=!0;for(b in a.fields)c=a.fields[b],!a.fields.hasOwnProperty(b)||null!=c.isValid&&c.isValid!==!1||(c.firstAttempt=!a.getInfo().displayErrorMessage,d=!1);return a.getInfo().isValid=d},!0),a.$watch("getInfo().displayErrorMessage",function(){var b,c,d;d=[];for(b in a.fields)c=a.fields[b],d.push(c.firstAttempt=!a.getInfo().displayErrorMessage);return d})}}}}}]),myApp.directive("scheduleCtrl",["directiveService",function(a){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/schedule/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){},post:function(b){return a.autoScopeImpl(b),b.sections=[],b.days=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],b.daysTranslation={MONDAY:"day_abrv_monday",TUESDAY:"day_abrv_tuesday",WEDNESDAY:"day_abrv_wednesday",THURSDAY:"day_abrv_thusday",FRIDAY:"day_abrv_friday",SATURDAY:"day_abrv_saturday",SUNDAY:"day_abrv_sunday"},b.attendance_class={APPOINTMENT:"attendance-appointment",LIGHT:"attendance-light",MODERATE:"attendance-moderate",IMPORTANT:"attendance-heavy"},b.isEven=function(a){return!(a%2)},b.$watch("getInfo().dto",function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(console.log((new Date).getDay()),h=b.days[(new Date).getDay()-1],i=60*(new Date).getHours()+(new Date).getMinutes(),null!=b.getInfo().dto&&Object.keys(b.getInfo().dto).length>0){for(g=null,f=null,t=b.days,l=0,p=t.length;p>l;l++)if(a=t[l],null!=b.getInfo().dto[a])for(u=b.getInfo().dto[a],m=0,q=u.length;q>m;m++)j=u[m],(null===g||g>j.from)&&(g=j.from),(null===f||f<j.to)&&(f=j.to);for(g%60===30&&(g-=30),f%60===30&&(f+=30),b.hours=[],e=g/30;f/30>=e;)d="",b.isEven(e)&&(d=e/2),b.hours.push({text:d}),e++;for(c=!0,0===b.getInfo().dto.SATURDAY.length&&0===b.getInfo().dto.SUNDAY.length&&(c=!1),v=b.days,n=0,r=v.length;r>n;n++)if(a=v[n],"SUNDAY"!==a&&"SATURDAY"!==a||c!==!1)for(b.sections[a]=[],e=g/30;f/30>e;)b.sections[a].push({minutes:30*e,attendance:"CLOSE"}),e++;else e++;for(w=b.days,x=[],o=0,s=w.length;s>o;o++)a=w[o],x.push(function(){var c,d,e,f;if(null!=b.getInfo().dto[a]){for(e=b.getInfo().dto[a],f=[],c=0,d=e.length;d>c;c++)j=e[c],f.push(function(){var c,d,e,f;for(e=b.sections[a],f=[],c=0,d=e.length;d>c;c++)k=e[c],a===h&&k.minutes<i&&k.minutes+30>i&&(b.isOpenNow=!0),f.push(k.minutes>=j.from&&k.minutes+30<=j.to?k.attendance=j.attendance:void 0);return f}());return f}}());return x}},!0)}}}}}]),myApp.directive("galleryCtrl",["$rootScope","directiveService","modalService",function(a,b,c){return{restrict:"E",scope:b.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/gallery/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){return b.autoScopeImpl(a),a.openGallery=function(b){return c.galleryModal(b,a.getInfo().images)}}}}}}]),myApp.directive("googleMapWidgetCtrl",["$rootScope","businessService","geolocationService","directiveService","$timeout",function(a,b,c,d,e){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/googleMapWidget/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){return d.autoScopeImpl(a),a.$watch("getInfo().address",function(){return a.getInfo().refreshNow=function(){return a.getInfo().centerMap()},a.$watch("getInfo().address",function(){return a.getInfo().centerMap()},!0),a.$watch("getInfo().map",function(b){return a.getInfo().centerMap()}),a.getInfo().centerMap=function(){var b;return null!=a.getInfo().address?(a.map=new google.maps.Map(document.getElementsByClassName("map")[0],{zoom:14,disableDefaultUI:!0,center:{lat:a.getInfo().address.posx,lng:a.getInfo().address.posy}}),b=new google.maps.Marker({}),b.setPosition(new google.maps.LatLng(a.getInfo().address.posx,a.getInfo().address.posy)),b.setMap(a.map)):void 0},a.toGoogleMap=function(){var b,c,d;return b=function(){var a;return/iP(hone|od|ad)/.test(navigator.platform)?(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]):void 0},-1!==navigator.platform.indexOf("iPhone")||-1!==navigator.platform.indexOf("iPod")?(d=b()||[0],c="",c=d[0]>=6?"maps://":"http://",window.location=c+a.complete("maps.apple.com/?address=")):window.open(a.complete("https://www.google.be/maps/place/"))},a.complete=function(b){var c;return c=a.getInfo().address.street+","+a.getInfo().address.zip+","+a.getInfo().address.city+","+a.getInfo().address.country,b+=c.replace(RegExp(" ","g"),"+")}})}}}}}]),myApp.directive("searchResultCtrl",["directiveService","$location","searchBarService",function(a,b,c){return{restrict:"E",scope:a.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/searchResult/template.html",replace:!0,transclude:!0,compile:function(){return{pre:function(a){},post:function(d){var e,f;return a.autoScopeImpl(d),e=-1,d.getInfo().indexSelected=null,d.$watch("getInfo().result",function(){var a,b,c,f,g,h,i,j,k,l,m,n;if(null!=d.getInfo().result){for(e=-1,l=d.getInfo().result.businesses,f=0,i=l.length;i>f;f++)a=l[f],a.index=++e;for(null!=d.getInfo().result.businesses&&d.getInfo().result.businesses.length>0&&d.getInfo().mobile!==!0&&(d.seeMoreBusinessIndex=++e),m=d.getInfo().result.publications,g=0,j=m.length;j>g;g++)c=m[g],c.index=++e;for(null!=d.getInfo().result.publications&&d.getInfo().result.publications.length>0&&d.getInfo().mobile!==!0&&(d.seeMorePublicationIndex=++e),n=d.getInfo().result.categories,h=0,k=n.length;k>h;h++)b=n[h],b.index=++e;null!=d.getInfo().result.categories&&d.getInfo().result.categories.length>0&&d.getInfo().mobile!==!0&&(d.seeMoreCategoryIndex=++e),d.seeMoreIndex=++e}else d.getInfo().display=!1;return d.getInfo().indexSelected=null}),$(document).keydown(function(a){var b,c,f,g,h,i,j,k,l,m,n,o;if(40===a.keyCode)return null===d.getInfo().indexSelected||d.getInfo().indexSelected===e?d.getInfo().indexSelected=0:d.getInfo().indexSelected++,d.$apply();if(38===a.keyCode)return null===d.getInfo().indexSelected||0===d.getInfo().indexSelected?d.getInfo().indexSelected=e:d.getInfo().indexSelected--,d.$apply();if(13===a.keyCode){if(null!=d.getInfo().result&&null!=d.getInfo().indexSelected){for(m=d.getInfo().result.businesses,g=0,j=m.length;j>g;g++)if(b=m[g],d.getInfo().indexSelected===b.index){console.log("goToBusiness"),d.goToBusiness(b);break}for(n=d.getInfo().result.categories,h=0,k=n.length;k>h;h++)if(c=n[h],d.getInfo().indexSelected===c.index){console.log("goToCategory "),d.goToCategory(c);break}for(o=d.getInfo().result.publications,i=0,l=o.length;l>i;i++)if(f=o[i],d.getInfo().indexSelected===f.index){console.log("goToPublication"),d.goToPublication(f);break}return d.$apply()}}else if(27===a.keyCode)return d.getInfo().display=!1,d.getInfo().indexSelected=null,d.$apply()}),$(document).click(function(){return $("#searchContainer").is(":hover")?void 0:(d.getInfo().display=!1,d.getInfo().indexSelected=null,d.$apply())}),d.select=function(a){return d.getInfo().indexSelected=a},d.seeAll=function(){return d.navigateTo("search/"+c.currentSearch)},d.goToPublication=function(a){return d.navigateTo("business/"+a.businessId+"/publication/"+a.id)},d.goToBusiness=function(a){return d.navigateTo("business/"+a.id)},d.seeAllPublication=function(){return d.navigateTo("search/publication:"+f(c.currentSearch))},d.seeAllBusiness=function(){return d.navigateTo("search/business:"+f(c.currentSearch))},d.seeAllCategory=function(){return d.navigateTo("search/category:"+f(c.currentSearch))},d.goToCategory=function(a){var b;return b=null,b=null!=a.subSubCategory?a.subSubCategory.translationName:null!=a.subCategory?a.subCategory.translationName:a.category.translationName,d.navigateTo("search/category:"+f(b))},f=function(a){return-1!==a.indexOf(":")?a.split(":")[1]:a},d.navigateTo=function(a){return b.path(a),d.$broadcast("SEARCH_CLEAN")},d.$on("SEARCH_CLEAN",function(){return d.getInfo().display=!1,d.getInfo().cleanSearch()})}}}}}]),myApp.directive("searchBarCtrl",["$rootScope","businessService","geolocationService","directiveService","searchService","searchBarService","$timeout","$location","modalService",function(a,b,c,d,e,f,g,h,i){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/searchBar/template.html",replace:!0,transclude:!0,
compile:function(){return{post:function(b){return d.autoScopeImpl(b),b.advancedSearch=!1,b.searchBarService=f,b.searchResultParam={mobile:b.getInfo().mobile,display:!1,cleanSearch:function(){return f.currentSearch=""}},b.$watch("searchBarService.currentSearch",function(a,c){var d;return f.displaySearchResult&&a!==c&&""!==f.currentSearch&&f.currentSearch.length>=2?(d=angular.copy(f.currentSearch),null!=b.promise&&g.cancel(b.promise),b.promise=g(function(){return-1!==f.currentSearch.indexOf(":")&&f.currentSearch.split(":")[1].length>0||-1===f.currentSearch.indexOf(":")&&f.currentSearch.length>0?b.searchResultParam.promise=e.searchByStringLittle(f.currentSearch,function(a){return b.searchResultParam.result=a,b.searchResultParam.display=!0}):void 0},500)):void 0}),b.search=function(){return b.searchResultParam.display=!1,null==b.searchResultParam.indexSelected?h.path("search/"+f.currentSearch):void 0},b.navigateTo=function(b){return a.$broadcast("SEARCH_CLEAN"),g(function(){return h.path(b)},1)}}}}}}]),myApp.directive("followWidgetCtrl",["accountService","modalService","followService","directiveService","$filter","$flash",function(a,b,c,d,e,f){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/followWidget/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(g){return d.autoScopeImpl(g),g.follow=function(){return null!=a.getMyself()?g.followed():b.openLoginModal(g.followed,null,"--.loginModal.help.follow")},g.getInfo().maskTotal=!0,g.followed=function(){return g.getInfo().business.following=!g.getInfo().business.following,g.getInfo().business.following===!0?(g.getInfo().business.totalFollowers++,f.success(e("translateText")("--.followWidget.message.add"))):(f.success(e("translateText")("--.followWidget.message.remove")),g.getInfo().business.totalFollowers--),c.addFollow(g.getInfo().business.following,g.getInfo().business.id)}}}}}}]),myApp.directive("followWidgetForPublicationCtrl",["accountService","modalService","followService","directiveService","$filter","$flash",function(a,b,c,d,e,f){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/followWidgetForPublication/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(g){return d.autoScopeImpl(g),g.follow=function(){return null!=a.getMyself()?g.followed():b.openLoginModal(g.followed,null,"--.loginModal.help.follow")},g.getInfo().maskTotal=!0,g.followed=function(){return g.getInfo().publication.following=!g.getInfo().publication.following,g.getInfo().publication.following===!0?(g.getInfo().publication.totalFollowers++,f.success(e("translateText")("--.followWidget.message.add"))):(f.success(e("translateText")("--.followWidget.message.remove")),g.getInfo().publication.totalFollowers--),c.addFollow(g.getInfo().publication.following,g.getInfo().publication.businessId)}}}}}}]),myApp.directive("facebookSharePublicationCtrl",["$rootScope","businessService","geolocationService","directiveService","facebookService",function(a,b,c,d,e){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/directive/component/facebookSharePublication/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){return d.autoScopeImpl(a),a.share=function(){return e.sharePublication(a.getInfo().businessId,a.getInfo().publicationId)}}}}}}]),myApp.filter("translateText",["$sce","translationService",function(a,b){return function(a,c,d){var e;if("object"==typeof a){e=b.get(a[0]);for(var f in a)0!=f&&(e=e.replace("{"+(parseFloat(f)-1)+"}",a[f]));return d===!0?e.toUpperCase():e}if(e=b.get(a),null!=c)if("[object Array]"===Object.prototype.toString.call(c))for(var f in c)e=e.replace("{"+f+"}",c[f]);else e=e.replace("{0}",c);return d===!0?e.toUpperCase():e}}]),myApp.filter("text",["$sce","$filter",function(a,b){return function(b,c){if(void 0!=b||null!=b){void 0!=c&&b.length>c&&(b=b.substr(0,c),b=b.substr(0,Math.min(b.length,b.lastIndexOf(" "))),b+=" ...");var d=a.trustAsHtml(b.replace(/\n/g,"<br/>"));return d}return a.trustAsHtml(b)}}]),myApp.filter("zeropad",["$sce","translationService",function(a,b){return function(a){var b=2,c=parseInt(a,10);if(b=parseInt(b,10),isNaN(c)||isNaN(b))return a;for(c=""+c;c.length<b;)c="0"+c;return c}}]),myApp.filter("image",["constantService",function(a){return function(b,c){return null!=b&&void 0!=b?null!=b.storedName&&void 0!=b.storedName?void 0!=c&&1==c?a.fileBucketUrl+"/"+b.storedNameOriginalSize:a.fileBucketUrl+"/"+b.storedName:b:null}}]),initializeCommonRoutes(),myApp.controller("MainCtrl",["$rootScope","$scope","$locale","translationService","$window","facebookService","languageService","$location","modalService","accountService","$timeout","constantService","customerInterestService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(b.navigateTo=function(a){h.path(a)},"data"in window&&void 0!=data&&null!=data){d.set(data.translations),l.fileBucketUrl=data.fileBucketUrl,l.urlBase=data.urlBase,m.setAll(data.customerInterests);for(var n in data.constants)l[n]=data.constants[n];l.isMobile=data.isMobile}j.setMyself(data.mySelf),f.facebookAppId=data.appId,g.setLanguages(lang,languages),f.ini(),-1!=h.url().indexOf("customerRegistration")&&null==j.getMyself()?i.openCustomerRegistrationModal():-1!=h.url().indexOf("businessRegistration")&&null==j.getMyself()&&i.openBusinessRegistrationModal(),b.helpDisplayed=!1,b.displayHelp=function(){b.helpDisplayed=!0},b.maskHelp=function(){b.helpDisplayed=!1},b.openHelp=function(a){i.openHelpModal(a)},b.progressBarWidth=0;var o=2;b.progressBarCss={width:b.progressBarWidth+"%"},a.$on("PROGRESS_BAR_START",function(){b.progress()}),b.progress=function(){b.progressBarWidth++,b.progressBarWidth<50*o?k(function(){b.progress()},10*o):b.progressBarWidth<75*o?k(function(){b.progress()},30*o):b.progressBarWidth<100*o&&k(function(){b.progress()},100*o)},a.$on("PROGRESS_BAR_STOP",function(){b.progressBarWidth=100*o,k(function(){b.progressBarWidth=0},500)}),b.$watch("progressBarWidth",function(){b.progressBarCss.width=b.progressBarWidth/o+"%"})}]),myApp.controller("LegalCtrl",["$scope",function(a){}]),myApp.service("directiveService",["$sce",function(a){this.autoScope=function(a){var b,c,d;c={};for(b in a)d=a[b],c[b]=d,"ng"===b.slice(0,2)&&"="===d&&(c[b[2].toLowerCase()+b.slice(3)]="@");return c},this.autoScopeImpl=function(b,c){var d,e,f;b.$$NAME=c;for(e in b)f=b[e],"ng"===e.slice(0,2)&&(d=function(a,b){return function(){var c;return c=0,c=void 0===a[b]||null===a[b]||""===a[b]?a[b[2].toLowerCase()+b.slice(3)]:a[b],a["decorate"+b.slice(2)]?a["decorate"+b.slice(2)](c):c}},b["get"+e.slice(2)]=d(b,e));return b.isTrue=function(a){return a===!0||"true"===a||"y"===a},b.isFalse=function(a){return a===!1||"false"===a||"n"===a},b.isNull=function(a){return null===a},b.html=function(b){return a.trustAsHtml(b)}}}]),myApp.service("generateId",["$rootScope",function(a){this.generate=function(){var a,b,c;for(c="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;20>a;)c+=b.charAt(Math.random()*b.length|0),a++;return c}}]),myApp.service("translationService",["$rootScope","$filter","$http","$locale",function(a,b,c,d){var e;e=this,e.elements=null,e.set=function(a){e.elements=a.translations},e.get=function(a){return e.elements[a]?e.elements[a]:a},e.translateExceptionsDTO=function(a){return null!=a.params&&Object.keys(a.params).length>0?b("translateTextWithVars")(a.messageToTranslate,a.params):null!=a.messageToTranslate?b("translate")(a.messageToTranslate):a.message}}]),myApp.service("modelService",["$rootScope",function(a){this.MY_SELF="MYSELF",this.APP_ID="APP_ID",this.model={},this.set=function(a,b){this.model[a]=b},this.get=function(a){return this.model[a]},this.remove=function(a){delete this.model[a]}}]),myApp.service("facebookService",["$http","accountService","$locale","languageService","constantService","$flash",function(a,b,c,d,e,f){var g,h,i;this.facebookAppId,this.facebookAuthorization="public_profile,email",h=!1,g=null,i=this,this.ini=function(){return FB.init({appId:this.facebookAppId,cookie:!0,xfbml:!0,version:"v2.3"}),FB.getLoginStatus(function(a){return"connected"===a.status?(h=!0,g=a.authResponse):void 0})},this.sharePublication=function(a,b){var c,d;return d=e.urlBase+"/business/"+a+"/publication/"+b,c={method:"share",href:d},FB.ui(c)},this.loginToServer=function(b,c){var d,e;return d=g.accessToken,e=g.userID,a({method:"GET",url:"/rest/login/facebook/"+d+"/"+e,headers:"Content-Type:application/json;charset=utf-8"}).success(function(a){return null!=a!==""&&null!=b?b(a):void 0}).error(function(a,b){return f.error(a.message),null!=c?c(a,b):void 0})},this.loginToServerSimple=function(b,c,d){return a({method:"GET",url:"/rest/login/facebook/"+b+"/null",headers:"Content-Type:application/json;charset=utf-8"}).success(function(a){return null!=a!==""&&null!=c?c(a):void 0}).error(function(a,b){return f.error(a.message),null!=d?d(a,b):void 0})},this.linkToAccount=function(b,c,d){var e;return e=function(b){return a({method:"GET",url:"/rest/facebook/link/"+b+"/null",headers:"Content-Type:application/json;charset=utf-8"}).success(function(a){return null!=a!==""&&null!=c?c(a):void 0}).error(function(a,b){return f.error(a.message),null!=d?d(a,b):void 0})},null!=b?(g={accessToken:b},h=!0,e(g.accessToken)):h?e(g.accessToken):FB.login(function(a){return"connected"===a.status?(g=a.authResponse,h=!0,e(g.accessToken)):null!=d?d():void 0},{scope:this.facebookAuthorization})},this.login=function(a,b){return h?this.loginToServer(a,b):FB.login(function(c){return"connected"===c.status?(g=c.authResponse,i.loginToServer(a,b),h=!0):null!=b?b():void 0},{scope:this.facebookAuthorization})},this.isConnected=function(){return h}}]),myApp.service("languageService",["$flash","$window","$http","$rootScope",function(a,b,c,d){this.languages,this.languagesStructured=[],this.currentLanguage;var e=this;this.setLanguages=function(a,b){this.currentLanguage=a,this.languages=b;for(var c in b)lang=b[c],this.languagesStructured.push({key:lang.code,value:lang.language})},d.$watch(function(){return e.currentLanguage},function(a,b){a!=b&&e.changeLanguage(e.currentLanguage,!0)}),this.changeLanguage=function(d,e){(d!=this.currentLanguage||e)&&c({method:"PUT",url:"/rest/language/"+d,headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,c){b.location.reload()}).error(function(b,c){a.error(b.message)})},this.getLanguages=function(){return angular.copy(this.languages)}}]),myApp.service("customerInterestService",["$sce","$http","$flash",function(a,b,c){var d=null,e=function(a,e){b({method:"GET",url:"/rest/customerInterest",headers:"Content-Type:application/json;charset=utf-8"}).success(function(b,c){d=b.list,null!=a&&a(b.list)}).error(function(a,b){null!=e&&e(a,b),c.error(a)})};this.setAll=function(a){d=a},this.getAll=function(a){null==d?e(a):a(angular.copy(d))}}]),myApp.service("accountService",["$flash","$http","translationService",function(a,b,c){var d=this;this.model={myself:null,myBusiness:null},this.testEmail=function(c,d,e){b({method:"GET",url:"/rest/email/test/"+c,headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,b){null!=d&&d(a.value)}).error(function(b,c){a.error(b.message),null!=e&&e(b,c)})},this.registration=function(c,e,f){b({method:"POST",url:"/rest/registration/customer",headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){d.setMyself(a),null!=e&&e(a)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.testFacebook=function(c,d,e){b({method:"POST",url:"/rest/facebook/test",headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){null!=d&&d(a)}).error(function(b,c){a.error(b.message),null!=e&&e(b,c)})},this.logout=function(c,e){b({method:"GET",url:"/rest/logout",headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,b){d.setMyself(null),null!=c&&c(a)}).error(function(b,c){a.error(b.message),null!=e&&e(b,c)})},this.changePassword=function(c,e,f,g){var h={oldPassword:c,newPassword:e};b({method:"PUT",url:"/rest/account/password/"+d.getMyself().id,headers:"Content-Type:application/json;charset=utf-8",data:h}).success(function(a,b){null!=f&&f(a)}).error(function(b,c){a.error(b.message),null!=g&&g(b,c)})},this.editAccount=function(c,e,f){b({method:"PUT",url:"/rest/account/"+d.getMyself().id,headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){d.setMyself(a),null!=e&&e(a)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.login=function(c,e,f){b({method:"POST",url:"/rest/login",headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){d.setMyself(a),null!=e&&e(a)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.addAddress=function(c,e,f){b({method:"POST",url:"/rest/address",headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){d.getMyself().addresses.push(a),null!=e&&e(a)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.editAddress=function(c,e,f){b({method:"PUT",url:"/rest/address/"+c.id,headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){for(var f in d.getMyself().addresses)d.getMyself().addresses[f].id==c.id&&d.getMyself().addresses.splice(f,1,a);null!=e&&e(a)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.deleteAddress=function(c,e,f){b({method:"DELETE",url:"/rest/address/"+c.id,headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){for(var f in d.getMyself().addresses)d.getMyself().addresses[f].id==c.id&&d.getMyself().addresses.splice(f,1);null!=e&&e(a)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.editCustomerInterest=function(c,e,f){console.log(c),b({method:"PUT",url:"/rest/customer/interest/"+d.getMyself().id,headers:"Content-Type:application/json;charset=utf-8",data:{list:c}}).success(function(a,b){d.getMyself().customerInterests=a.list,null!=e&&e(a)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.forgotPassword=function(c,d,e){b({method:"PUT",url:"/rest/forgot/password",headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){null!=d&&d(a)}).error(function(b,c){a.error(b.message),null!=e&&e(b,c)})},this.getMyself=function(){return this.model.myself},this.setMyself=function(a){this.model.myself=a},this.getMyBusiness=function(){return this.model.myBusiness},this.setMyBusiness=function(a){this.model.myBusiness=a}}]),myApp.service("businessCategoryService",["$sce","$http","$flash",function(a,b,c){var d=null,e=function(a,e){b({method:"GET",url:"/rest/businessCategory",headers:"Content-Type:application/json;charset=utf-8"}).success(function(b,c){d=b,null!=a&&a(b)}).error(function(a,b){null!=e&&e(a,b),c.error(a.message)})};this.getAll=function(a){null==d?e(a):a(angular.copy(d))}}]),myApp.service("businessService",["$flash","$http","accountService","geolocationService",function(a,b,c,d){this.loadLastBusiness=function(c,e,f){return b({method:"POST",url:"/rest/business/last/"+c,headers:"Content-Type:application/json;charset=utf-8",data:d.getPositionWithoutNull()}).success(function(a,b){return null!=e?e(a.list):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.createBusiness=function(c,d,e,f){return b({method:"POST",url:"/rest/createBusiness",headers:"Content-Type:application/json;charset=utf-8",data:{accountId:c,businessName:d}}).success(function(a,b){return null!=e?e(a):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.importBusinessFormFacebook=function(c,d,e){return b({method:"GET",url:"/rest/createBusinessFromFacebook/"+c,headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,b){return null!=d?d(a):void 0}).error(function(b,c){return a.error(b.message),null!=e?e(b,c):void 0})},this.getBusiness=function(c,d,e){return b({method:"GET",url:"/rest/business/"+c,headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,b){return null!=d?d(a):void 0}).error(function(b,c){return a.error(b.message),null!=e?e(b,c):void 0})},this.getFollowedBusinesses=function(c,d){return b({method:"GET",url:"/rest/business/followed",headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,b){return null!=c?c(a.list):void 0}).error(function(b,c){return a.error(b.message),null!=d?d(b,c):void 0})},this.edit=function(d,e,f){return b({method:"PUT",url:"/rest/business/"+d.id,headers:"Content-Type:application/json;charset=utf-8",data:d}).success(function(a,b){return c.getMyself().business=a,null!=e?e(a):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.editSocialNetwork=function(c,d,e,f){return b({method:"PUT",url:"/rest/business/"+c+"/social_network",headers:"Content-Type:application/json;charset=utf-8",data:d}).success(function(a,b){return null!=e?e(a):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.editBusinessCategory=function(c,d,e,f){return b({method:"PUT",url:"/rest/business/"+c+"/category",headers:"Content-Type:application/json;charset=utf-8",data:{list:d}}).success(function(a,b){return null!=e?e(a):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.publishBusiness=function(c,d){return b({method:"POST",url:"/rest/business/ask_publication",headers:"Content-Type:application/json;charset=utf-8",data:{}}).success(function(a,b){return null!=c?c(a):void 0}).error(function(b,c){return a.error(b.message),null!=d?d(b,c):void 0})},this.cancelPublishRequest=function(c,d){return b({method:"POST",url:"/rest/business/cancel_publication_request",headers:"Content-Type:application/json;charset=utf-8",data:{}}).success(function(a,b){return null!=c?c(a):void 0}).error(function(b,c){return a.error(b.message),null!=d?d(b,c):void 0})},this.stopPublication=function(c,d){return b({method:"POST",url:"/rest/business/stop_publish",headers:"Content-Type:application/json;charset=utf-8",data:{}}).success(function(a,b){return null!=c?c(a):void 0}).error(function(b,c){return a.error(b.message),null!=d?d(b,c):void 0})},this.editIllustration=function(c,d,e,f){return b({method:"PUT",url:"/rest/business/"+c+"/illustration",headers:"Content-Type:application/json;charset=utf-8",data:d}).success(function(a,b){return null!=e?e(a):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.editLandscape=function(c,d,e,f){return b({method:"PUT",url:"/rest/business/"+c+"/landscape",headers:"Content-Type:application/json;charset=utf-8",data:d}).success(function(a,b){return null!=e?e(a):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.editAddress=function(c,d,e,f){return b({method:"PUT",url:"/rest/business/"+c+"/address",headers:"Content-Type:application/json;charset=utf-8",data:d}).success(function(a,b){return null!=e?e(a):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.createSchedule=function(c,d,e,f){return b({method:"POST",url:"/rest/business/"+c+"/schedule",headers:"Content-Type:application/json;charset=utf-8",data:d}).success(function(a,b){return null!=e?e(a.list):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.editGallery=function(c,d,e,f){return b({method:"POST",url:"/rest/business/"+c+"/edit/gallery",headers:"Content-Type:application/json;charset=utf-8",data:d}).success(function(a,b){return null!=e?e(a.list):void 0}).error(function(b,c){return a.error(b.message),null!=f?f(b,c):void 0})},this.getInterests=function(c,d){return b({method:"GET",url:"/rest/business/interests",headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,b){return null!=c?c(a.list):void 0}).error(function(b,c){return a.error(b.message),null!=d?d(b,c):void 0})},this.claimBusiness=function(c,d,e,f,g){return b({method:"POST",url:"/rest/business/claim",headers:"Content-Type:application/json;charset=utf-8",data:{phone:d,vta:e,businessId:c}}).success(function(a,b){return null!=f?f(a):void 0}).error(function(b,c){return a.error(b.message),null!=g?g(b,c):void 0})}}]),myApp.service("modalService",["$modal",function(a){this.basicModal=function(b,c,d,e){var f={directiveName:function(){return c},param:function(){return d},title:function(){return b},save:function(){return e}};a.open({templateUrl:"/assets/js/modal/BasicModal/view.html",controller:"BasicModalCtrl",size:"lg",resolve:f})},this.alertModal=function(b,c){var d={message:function(){return c}},e="modal-alert-content";e+="info"==b?" modal-alert-content-info":"success"==b?" modal-alert-content-success":" modal-alert-content-error",a.open({templateUrl:"/assets/js/modal/mobile/AlertModal/view.html",controller:"AlertMessageCtrl",size:"l",windowClass:e,resolve:d})},this.openLoadingModal=function(){this.loadingModal=a.open({templateUrl:"/assets/js/modal/mobile/LoadingModal/view.html",controller:"LoadingModalCtrl",size:"l",windowClass:"loading-modal"})},this.closeLoadingModal=function(){void 0!=this.loadingModal&&null!=this.loadingModal&&this.loadingModal.close()},this.messageModal=function(b,c,d){var e={message:function(){return c},title:function(){return b},save:function(){return d}};a.open({templateUrl:"/assets/js/modal/MessageModal/view.html",controller:"MessageModalCtrl",size:"lg",resolve:e})},this.openCustomerRegistrationModal=function(b,c){var d={fctToExecute:function(){return b},fctToExecuteParams:function(){return c}};a.open({templateUrl:"/assets/js/modal/CustomerRegistrationModal/view.html",controller:"CustomerRegistrationModalCtrl",size:"lg",resolve:d})},this.openBusinessRegistrationModal=function(){a.open({templateUrl:"/assets/js/modal/BusinessRegistrationModal/view.html",controller:"BusinessRegistrationModalCtrl",size:"lg"})},this.openEditProfileModal=function(){a.open({templateUrl:"/assets/js/modal/EditProfileModal/view.html",controller:"EditProfileModalCtrl",size:"l"})},this.openLoginModal=function(b,c,d){var e={fctToExecute:function(){return b},fctToExecuteParams:function(){return c},helpMessage:function(){return d}};a.open({templateUrl:"/assets/js/modal/LoginModal/view.html",controller:"LoginModalCtrl",size:"l",resolve:e})},this.openHelpModal=function(b){var c={message:function(){return b}};a.open({templateUrl:"/assets/js/modal/HelpModal/view.html",controller:"HelpModalCtrl",size:"sm",resolve:c})},this.openCalculatorModal=function(b){var c={setResult:function(){return function(a){b(a)}}};a.open({templateUrl:"/assets/js/modal/Calculator/view.html",controller:"CalculatorModalCtrl",size:"sm",resolve:c})},this.openEditPasswordModal=function(){a.open({templateUrl:"/assets/js/modal/ChangePassword/view.html",controller:"ChangePasswordModalCtrl",size:"l"})},this.openEditCustomerInterest=function(){a.open({templateUrl:"/assets/js/modal/EditCustomerInterestModal/view.html",controller:"EditCustomerInterestModalCtrl",size:"lg"})},this.addressModal=function(b,c,d,e){var f={dto:function(){return c},addName:function(){return b},isBusiness:function(){return d},callback:function(){return e}};a.open({templateUrl:"/assets/js/modal/AddressModal/view.html",controller:"AddressModalCtrl",size:"l",resolve:f})},this.openForgotPasswordModal=function(b){var c={email:function(){return b}};a.open({templateUrl:"/assets/js/modal/ForgotPasswordModal/view.html",controller:"ForgotPasswordModalCtrl",size:"l",resolve:c})},this.openPromotionModal=function(b,c,d){var e={dto:function(){return b},business:function(){return c},callback:function(){return d}};a.open({templateUrl:"/assets/js/modal/PromotionModal/view.html",controller:"PromotionModalCtrl",size:"lg",resolve:e})},this.openBusinessNotificationModal=function(b,c,d){var e={dto:function(){return b},business:function(){return c},callback:function(){return d}};a.open({templateUrl:"/assets/js/modal/BusinessNotificationModal/view.html",controller:"BusinessNotificationModalCtrl",size:"lg",resolve:e})},this.openOneFieldModal=function(b,c){var d={field:function(){return b},callback:function(){return c}};a.open({templateUrl:"/assets/js/modal/OneFieldModal/view.html",controller:"OneFieldModalCtrl",size:"l",resolve:d})},this.galleryModal=function(b,c){var d={image:function(){return b},images:function(){return c}};a.open({templateUrl:"/assets/js/modal/GalleryModal/view.html",controller:"GalleryModalCtrl",windowClass:"modal-gallery-content",size:"lg",resolve:d})},this.interestSelection=function(b,c){var d={listInterest:function(){return b},callback:function(){return c}};a.open({templateUrl:"/assets/js/modal/mobile/InterestSelectionModal/view.html",controller:"InterestSelectionModalCtrl",size:"l",resolve:d})},this.openSla=function(b,c){var d={title:function(){return b},url:function(){return c}};a.open({templateUrl:"/assets/js/modal/IframeModal/view.html",controller:"iframeModalCtrl",size:"lg",resolve:d})},this.successAndShare=function(b,c){var d={businessId:function(){return b},publicationId:function(){return c}};a.open({templateUrl:"/assets/js/modal/ConfirmAndShareModal/view.html",controller:"ConfirmAndShareModalCtrl",size:"l",resolve:d,backdrop:!0})},this.resizeImageMobileModal=function(b,c){var d={params:function(){return b},save:function(){return c}};a.open({templateUrl:"/assets/js/modal/ResizeImageMobileModal/view.html",controller:"ResizeImageMobileModalCtrl",size:"l",resolve:d})},this.openClaimBusiness=function(b,c){var d={business:function(){return b},callback:function(){return c}};a.open({templateUrl:"/assets/js/modal/admin/ConfirmClaimModal/view.html",controller:"ConfirmClaimModalCtrl",size:"l",resolve:d})},this.openCreationBusiness=function(){a.open({templateUrl:"/assets/js/modal/BusinessCreationModal/view.html",controller:"BusinessCreationModalCtrl",size:"l"})}}]),myApp.service("promotionService",["$http","$flash","$rootScope",function(a,b,c){this.add=function(c,d,e){a({method:"POST",url:"/rest/promotion",headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){null!=d&&d(a)}).error(function(a,c){b.error(a.message),null!=e&&e(a,c)})},this.edit=function(c,d,e){a({method:"PUT",url:"/rest/promotion/"+c.id,headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){null!=d&&d(a)}).error(function(a,c){b.error(a.message),null!=e&&e(a,c)})}}]),myApp.service("geolocationService",["$rootScope","geolocation","$http","accountService","$timeout","$window",function(a,b,c,d,e,f){this.position=null,this.currentPosition=null,this.geoPositionAlreadyComputed=!1;var g=this;this.sharePosition=!1,this.getPositionWithoutNull=function(){return null==this.position?{}:this.position},f.navigator&&f.navigator.geolocation&&0==this.geoPositionAlreadyComputed&&f.navigator.geolocation.getCurrentPosition(function(b){g.currentPosition={x:b.coords.latitude,y:b.coords.longitude},h(),g.sharePosition=!0,this.geoPositionAlreadyComputed=!0,e(function(){a.$broadcast("POSITION_CHANGED")},1)},function(){},{maximumAge:3e5,timeout:2e3});var h=function(){null==d.getMyself()||null==d.getMyself().selectedAddress?g.position=angular.copy(g.currentPosition):g.position={x:d.getMyself().selectedAddress.posx,y:d.getMyself().selectedAddress.posy}};e(function(){h()},1),a.$watch(function(){return null!=d.model.myself?d.model.myself.selectedAddress:null},function(a,b){h()}),this.getLocationText=function(){return null==d.getMyself()||null==d.getMyself().selectedAddress?null!=this.currentPosition?"currentPosition":"default":d.getMyself().selectedAddress.name}}]),myApp.service("businessNotificationService",["$http","$flash","$rootScope",function(a,b,c){this.REFRESH_BUSINESS_NOTIFICAITON="REFRESH_BUSINESS_NOTIFICAITON";var d=this;this.add=function(e,f,g){a({method:"POST",url:"/rest/businessNotification",headers:"Content-Type:application/json;charset=utf-8",data:e}).success(function(a,b){null!=f&&f(a),c.$broadcast(d.REFRESH_BUSINESS_NOTIFICAITON)}).error(function(a,c){b.error(a.message),null!=g&&g(a,c)})},this.edit=function(e,f,g){a({method:"PUT",url:"/rest/businessNotification/"+e.id,headers:"Content-Type:application/json;charset=utf-8",data:e}).success(function(a,b){null!=f&&f(a),c.$broadcast(d.REFRESH_BUSINESS_NOTIFICAITON)}).error(function(a,c){b.error(a.message),null!=g&&g(a,c)})}}]),myApp.service("addressService",["$flash","$http","geolocationService",function(a,b,c){this.testAddress=function(c,d,e){b({method:"POST",url:"/rest/address/test",headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){null!=d&&d(a.value)}).error(function(b,c){a.error(b.message),null!=e&&e(b,c)})},this.distance=function(d,e,f){b({method:"POST",url:"/rest/address/distance/"+d,headers:"Content-Type:application/json;charset=utf-8",data:c.getPositionWithoutNull()}).success(function(a,b){null!=e&&e(a)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.changeAddress=function(c,d,e){b({method:"PUT",url:"/rest/address/current",headers:"Content-Type:application/json;charset=utf-8",data:{addressName:c}}).success(function(a,b){null!=d&&d(a)}).error(function(b,c){a.error(b.message),null!=e&&e(b,c)})}}]),myApp.service("followService",["$flash","$http",function(a,b){this.model={myself:null},this.setNotification=function(c,d,e,f){var g={sendNotification:d,businessId:c};b({method:"POST",url:"/rest/follow/notification",headers:"Content-Type:application/json;charset=utf-8",data:g}).success(function(a,b){null!=e&&e(a.value)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.addFollow=function(c,d,e,f){var g={follow:c,businessId:d};b({method:"POST",url:"/rest/follow",headers:"Content-Type:application/json;charset=utf-8",data:g}).success(function(a,b){null!=e&&e(a.value)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})},this.getFollows=function(c,d){b({method:"GET",url:"/rest/follow",headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,b){null!=c&&c(a.list)}).error(function(b,c){a.error(b.message),null!=d&&d(b,c)})}}]),myApp.service("searchService",["$http","$flash","$rootScope","geolocationService","$q",function(a,b,c,d,e){this.currentSearch="",this.canceler=null,this["default"]=function(c,f,g){console.log("search default : "+c),null!=this.canceler&&($,this.canceler.resolve()),this.canceler=e.defer(),a({method:"POST",url:"/rest/search/publication/default/"+c,headers:"Content-Type:application/json; charset=utf-8",dataType:"json",data:d.getPositionWithoutNull(),timeout:this.canceler.promise}).success(function(a,b){null!=f&&f(a.list)}).error(function(a,c){null!=a&&b.error(a.message),null!=g&&g(a,c)})},this.searchByStringLittle=function(c,f,g){console.log("search by string little : "+c),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"POST",url:"/rest/search/text/little",headers:"Content-Type:application/json;charset=utf-8",data:{search:c,position:d.getPositionWithoutNull()},timeout:this.canceler.promise}).success(function(a,b){null!=f&&f(a)}).error(function(a,c){null!=a&&b.error(a.message),null!=g&&g(a,c)})},this.searchByString=function(c,f,g,h){console.log("search by string : "+f+"/"+c),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"POST",url:"/rest/search/text",headers:"Content-Type:application/json;charset=utf-8",data:{page:c,search:f,position:d.getPositionWithoutNull()},timeout:this.canceler.promise}).success(function(a,b){null!=g&&g(a)}).error(function(a,c){null!=a&&b.error(a.message),null!=h&&h(a,c)})},this.byFollowed=function(c,f,g){console.log("search by follow : "+c),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"POST",url:"/rest/search/publication/followed/"+c,headers:"Content-Type:application/json;charset=utf-8",data:d.getPositionWithoutNull(),timeout:this.canceler.promise}).success(function(a,b){null!=f&&f(a.list)}).error(function(a,c){null!=a&&b.error(a.message),null!=g&&g(a,c)})},this.byFollowedAndInterest=function(c,f,g,h){console.log("search by follow and interest : "+c+"/"+f),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"POST",
url:"/rest/search/publication/followed/interest/"+f+"/"+c,headers:"Content-Type:application/json;charset=utf-8",data:d.getPositionWithoutNull(),timeout:this.canceler.promise}).success(function(a,b){null!=g&&g(a.list)}).error(function(a,c){null!=a&&b.error(a.message),null!=h&&h(a,c)})},this.byBusiness=function(c,d,f,g){console.log("search by business : "+c+"/"+d),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"GET",url:"/rest/search/publication/business/"+d+"/"+c,headers:"Content-Type:application/json;charset=utf-8",timeout:this.canceler.promise}).success(function(a,b){console.log("success"),null!=f&&f(a.list)}).error(function(a,c){console.log("error"),null!=a&&b.error(a.message),null!=g&&g(a,c)})},this.byBusinessArchived=function(c,d,f,g){console.log("search by business archived : "+c+"/"+d),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"GET",url:"/rest/search/publication/business/archive/"+d+"/"+c,headers:"Content-Type:application/json;charset=utf-8",timeout:this.canceler.promise}).success(function(a,b){null!=f&&f(a.list)}).error(function(a,c){null!=a&&b.error(a.message),null!=g&&g(a,c)})},this.byBusinessPrevisualization=function(c,d,f,g){console.log("search by business previsualization : "+c+"/"+d),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"GET",url:"/rest/search/publication/business/previsualization/"+d+"/"+c,headers:"Content-Type:application/json;charset=utf-8",timeout:this.canceler.promise}).success(function(a,b){null!=f&&f(a.list)}).error(function(a,c){null!=a&&b.error(a.message),null!=g&&g(a,c)})},this.byInterest=function(c,f,g,h){console.log("search by interst : "+c+"/"+f),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"POST",url:"/rest/search/publication/interest/"+f+"/"+c,headers:"Content-Type:application/json;charset=utf-8",data:d.getPositionWithoutNull(),timeout:this.canceler.promise}).success(function(a,b){null!=g&&g(a.list)}).error(function(a,c){null!=a&&b.error(a.message),null!=h&&h(a,c)})},this.nearBusiness=function(c,f){console.log("search near business"),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"POST",url:"/rest/search/business/near",headers:"Content-Type:application/json;charset=utf-8",data:d.getPositionWithoutNull(),timeout:this.canceler.promise}).success(function(a,b){null!=c&&c(a.list)}).error(function(a,c){null!=a&&b.error(a.message),null!=f&&f(a,c)})},this.nearBusinessByInterest=function(c,f,g){console.log("search near business by interest"),null!=this.canceler&&this.canceler.resolve(),this.canceler=e.defer(),a({method:"POST",url:"/rest/search/business/near/interest/"+c,headers:"Content-Type:application/json;charset=utf-8",data:d.getPositionWithoutNull(),timeout:this.canceler.promise}).success(function(a,b){null!=f&&f(a.list)}).error(function(a,c){null!=a&&b.error(a.message),null!=g&&g(a,c)})},this.lastOnes=function(c,e,f){a({method:"POST",url:"/rest/search/publication/lastOnes/"+c,headers:"Content-Type:application/json;charset=utf-8",data:d.getPositionWithoutNull()}).success(function(a,b){null!=e&&e(a.list)}).error(function(a,c){null!=a&&b.error(a.message),null!=f&&f(a,c)})}}]),myApp.service("searchBarService",["$timeout","$rootScope",function(a,b){this.currentSearch="",this.searchCriteria=data.searchCriterias;var c=this,d=!1;this.displaySearchResult=!0,this.setCurrentSearch=function(b){c.displaySearchResult=!1,this.currentSearch=b,a(function(){c.displaySearchResult=!0},1)},b.$watch(function(){return c.searchCriteria},function(b,e){if(!d&&b!=e){d=!0,c.currentSearch="";var f=!0;for(var g in c.searchCriteria)c.searchCriteria[g].selected===!0&&(f?f=!1:c.currentSearch+="|",c.currentSearch+=c.searchCriteria[g].key);f||(c.currentSearch+=":",$(".search-bar").focus()),a(function(){d=!1},1)}},!0),b.$watch(function(){return c.currentSearch},function(b,e){if(!d&&null!=b&&""!=b){d=!0;for(var f in c.searchCriteria)c.searchCriteria[f].selected=!1;if(-1!=c.currentSearch.indexOf(":")){var g=c.currentSearch.split(":")[0].split("|");for(var f in c.searchCriteria){var h=!1;for(var i in g)g[i]==c.searchCriteria[f].key&&(c.searchCriteria[f].selected=!0,h=!0)}}a(function(){d=!1},1)}})}]),myApp.service("publicationService",["$http","$flash","geolocationService",function(a,b,c){this["delete"]=function(c,d,e){return a({method:"DELETE",url:"/rest/publication/"+c.id,headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,b){return null!=d?d(a):void 0}).error(function(a,c){return b.error(a.message),null!=e?e(a,c):void 0})},this.loadByIds=function(d,e,f){return a({method:"POST",url:"/rest/publication/ids/"+d,headers:"Content-Type:application/json;charset=utf-8",data:c.getPositionWithoutNull()}).success(function(a,b){return console.log("SUCCESS"),console.log(a),null!=e?e(a.list):void 0}).error(function(a,c){return console.log("ERROR"),b.error(a.message),null!=f?f(a,c):void 0})}}]),myApp.service("constantService",function(){this.compareNumber=function(a,b){return parseFloat(a)===parseFloat(b)}}),myApp.service("contactService",["$flash","$http",function(a,b){this.contact=function(c,d,e){b({method:"POST",url:"/rest/contact",headers:"Content-Type:application/json;charset=utf-8",data:c}).success(function(a,b){null!=d&&d(a)}).error(function(b,c){a.error(b.message),null!=e&&e(b,c)})}}]),myApp.service("fileService",["$flash","$http",function(a,b){this.uploadFile64=function(c,d,e,f){var g={image:d,name:c};b({method:"POST",url:"/rest/file64",headers:"Content-Type:application/json;charset=utf-8",data:g}).success(function(a,b){null!=e&&e(a)}).error(function(b,c){a.error(b.message),null!=f&&f(b,c)})}}]),myApp.service("imageService",function(){this.resizeImage=function(a,b,c){return this.cropImage(a,b,c)},this.cropImage=function(a,b,c){var d=document.createElement("img");d.setAttribute("src",a);var e=d,f=0==b||0==c,g=b/e.width,h=c/e.height,i=f?Math.min(g,h):Math.max(g,h),j=document.createElement("canvas");j.width=b?b:Math.round(e.width*i),j.height=c?c:Math.round(e.height*i),j.getContext("2d").scale(i,i);var k,l;k=.5*(e.width*i-j.width),l=.5*(e.height*i-j.height),j.getContext("2d").drawImage(e,-(k/i),-(l/i));var m=j.toDataURL();return m}}),myApp.service("mapService",["$http","$flash",function(a,b){this.loadMapDataBusiness=function(c,d){return a({method:"GET",url:"/rest/map/business",headers:"Content-Type:application/json;charset=utf-8"}).success(function(a,b){return null!=c?c(a.list):void 0}).error(function(a,c){return b.error(a.message),null!=d?d(a,c):void 0})}}]),angular.module("app").run(["$templateCache",function(a){"use strict";a.put("js/directive/admin/donutChart/template.html","<div><div id={{id}}></div></div>"),a.put("js/directive/component/businessList/_template.html",'<div class=publication-list><div ng-show="getInfo().loading===true" class=loading><img src="/assets/images/big_loading.gif"></div><div ng-show="getInfo().loading!=true && businesses.length == 0">{{\'--.list.nothing\' | translateText}}</div><div ng-repeat="business in businesses" class=publication-box ng-class="{\'publication-followed\':business.following === true}" ng-click=click()><table class=publication-header><tr><td rowspan=2><div class=publication-business-illustration><img ng-click="navigateTo(\'/business/\'+business.id)" ng-src="{{business.illustration | image}}"></div></td><td class=publication-header-business><div ng-click="navigateTo(\'/business/\'+business.id)" class="publication-bordered-bottom-hover publication-bordered-bottom"><span class=publication-main-title><i ng-show="business.following === true" class="gling-icon gling-icon gling-icon-bell"></i> {{business.name}}</span></div></td></tr><tr><td class=publication-header-title><div class="publication-bubble publication-bordered"><i class="gling-icon gling-icon-earth"></i> {{business.distance / 1000 | number:2}} km</div><div class="publication-bubble publication-bordered"><span>{{business.address.street}}<br>{{business.address.zip}}, {{business.address.city}}</span></div></td></tr></table><div class=publication-body><div class=publication-data ng-hide="business.description == null"><div class=publication-data-body><category-line-ctrl ng-info={categories:business.categories}></category-line-ctrl><span ng-bind-html="business.description | text : descriptionLimit"></span> <span ng-show="business.description.length > descriptionLimitBase && descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000" class=link>{{\'--.textReuction.seeMore\' | translateText}}</span> <span ng-show="business.description.length > descriptionLimitBase && descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase" class=link>{{\'--.textReuction.seeLess\' | translateText}}</span></div></div></div><follow-widget-ctrl ng-info={displayText:true,business:business}></follow-widget-ctrl></div></div>'),a.put("js/directive/component/businessList/template.html",'<div class=publication-list><div class=loading ng-show="getInfo().loading===true"><img src=/assets/images/big_loading.gif></div><div ng-show="getInfo().loading!=true &amp;&amp; businesses.length == 0">{{\'--.list.nothing\' | translateText}}</div><div class=publication-box ng-class="{\'publication-followed\':business.following === true}" ng-click=click() ng-repeat="business in businesses"><table class=publication-header><tr><td rowspan=2><div class=publication-business-illustration><img ng-click="navigateTo(\'/business/\'+business.id)" ng-src="{{business.illustration | image}}"></div></td><td class=publication-header-business><div class="publication-bordered-bottom-hover publication-bordered-bottom" ng-click="navigateTo(\'/business/\'+business.id)"><span class=publication-main-title><i class="gling-icon gling-icon gling-icon-bell" ng-show="business.following === true"></i> {{business.name}}</span></div></td></tr><tr><td class=publication-header-title><div class="publication-bubble publication-bordered"><i class="gling-icon gling-icon-earth"></i><span>{{business.distance / 1000 | number:2}} km</span></div><div class="publication-bubble publication-bordered"><span>{{business.address.street}}<br>{{business.address.zip}},{{business.address.city}}</span></div></td></tr></table><div class=publication-body><div class=publication-data ng-hide="business.description == null"><div class=publication-data-body><category-line-ctrl ng-info={categories:business.categories}></category-line-ctrl><span ng-bind-html="business.description | text : descriptionLimit"></span><span class=link ng-show="business.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000">{{\'--.textReuction.seeMore\' | translateText}}</span><span class=link ng-show="business.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase">{{\'--.textReuction.seeLess\' | translateText}}</span></div></div></div><follow-widget-ctrl ng-info={displayText:true,business:business}></follow-widget-ctrl></div></div>'),a.put("js/directive/component/businessListMobile/_template.html",'<div class=publication-list-mobile><div ng-show="loading===true" class=loading><img src="/assets/images/big_loading.gif"></div><div ng-show="loading!=true && publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><div ng-hide="loading===true" ng-repeat="business in businesses" class=publication-box-mobile ng-click=click()><table class=publication-header ng-click="navigateTo(\'/business/\'+business.id)"><tr><td><img class=illustration ng-src="{{business.illustration | image}}"></td><td><div class=title-box><div class=title><i ng-show="business.following === true" class="gling-icon gling-icon gling-icon-bell"></i> {{business.name}}</div><div class=title-data>{{business.address.street}}<br>{{business.address.zip}}, {{business.address.city}} - {{business.distance / 1000 | number:2}} km</div></div></td></tr></table><div class=business-list-business-data><category-line-ctrl ng-info={categories:business.categories}></category-line-ctrl><span ng-bind-html="business.description | text : descriptionLimit"></span> <span ng-show="business.description.length > descriptionLimitBase && descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000" class=link>{{\'--.textReuction.seeMore\' | translateText}}</span> <span ng-show="business.description.length > descriptionLimitBase && descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase" class=link>{{\'--.textReuction.seeLess\' | translateText}}</span></div><follow-widget-ctrl ng-info={displayText:true,business:business}></follow-widget-ctrl></div></div>'),a.put("js/directive/component/businessListMobile/template.html",'<div class=publication-list-mobile><div class=loading ng-show="loading===true"><img src=/assets/images/big_loading.gif></div><div ng-show="loading!=true &amp;&amp; publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><div class=publication-box-mobile ng-click=click() ng-repeat="business in businesses" ng-hide="loading===true"><div><table class=publication-header ng-click="navigateTo(\'/business/\'+business.id)"><tr><td><img class=illustration ng-src="{{business.illustration | image}}"></td><td><div class=title-box><div class=title><i class="gling-icon gling-icon-bell" ng-show="business.following === true"></i>{{business.name}}</div><div class=title-data>{{business.address.street}}<br>{{business.address.zip}},{{business.address.city}} -{{business.distance / 1000 | number:2}} km</div></div></td></tr></table><div class=business-list-business-data><category-line-ctrl ng-info={categories:business.categories}></category-line-ctrl><span ng-bind-html="business.description | text : descriptionLimit"></span><span class=link ng-show="business.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000">{{\'--.textReuction.seeMore\' | translateText}}</span><span class=link ng-show="business.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase">{{\'--.textReuction.seeLess\' | translateText}}</span></div><follow-widget-ctrl ng-info={displayText:true,business:business}></follow-widget-ctrl></div></div></div>'),a.put("js/directive/component/categoryLine/_template.html",'<div><table class=category-line-tree><tr ng-repeat="(catLev1Key,lev2) in getInfo().categories"><td style="white-space: nowrap"><a ng-click=searchCat(catLev1Key)>{{catLev1Key | translateText}}</a> <span class=transition>>></span></td><td><table><tr ng-repeat="(catLev2Key, lev3) in lev2"><td style="white-space: nowrap"><a ng-click=searchCat(catLev2Key)>{{catLev2Key | translateText}}</a> <span class=transition>>></span></td><td><span ng-repeat="catLev3 in lev3"><span class=transition ng-show="$index>0">/</span> <a ng-click=searchCat(catLev3.translationName)>{{catLev3.translationName | translateText}}</a></span></td></tr></table></td></tr></table></div>'),a.put("js/directive/component/categoryLine/template.html",'<div><table class=category-line-tree><tr ng-repeat="(catLev1Key,lev2) in getInfo().categories"><td ng-show="getInfo().level1!==false" style="white-space: nowrap"><a ng-click=searchCat(catLev1Key)>{{catLev1Key | translateText}}</a><span class=transition>>></span></td><td><table><tr ng-repeat="(catLev2Key, lev3) in lev2"><td style="white-space: nowrap"><a ng-click=searchCat(catLev2Key)>{{catLev2Key | translateText}}</a><span class=transition>>></span></td><td><span ng-repeat="catLev3 in lev3"><span class=transition ng-show=$index&gt;0>/</span><a ng-click=searchCat(catLev3.translationName)>{{catLev3.translationName | translateText}}</a></span></td></tr></table></td></tr></table></div>'),a.put("js/directive/component/facebookSharePublication/_template.html",'<div><a class="facebookShare ng-isolate-scope" ng-click=share()><div class=facebookButton><div class=pluginButton><div class=pluginButtonContainer><div class=pluginButtonImage><button type=button><i class="pluginButtonIcon img sp_plugin-button-2x sx_plugin-button-2x_favblue"></i></button></div><span class=pluginButtonLabel>Share</span></div></div></div></a></div>'),a.put("js/directive/component/facebookSharePublication/template.html",'<div><a class="facebookShare ng-isolate-scope" ng-click=share()><div class=facebookButton><div class=pluginButton><div class=pluginButtonContainer><div class=pluginButtonImage><button type=button><i class="pluginButtonIcon img sp_plugin-button-2x sx_plugin-button-2x_favblue"></i></button></div><span class=pluginButtonLabel>Share</span></div></div></div></a></div>'),a.put("js/directive/component/followWidget/_template.html",'<div class=follow-widget><div class=follow-text ng-hide="getInfo().displayText===true"><div>{{\'--.followWidget.follow\' | translateText:null:true}}</div></div><div ng-hide="getInfo().displayText===true" class=follow-widget-icon ng-click=follow()><button><span class="gling-icon gling-icon gling-icon-bell selected" ng-show=getInfo().business.following></span> <span class="gling-icon gling-icon gling-icon-bell2" ng-hide=getInfo().business.following></span></button></div><div class=follow-text ng-show="getInfo().displayText===true"><div class=link ng-hide=getInfo().business.following ng-click=follow()>{{\'--.followWidget.followBusiness\' | translateText}}</div><div class=link ng-show=getInfo().business.following ng-click=follow()>{{\'--.followWidget.stopFollowBusiness\' | translateText}}</div></div></div>'),a.put("js/directive/component/followWidget/template.html",'<div class=follow-widget><div class=icon-text ng-hide="getInfo().displayText===true"><div>{{\'--.followWidget.follow\' | translateText:null:true}}</div></div><div class=follow-widget-icon ng-click=follow() ng-hide="getInfo().displayText===true"><button><span class="gling-icon gling-icon-bell selected" ng-show=getInfo().business.following></span><span class="gling-icon gling-icon-bell2" ng-hide=getInfo().business.following></span></button></div><button class="gling-button-dark gling-button-dark-little follow-text" ng-show="getInfo().displayText===true"><div ng-click=follow() ng-hide=getInfo().business.following><i class="gling-icon gling-icon-bell2"></i><span>{{\'--.followWidget.follow\' | translateText}}</span></div><div ng-show=getInfo().business.following ng-click=follow()><i class="gling-icon gling-icon-bell"></i><span>{{\'--.followWidget.stopFollow\' | translateText}}</span></div></button></div>'),a.put("js/directive/component/followWidgetForPublication/_template.html",'<div class=follow-widget><div class=follow-text ng-hide="getInfo().displayText===true"><div>{{\'--.followWidget.follow\' | translateText:null:true}}</div></div><div ng-hide="getInfo().displayText===true" class=follow-widget-icon ng-click=follow()><button><span class="gling-icon gling-icon gling-icon-bell selected" ng-show=getInfo().publication.following></span> <span class="gling-icon gling-icon gling-icon-bell2" ng-hide=getInfo().publication.following></span></button></div><div class=follow-text ng-show="getInfo().displayText===true"><div class=link ng-hide=getInfo().publication.following ng-click=follow()>{{\'--.followWidget.followBusiness\' | translateText}}</div><div class=link ng-show=getInfo().publication.following ng-click=follow()>{{\'--.followWidget.stopFollowBusiness\' | translateText}}</div></div></div>'),a.put("js/directive/component/followWidgetForPublication/template.html",'<div class=follow-widget><div class=follow-text ng-hide="getInfo().displayText===true"><div>{{\'--.followWidget.follow\' | translateText:null:true}}</div></div><div class=follow-widget-icon ng-click=follow() ng-hide="getInfo().displayText===true"><button><span class="gling-icon gling-icon-bell selected" ng-show=getInfo().publication.following></span><span class="gling-icon gling-icon-bell2">"(ng-hide="getInfo().publication.following")</span></button></div><button class="gling-button-dark gling-button-dark-little follow-text" ng-show="getInfo().displayText===true"><div ng-click=follow() ng-hide=getInfo().publication.following><i class="gling-icon gling-icon-bell2"></i><span>{{\'--.followWidget.followBusiness\' | translateText}}</span></div><div ng-show=getInfo().publication.following ng-click=follow()><i class="gling-icon gling-icon-bell"></i><span>{{\'--.followWidget.stopFollowBusiness\' | translateText}}</span></div></button></div>'),a.put("js/directive/component/gallery/_template.html",'<div class=gallery-component><div ng-repeat="image in getInfo().images"><img ng-click=openGallery(image) class=gallery-picture ng-src="{{image | image}}"></div></div>'),a.put("js/directive/component/gallery/template.html",'<div class=gallery-component><div ng-repeat="image in getInfo().images"><img class=gallery-picture ng-click=openGallery(image) ng-src="{{image | image}}"></div></div>'),a.put("js/directive/component/googleMapWidget/_template.html","<div ng-click=toGoogleMap() class=google-map-container><div class=google-disabled-panel ng-show=getInfo().staticMap></div><div id=map class=map></div></div>"),a.put("js/directive/component/googleMapWidget/template.html","<div class=google-map-container ng-click=toGoogleMap()><div class=google-disabled-panel ng-show=getInfo().staticMap></div><div class=map id=map></div></div>"),a.put("js/directive/component/map/businessForMap/_template.html",'<div class=business-for-map><img class=business-illustration ng-src="{{getInfo().business.illustration | image}}"> <i ng-show="getInfo().business.following === true" class="gling-icon gling-icon gling-icon-bell"></i> <span class=title>{{getInfo().business.name}}</span><category-line-ctrl ng-info={categories:getInfo().business.categories}></category-line-ctrl>{{getInfo().business.address.street}}, {{getInfo().business.address.zip}} {{getInfo().business.address.city}}<br><follow-widget-ctrl ng-info={displayText:true,business:getInfo().business}></follow-widget-ctrl><br><span class="link see-more" ng-click="goTo(\'/business/\'+getInfo().business.id)">Voir plus...</span></div>'),a.put("js/directive/component/map/businessForMap/template.html","<div class=business-for-map><div class=business-header ng-click=\"goTo('/business/'+getInfo().business.id)\"><img class=business-illustration ng-src=\"{{getInfo().business.illustration | image}}\"><i class=\"gling-icon gling-icon-bell\" ng-show=\"getInfo().business.following === true\"></i><span class=title>{{getInfo().business.name}}</span><span class=currently-open ng-show=\"getInfo().business.attendance == 'LIGHT' || getInfo().business.attendance == 'MODERATE' || getInfo().business.attendance == 'IMPORTANT'\">{{'--.schedule.isOpenNow' | translateText}}</span></div><category-line-ctrl ng-info={categories:getInfo().business.categories}>{{getInfo().business.address.street}},{{getInfo().business.address.zip}}{{getInfo().business.address.city}}<br></category-line-ctrl><br><follow-widget-ctrl ng-info={displayText:true,business:getInfo().business}></follow-widget-ctrl></div>"),a.put("js/directive/component/map/publicationForMap/_template.html","<div></div>"),a.put("js/directive/component/map/publicationForMap/template.html","<div></div>"),a.put("js/directive/component/publicationList/_template.html",'<div class=publication-list><div ng-show="getInfo().loading!=true && publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><publication-widget-ctrl ng-repeat="publication in publications" ng-info={publication:publication,changeInterestCallback:changeInterestCallback}></publication-widget-ctrl><div ng-show="getInfo().loading===true" class=loading><img src="/assets/images/big_loading.gif"></div></div>'),a.put("js/directive/component/publicationList/template.html",'<div class=publication-list><div ng-show="getInfo().loading!=true &amp;&amp; publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><publication-widget-ctrl ng-repeat="publication in publications" ng-info={publication:publication,changeInterestCallback:changeInterestCallback}></publication-widget-ctrl><div class=loading ng-show="getInfo().loading===true"><img src=/assets/images/big_loading.gif></div></div>'),a.put("js/directive/component/publicationListForBusiness/_template.html",'<div class=publication-list><div ng-show="loading!=true && publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><div ng-repeat="publication in publications" id=publication{{publication.id}} class=publication-box ng-click=click()><div ng-class="{\'publication-followed\':publication.following === true,\'archived\': isArchived(publication)}"><div><div class=publication-badge ng-show="publication.type === \'PROMOTION\'">- {{publication.offPercent * 100 | number:0}}%</div><div class=publication-header-without-business-version><i ng-show="getInterestClass(publication)!=null" class="publication-interest gling-icon {{getInterestClass(publication)}} publication-color-background"></i><div class="publication-bubble publication-box-price publication-bordered" ng-show="publication.type==\'PROMOTION\' && publication.originalPrice!=null"><span>{{(publication.originalPrice * (1.0 - publication.offPercent)) | number:2}} €</span> <span>{{publication.originalPrice | number:2}} €</span></div><span style="margin-right: 80px" class=publication-main-title>{{publication.title}}</span></div><div class=publication-body><div class=publication-data ng-class="{\'publication-body-two\':publication.pictures.length>0}" ng-hide="descriptionIsEmpty(publication) === true"><div ng-show="publication.type === \'PROMOTION\'" ng-class="{\'publication-bordered-bottom\' : publication.description !=null && publication.description.length > 0}" class=publication-data-header><div class="glyphicon gling-icon gling-icon gling-icon-calendar"></div><span><div>{{\'--.publication.promotionTo\' | translateText}}</div><div>&lt; {{publication.endDate | date:\'dd MMM yyyy HH:mm\'}}</div></span></div><div class=publication-data-body ng-show="publication.description !=null && publication.description.length > 0"><span ng-bind-html="publication.description | text : publication.descriptionLimit"></span> <span ng-show="publication.description.length > descriptionLimitBase && publication.descriptionLimit==descriptionLimitBase" ng-click="publication.descriptionLimit = 10000" class=link>{{\'--.textReuction.seeMore\' | translateText}}</span> <span ng-show="publication.description.length > descriptionLimitBase && publication.descriptionLimit!=descriptionLimitBase" ng-click="publication.descriptionLimit = descriptionLimitBase" class=link>{{\'--.textReuction.seeLess\' | translateText}}</span></div></div><div class="publication-gallery publication-body-two publication-body-two-right" ng-show="publication.pictures.length > 1 && descriptionIsEmpty(publication) === true" ng-click=openGallery(publication.pictures[1],publication)><img ng-src="{{publication.pictures[1] | image}}" class={{getIllustrationClass(publication.pictures[1])}}><div class=publication-illustration-plus-icon><span>+{{publication.pictures.length - 2}}</span></div></div><div class=publication-gallery ng-class="{\'publication-body-two\':descriptionIsEmpty(publication) !== true,\'publication-body-two-right\':descriptionIsEmpty(publication) !== true}" ng-show="publication.pictures.length > 0 " ng-click=openGallery(publication.pictures[0],publication)><img ng-src="{{publication.pictures[0] | image}}" class={{getIllustrationClass(publication.pictures[0])}}><div ng-show="publication.pictures.length > 1 && descriptionIsEmpty(publication) !== true" class=publication-illustration-plus-icon><span>+{{publication.pictures.length - 1}}</span></div></div></div><div class=publication-footer><button ng-show=getInfo().displayRemoveIcon type=button style="margin-left: 25px" class="btn gling-button-dark" ng-click=removePublication(publication)>{{\'--.generic.remove\' | translateText}}</button> <button ng-show=getInfo().displayRemoveIcon type=button style="margin-left: 25px" class="btn gling-button-dark" ng-click=editPublication(publication)>{{\'--.generic.edit\' | translateText}}</button><div class="publication-footer-date publication-bordered-bottom">{{\'--.publication.publishTo\' | translateText}} {{publication.startDate | date:\'dd MMM yyyy\'}}</div><div class=publication-footer-facebook><facebook-share-publication-ctrl ng-info={businessId:publication.businessId,publicationId:publication.id}></facebook-share-publication-ctrl></div></div></div></div><img class=archived-icon ng-show=isArchived(publication) src="/assets/images/publication/archived.png"></div><div ng-show="loading===true" class=loading><img src="/assets/images/big_loading.gif"></div></div>'),a.put("js/directive/component/publicationListForBusiness/template.html",'<div class=publication-list><div ng-show="loading!=true &amp;&amp; publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><div class="publication-box publication-box-without-business-data" ng-click=click() ng-repeat="publication in publications" id=publication{{publication.id}}><div ng-class="{\'publication-followed\':publication.following === true,\'archived\': isArchived(publication)}"><div><div class=publication-badge ng-show="publication.type === \'PROMOTION\' ">- {{publication.offPercent * 100 | number:0}}%</div><div class=publication-header-without-business-version><i class="publication-interest gling-icon publication-color-background" ng-show="getInterestClass(publication)!=null" ng-class=getInterestClass(publication)></i><div class="publication-bubble publication-box-price publication-bordered" ng-show="publication.type==\'PROMOTION\' &amp;&amp; publication.originalPrice!=null"><span>{{(publication.originalPrice * (1.0 - publication.offPercent)) | number:2}} €</span><span>{{publication.originalPrice | number:2}} €</span></div><span class=publication-main-title>{{publication.title}}</span></div><div class=publication-body><div class=publication-data ng-class="{\'publication-body-two\':publication.pictures.length&gt;0}" ng-hide="descriptionIsEmpty(publication) === true"><div class=publication-data-header ng-show="publication.type === \'PROMOTION\'" ng-class="{\'publication-bordered-bottom\' : publication.description !=null &amp;&amp; publication.description.length &gt; 0}"><div class="glyphicon gling-icon gling-icon-calendar"></div><span><div>{{\'--.publication.promotionTo\' | translateText}}</div><div>&lt; {{publication.endDate | date:\'dd MMM yyyy HH:mm\'}}</div></span></div><div class=publication-data-body ng-show="publication.description !=null &amp;&amp; publication.description.length &gt; 0"><span ng-bind-html="publication.description | text : publication.descriptionLimit"></span><span class=link ng-show="publication.description.length &gt; descriptionLimitBase &amp;&amp; publication.descriptionLimit==descriptionLimitBase" ng-click="publication.descriptionLimit = 10000">{{\'--.textReuction.seeMore\' | translateText}}</span><span class=link ng-show="publication.description.length &gt; descriptionLimitBase &amp;&amp; publication.descriptionLimit!=descriptionLimitBase" ng-click="publication.descriptionLimit = descriptionLimitBase">{{\'--.textReuction.seeLess\' | translateText}}</span></div></div><div class="publication-gallery publication-body-two publication-body-two-right" ng-show="publication.pictures.length &gt; 1 &amp;&amp; descriptionIsEmpty(publication) === true" ng-click=openGallery(publication.pictures[1],publication)><img ng-src="{{publication.pictures[1] | image}}" class={{getIllustrationClass(publication.pictures[1])}}><div class=publication-illustration-plus-icon ng-show=publication.pictures.length&gt;2><span>+{{publication.pictures.length - 2}}</span></div></div><div class=publication-gallery ng-show="publication.pictures.length &gt; 0 " ng-class="{\'publication-body-two\':descriptionIsEmpty(publication) !== true,\'publication-body-two-right\':descriptionIsEmpty(publication) !== true}" ng-click=openGallery(publication.pictures[0],publication)><img ng-src="{{publication.pictures[0] | image}}" class={{getIllustrationClass(publication.pictures[0])}}><div class=publication-illustration-plus-icon ng-show="publication.pictures.length &gt; 1 &amp;&amp; descriptionIsEmpty(publication) !== true"><span>+{{publication.pictures.length - 1}}</span></div></div></div><div class=publication-footer><button class="btn gling-button-dark" ng-show=getInfo().displayRemoveIcon ng-click=removePublication(publication) style="margin-left: 25px" type=button>{{\'--.generic.remove\' | translateText}}</button><button class="btn gling-button-dark" ng-show=getInfo().displayRemoveIcon ng-click=editPublication(publication) style="margin-left: 25px" type=button>{{\'--.generic.edit\' | translateText}}</button><div class="publication-footer-date publication-bordered-bottom">{{\'--.publication.publishTo\' | translateText}} {{publication.startDate | date:\'dd MMM yyyy\'}}</div><div class=publication-footer-facebook><facebook-share-publication-ctrl ng-info={businessId:publication.businessId,publicationId:publication.id}></facebook-share-publication-ctrl></div></div></div></div><img class=archived-icon ng-show=isArchived(publication) src=/assets/images/publication/archived.png></div><div class=loading ng-show="loading===true"><img src=/assets/images/big_loading.gif></div></div>'),
a.put("js/directive/component/publicationListMobile/_template.html",'<div class=publication-list-mobile><div ng-show="getInfo().loading!=true && publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><publication-widget-ctrl ng-repeat="publication in publications" ng-info={publication:publication,changeInterestCallback:changeInterestCallback}></publication-widget-ctrl><div ng-show="getInfo().loading===true" class=loading><img src="/assets/images/big_loading.gif"></div></div>'),a.put("js/directive/component/publicationListMobile/template.html",'<div class=publication-list-mobile><div ng-show="getInfo().loading!=true &amp;&amp; publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><publication-widget-ctrl ng-repeat="publication in publications" ng-info={publication:publication,changeInterestCallback:changeInterestCallback}></publication-widget-ctrl><div class=loading ng-show="getInfo().loading===true"><img src=/assets/images/big_loading.gif></div></div>'),a.put("js/directive/component/publicationListMobileForBusiness/_template.html",'<div class=publication-list-mobile><div ng-show="loading!=true && publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><div ng-repeat="publication in publications" class="publication-box-mobile publication-publication" ng-click=click()><div ng-class="{\'archived\': isArchived(publication)}"><div><div class=publication-header><i ng-show="getInterestClass(publication)!=null" class="publication-interest gling-icon {{getInterestClass(publication)}}"></i><div class=title-box><div class=title-data>{{\'--.publication.publishTo\' | translateText}} {{publication.startDate | date:\'dd MMM yyyy\'}}</div></div></div><div class=publication-title>{{publication.title}}</div><div class=publication-body><div class=publication-data ng-class="{\'publication-body-two\':publication.pictures.length>0}" ng-hide="descriptionIsEmpty(publication) === true"><table ng-show="publication.type === \'PROMOTION\'" class=publication-data-promotion><tr><td>- {{publication.offPercent * 100 | number:0}}%</td><td class=publication-box-price ng-show="publication.originalPrice!=null"><span>{{(publication.originalPrice * (1.0 - publication.offPercent)) | number:2}} €</span> <span>{{publication.originalPrice | number:2}} €</span></td><td>&gt; {{publication.endDate | date:\'dd MMM HH:mm\'}}</td></tr></table><div class=publication-data-body ng-show="publication.description !=null && publication.description.length > 0"><span ng-bind-html="publication.description | text : publication.descriptionLimit"></span> <span ng-show="publication.description.length > descriptionLimitBase && publication.descriptionLimit==descriptionLimitBase" ng-click="publication.descriptionLimit = 10000" class=link>{{\'--.textReuction.seeMore\' | translateText}}</span> <span ng-show="publication.description.length > descriptionLimitBase && publication.descriptionLimit!=descriptionLimitBase" ng-click="publication.descriptionLimit = descriptionLimitBase" class=link>{{\'--.textReuction.seeLess\' | translateText}}</span></div></div><div class=publication-gallery ng-class="{\'publication-body-two\':descriptionIsEmpty(publication) !== true,\'publication-body-two-right\':descriptionIsEmpty(publication) !== true}" ng-show="publication.pictures.length > 0 " ng-click=openGallery(publication.pictures[0],publication)><div class=publication-gallery-image-box><img ng-src="{{publication.pictures[0] | image}}" class=publication-illustration><div ng-show="publication.pictures.length > 1" class=publication-illustration-plus-icon><span>+{{publication.pictures.length - 1}}</span></div></div></div></div><div class=publication-footer><div class=publication-footer-facebook><facebook-share-publication-ctrl ng-info={businessId:publication.businessId,publicationId:publication.id}></facebook-share-publication-ctrl></div></div></div></div><img class=archived-icon ng-show=isArchived(publication) src="/assets/images/publication/archived_little.png"></div><div ng-show="loading===true" class=loading><img src="/assets/images/big_loading.gif"></div></div>'),a.put("js/directive/component/publicationListMobileForBusiness/template.html",'<div class=publication-list-mobile><div ng-show="loading!=true &amp;&amp; publications.length == 0">{{\'--.list.nothing\' | translateText}}</div><div class="publication-box-mobile publication-publication" ng-click=click() ng-repeat="publication in publications"><div ng-class="{\'archived\': isArchived(publication)}"><div><div class=publication-header><i class="publication-interest gling-icon" ng-show="getInterestClass(publication)!=null" ng-class=getInterestClass(publication)></i><div class=title-box><div class=title-data>{{\'--.publication.publishTo\' | translateText}}{{publication.startDate | date:\'dd MMM yyyy\'}}</div></div></div><div class=publication-title>{{publication.title}}</div><div class=publication-body><div class=publication-data ng-class="{\'publication-body-two\':publication.pictures.length&gt;0}" ng-hide="descriptionIsEmpty(publication) === true"><table class=publication-data-promotion ng-show="publication.type === \'PROMOTION\'"><tr><td>- {{publication.offPercent * 100 | number:0}}%</td><td class=publication-box-price ng-show="publication.originalPrice!=null"><span>{{(publication.originalPrice * (1.0 - publication.offPercent)) | number:2}} €</span><span>{{publication.originalPrice | number:2}} €</span></td><td>&gt; {{publication.endDate | date:\'dd MMM HH:mm\'}}</td></tr></table><div class=publication-data-body ng-show="publication.description !=null &amp;&amp; publication.description.length &gt; 0"><span ng-bind-html="publication.description | text : publication.descriptionLimit"></span></div></div></div><span class=link ng-show="publication.description.length &gt; descriptionLimitBase &amp;&amp; publication.descriptionLimit==descriptionLimitBase" ng-click="publication.descriptionLimit = 10000">{{\'--.textReuction.seeMore\' | translateText}}</span><span class=link ng-show="publication.description.length &gt; descriptionLimitBase &amp;&amp; publication.descriptionLimit!=descriptionLimitBase" ng-click="publication.descriptionLimit = descriptionLimitBase">{{\'--.textReuction.seeLess\' | translateText}}<div class=publication-gallery ng-show="publication.pictures.length &gt; 0 " ng-class="{\'publication-body-two\':descriptionIsEmpty(publication) !== true,\'publication-body-two-right\':descriptionIsEmpty(publication) !== true}" ng-click=openGallery(publication.pictures[0],publication)><div class=publication-gallery-image-box><img class=publication-illustration ng-src="{{publication.pictures[0] | image}}"><div class=publication-illustration-plus-icon ng-show="publication.pictures.length &gt; 1"><span>+{{publication.pictures.length - 1}}</span></div></div></div></span><div class=publication-footer><div class=publication-footer-facebook><facebook-share-publication-ctrl ng-info={businessId:publication.businessId,publicationId:publication.id}></facebook-share-publication-ctrl></div></div></div></div><img class=archived-icon ng-show=isArchived(publication) src=/assets/images/publication/archived_little.png></div><div class=loading ng-show="loading===true"><img src=/assets/images/big_loading.gif></div></div>'),a.put("js/directive/component/publicationWidget/_template.html",'<div class=publication-box ng-class="{\'publication-followed\':getInfo().publication.following === true}" ng-click=click()><div ng-show="getInfo().previsualization === true" class=publication-box-previsualization></div><div class=publication-badge ng-show="getInfo().publication.type === \'PROMOTION\'">- {{getInfo().publication.offPercent * 100 | number:0}}%</div><table class=publication-header><tr><td rowspan=2><div class=publication-business-illustration><img ng-click="navigateTo(\'/business/\'+getInfo().publication.businessId)" ng-src="{{getInfo().publication.businessIllustration | image}}"></div></td><td class=publication-header-business><div class=publication-bordered-bottom><span class="publication-main-title clickable" ng-click="navigateTo(\'/business/\'+getInfo().publication.businessId)"><i ng-show="getInfo().publication.following === true" class="gling-icon gling-icon gling-icon-bell"></i> {{getInfo().publication.businessName}}</span></div></td></tr><tr><td class=publication-header-title><div class=publication-header-title-top><i ng-show="getInterestClass(getInfo().publication)!=null" class="publication-interest gling-icon {{getInterestClass(getInfo().publication)}} publication-color-background"></i> {{getInfo().publication.title}}</div><div class="publication-bubble publication-bordered"><i class="glyphicon gling-icon gling-icon gling-icon-earth"></i> {{getInfo().publication.distance / 1000 | number:2}} km</div><div class="publication-bubble publication-box-price publication-bordered" ng-show="getInfo().publication.type==\'PROMOTION\' && getInfo().publication.originalPrice!=null"><span>{{(getInfo().publication.originalPrice * (1.0 - getInfo().publication.offPercent)) | number:2}} €</span> <span>{{getInfo().publication.originalPrice | number:2}} €</span></div></td></tr></table><div class=publication-body><div class=publication-data ng-class="{\'publication-body-two\':getInfo().publication.pictures.length>0}" ng-hide="descriptionIsEmpty(getInfo().publication) === true"><div ng-show="getInfo().publication.type === \'PROMOTION\'" ng-class="{\'publication-bordered-bottom\' : getInfo().publication.description !=null && getInfo().publication.description.length > 0}" class=publication-data-header><div class="glyphicon gling-icon gling-icon gling-icon-calendar"></div><span><div>{{\'--.publication.promotionTo\' | translateText}}</div><div>&lt; {{getInfo().publication.endDate | date:\'dd MMM HH:mm\'}}</div></span></div><div class=publication-data-body ng-show="getInfo().publication.description !=null && getInfo().publication.description.length > 0"><span ng-bind-html="getInfo().publication.description | text : descriptionLimit"></span> <span ng-show="getInfo().publication.description.length > descriptionLimitBase && descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000" class=link>{{\'--.textReuction.seeMore\' | translateText}}</span> <span ng-show="getInfo().publication.description.length > descriptionLimitBase && descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase" class=link>{{\'--.textReuction.seeLess\' | translateText}}</span></div></div><div class="publication-gallery publication-body-two publication-body-two-right" ng-show="getInfo().publication.pictures.length > 1 && descriptionIsEmpty(getInfo().publication) === true" ng-click=openGallery(getInfo().publication.pictures[1],getInfo().publication)><img ng-src="{{getInfo().publication.pictures[1] | image}}" class={{getIllustrationClass(getInfo().publication.pictures[1])}}><div class=publication-illustration-plus-icon><span>+{{getInfo().publication.pictures.length - 2}}</span></div></div><div class=publication-gallery ng-class="{\'publication-body-two\':descriptionIsEmpty(getInfo().publication) !== true,\'publication-body-two-right\':descriptionIsEmpty(getInfo().publication) !== true}" ng-show="getInfo().publication.pictures.length > 0 " ng-click=openGallery(getInfo().publication.pictures[0],getInfo().publication)><img ng-src="{{getInfo().publication.pictures[0] | image}}" class={{getIllustrationClass(getInfo().publication.pictures[0])}}><div ng-show="getInfo().publication.pictures.length > 1 && descriptionIsEmpty(getInfo().publication) !== true" class=publication-illustration-plus-icon><span>+{{getInfo().publication.pictures.length - 1}}</span></div></div></div><div class=publication-footer><div class="publication-footer-date publication-bordered-bottom">{{\'--.publication.publishTo\' | translateText}} {{getInfo().publication.startDate | date:\'dd MMM yyyy\'}}</div><div class=publication-footer-facebook><facebook-share-publication-ctrl ng-info={businessId:getInfo().publication.businessId,publicationId:getInfo().publication.id}></facebook-share-publication-ctrl></div><div class=publication-following-widget><follow-widget-for-publication-ctrl ng-info={displayText:true,publication:getInfo().publication}></follow-widget-for-publication-ctrl></div></div></div>'),a.put("js/directive/component/publicationWidget/template.html",'<div class=publication-box ng-class="{\'publication-followed\':getInfo().publication.following === true}" ng-click=click()><div class=publication-box-previsualization ng-show="getInfo().previsualization === true"></div><div class=publication-badge ng-show="getInfo().publication.type === \'PROMOTION\'">- {{getInfo().publication.offPercent * 100 | number:0}}%</div><table class=publication-header><tr><td rowspan=2><div class=publication-business-illustration><img ng-click="navigateTo(\'/business/\'+getInfo().publication.businessId)" ng-src="{{getInfo().publication.businessIllustration | image}}"></div></td><td class=publication-header-business><div class=publication-bordered-bottom><span class="publication-main-title clickable" ng-click="navigateTo(\'/business/\'+getInfo().publication.businessId)"><i class="gling-icon gling-icon-bell" ng-show="getInfo().publication.following === true"></i><span>{{getInfo().publication.businessName}}</span></span></div></td></tr><tr><td class=publication-header-title><div class=publication-header-title-top><i class="publication-color-background publication-interest gling-icon" ng-show="getInterestClass(getInfo().publication)!=null" ng-class=getInterestClass(getInfo().publication)></i><span>{{getInfo().publication.title}}</span></div><div class="publication-bubble publication-bordered"><i class="glyphicon gling-icon gling-icon-earth"></i><span>{{getInfo().publication.distance /1000 | number:2}} km</span></div><div class="publication-bubble publication-box-price publication-bordered" ng-show="getInfo().publication.type==\'PROMOTION\' &amp;&amp; getInfo().publication.originalPrice!=null"><span>{{(getInfo().publication.originalPrice * (1.0 - getInfo().publication.offPercent)) | number:2}} €</span><span>{{getInfo().publication.originalPrice | number:2}} €</span></div></td></tr></table><div class=publication-body><div class=publication-data ng-class="{\'publication-body-two\':getInfo().publication.pictures.length&gt;0}" ng-hide="descriptionIsEmpty(getInfo().publication) === true"><div class=publication-data-header ng-show="getInfo().publication.type === \'PROMOTION\'" ng-class="{\'publication-bordered-bottom\' : getInfo().publication.description !=null &amp;&amp; getInfo().publication.description.length &gt; 0}"><div class="glyphicon gling-icon gling-icon-calendar"></div><span><div>{{\'--.publication.promotionTo\' | translateText}}</div><div>&lt; {{getInfo().publication.endDate | date:\'dd MMM HH:mm\'}}</div></span></div><div class=publication-data-body ng-show="getInfo().publication.description !=null &amp;&amp; getInfo().publication.description.length &gt; 0"><span ng-bind-html="getInfo().publication.description | text : descriptionLimit"></span><span class=link ng-show="getInfo().publication.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000">{{\'--.textReuction.seeMore\' | translateText}}</span><span class=link ng-show="getInfo().publication.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase">{{\'--.textReuction.seeLess\' | translateText}}</span></div></div><div class="publication-gallery publication-body-two publication-body-two-right" ng-show="getInfo().publication.pictures.length &gt; 1 &amp;&amp; descriptionIsEmpty(getInfo().publication) === true" ng-click=openGallery(getInfo().publication.pictures[1],getInfo().publication)><img ng-src="{{getInfo().publication.pictures[1] | image}}" ng-class=getIllustrationClass(getInfo().publication.pictures[1])><div class=publication-illustration-plus-icon ng-show=getInfo().publication.pictures.length&gt;2><span>+{{getInfo().publication.pictures.length - 2}}</span></div></div><div class=publication-gallery ng-show="getInfo().publication.pictures.length &gt; 0 " ng-class="{\'publication-body-two\':descriptionIsEmpty(getInfo().publication) !== true,\'publication-body-two-right\':descriptionIsEmpty(getInfo().publication) !== true}" ng-click=openGallery(getInfo().publication.pictures[0],getInfo().publication)><img ng-src="{{getInfo().publication.pictures[0] | image}}" ng-class=getIllustrationClass(getInfo().publication.pictures[0])><div class=publication-illustration-plus-icon ng-show="getInfo().publication.pictures.length &gt; 1 &amp;&amp; descriptionIsEmpty(getInfo().publication) !== true"><span>+{{getInfo().publication.pictures.length - 1}}</span></div></div></div><div class=publication-footer><div class="publication-footer-date publication-bordered-bottom">{{\'--.publication.publishTo\' | translateText}}{{getInfo().publication.startDate | date:\'dd MMM yyyy\'}}</div><div class=publication-footer-facebook><facebook-share-publication-ctrl ng-info={businessId:getInfo().publication.businessId,publicationId:getInfo().publication.id}></facebook-share-publication-ctrl></div><div class=publication-following-widget><follow-widget-for-publication-ctrl ng-info={displayText:true,publication:getInfo().publication}></follow-widget-for-publication-ctrl></div></div></div>'),a.put("js/directive/component/publicationWidgetForMobile/_template.html",'<div class="publication-box-mobile publication-publication"><div><div ng-show="getInfo().previsualization === true" class=publication-box-previsualization></div><table class=publication-header><tr><td ng-click="navigateTo(\'/business/\'+getInfo().publication.businessId)"><img class=illustration ng-src="{{getInfo().publication.businessIllustration | image}}"></td><td><div class=title-box><div class=title ng-click="navigateTo(\'/business/\'+getInfo().publication.businessId)"><i ng-show="getInfo().publication.following === true" class="gling-icon gling-icon gling-icon-bell"></i> {{getInfo().publication.businessName}}</div><div class=title-data>{{\'--.publication.publishTo\' | translateText}} {{getInfo().publication.startDate | date:\'dd MMM yyyy\'}} - {{getInfo().publication.distance / 1000 | number:2}} km</div></div></td><td><i ng-show="getInterestClass(getInfo().publication)!=null" class="publication-interest gling-icon {{getInterestClass(getInfo().publication)}}"></i></td></tr></table><div class=publication-title>{{getInfo().publication.title}}</div><div class=publication-body><div class=publication-data ng-class="{\'publication-body-two\':getInfo().publication.pictures.length>0}" ng-hide="descriptionIsEmpty(getInfo().publication) === true"><table ng-show="getInfo().publication.type === \'PROMOTION\'" class=publication-data-promotion><tr><td>- {{getInfo().publication.offPercent * 100 | number:0}}%</td><td class=publication-box-price ng-show="getInfo().publication.originalPrice!=null"><span>{{(getInfo().publication.originalPrice * (1.0 - getInfo().publication.offPercent)) | number:2}} €</span> <span>{{getInfo().publication.originalPrice | number:2}} €</span></td><td>&gt; {{getInfo().publication.endDate | date:\'dd MMM HH:mm\'}}</td></tr></table><div class=publication-data-body ng-show="getInfo().publication.description !=null && getInfo().publication.description.length > 0"><span ng-bind-html="getInfo().publication.description | text : getInfo().publication.descriptionLimit"></span> <span ng-show="getInfo().publication.description.length > descriptionLimitBase && getInfo().publication.descriptionLimit==descriptionLimitBase" ng-click="getInfo().publication.descriptionLimit = 10000" class=link>{{\'--.textReuction.seeMore\' | translateText}}</span> <span ng-show="getInfo().publication.description.length > descriptionLimitBase && getInfo().publication.descriptionLimit!=descriptionLimitBase" ng-click="getInfo().publication.descriptionLimit = descriptionLimitBase" class=link>{{\'--.textReuction.seeLess\' | translateText}}</span></div></div><div class=publication-gallery ng-class="{\'publication-body-two\':descriptionIsEmpty(getInfo().publication) !== true,\'publication-body-two-right\':descriptionIsEmpty(getInfo().publication) !== true}" ng-show="getInfo().publication.pictures.length > 0 " ng-click=openGallery(getInfo().publication.pictures[0],getInfo().publication)><div class=publication-gallery-image-box><img ng-src="{{getInfo().publication.pictures[0] | image}}" class=publication-illustration><div ng-show="getInfo().publication.pictures.length > 1" class=publication-illustration-plus-icon><span>+{{getInfo().publication.pictures.length - 1}}</span></div></div></div></div><div class=publication-footer><div class=publication-footer-facebook><facebook-share-publication-ctrl ng-info={businessId:getInfo().publication.businessId,publicationId:getInfo().publication.id}></facebook-share-publication-ctrl></div><follow-widget-for-publication-ctrl ng-info={displayText:true,publication:getInfo().publication}></follow-widget-for-publication-ctrl></div></div></div>'),a.put("js/directive/component/publicationWidgetForMobile/template.html",'<div class="publication-box-mobile publication-publication"><div><div class=publication-box-previsualization ng-show="getInfo().previsualization === true"></div><table class=publication-header><tr><td ng-click="navigateTo(\'/business/\'+getInfo().publication.businessId)"><img class=illustration ng-src="{{getInfo().publication.businessIllustration | image}}"></td><td><div class=title-box><div class=title ng-click="navigateTo(\'/business/\'+getInfo().publication.businessId)"><i class="gling-icon gling-icon gling-icon-bell" ng-show="getInfo().publication.following === true"></i>{{getInfo().publication.businessName}}</div><div class=title-data>{{\'--.publication.publishTo\' | translateText}}{{getInfo().publication.startDate | date:\'dd MMM yyyy\'}} -{{getInfo().publication.distance / 1000 | number:2}} km</div></div></td><td><i class="publication-interest gling-icon {{getInterestClass(getInfo().publication)}}" ng-show="getInterestClass(getInfo().publication)!=null"></i></td></tr></table><div class=publication-title>{{getInfo().publication.title}}</div><div class=publication-body><div class=publication-data ng-class="{\'publication-body-two\':getInfo().publication.pictures.length&gt;0}" ng-hide="descriptionIsEmpty(getInfo().publication) === true"><table class=publication-data-promotion ng-show="getInfo().publication.type === \'PROMOTION\'"><tr><td>- {{getInfo().publication.offPercent * 100 | number:0}}%</td><td class=publication-box-price ng-show="getInfo().publication.originalPrice!=null"><span>{{(getInfo().publication.originalPrice * (1.0 - getInfo().publication.offPercent)) | number:2}} €</span><span>{{getInfo().publication.originalPrice | number:2}} €</span></td><td>> {{getInfo().publication.endDate | date:\'dd MMM HH:mm\'}}</td></tr></table><div class=publication-data-body ng-show="getInfo().publication.description !=null &amp;&amp; getInfo().publication.description.length &gt; 0"><span ng-bind-html="getInfo().publication.description | text : getInfo().publication.descriptionLimit"></span><span class=link ng-show="getInfo().publication.description.length &gt; descriptionLimitBase &amp;&amp; getInfo().publication.descriptionLimit==descriptionLimitBase" ng-click="getInfo().publication.descriptionLimit = 10000">{{\'--.textReuction.seeMore\' | translateText}}</span><span class=link ng-show="getInfo().publication.description.length &gt; descriptionLimitBase &amp;&amp; getInfo().publication.descriptionLimit!=descriptionLimitBase" ng-click="getInfo().publication.descriptionLimit = descriptionLimitBase">{{\'--.textReuction.seeLess\' | translateText}}</span></div></div><div class=publication-gallery ng-show="getInfo().publication.pictures.length &gt; 0 " ng-class="{\'publication-body-two\':descriptionIsEmpty(getInfo().publication) !== true,\'publication-body-two-right\':descriptionIsEmpty(getInfo().publication) !== true}" ng-click=openGallery(getInfo().publication.pictures[0],getInfo().publication)><div class=publication-gallery-image-box><img class=publication-illustration ng-src="{{getInfo().publication.pictures[0] | image}}"><div class=publication-illustration-plus-icon ng-show="getInfo().publication.pictures.length &gt; 1"><span>+{{getInfo().publication.pictures.length - 1}}</span></div></div></div></div><div class=publication-footer><div class=publication-footer-facebook><facebook-share-publication-ctrl ng-info={businessId:getInfo().publication.businessId,publicationId:getInfo().publication.id}></facebook-share-publication-ctrl></div><follow-widget-for-publication-ctrl ng-info={displayText:true,publication:getInfo().publication}></follow-widget-for-publication-ctrl></div></div></div>'),a.put("js/directive/component/schedule/_template.html","<div class=schedule-form><div class=schedule-open ng-show=\"isOpenNow === true\">{{'--.schedule.isOpenNow' | translateText}}</div><table><tr><td></td><td ng-repeat=\"hour in hours\"><div class=hour-block-info><div>{{hour.text}}</div></div></td></tr><tr ng-repeat=\"day in days\" ng-show=\"sections[day].length >0\"><td>{{daysTranslation[day] | translateText}}</td><td ng-repeat=\"section in sections[day]\"><div class=hour-block ng-class=attendance_class[section.attendance] ng-mousedown=select(day,section) ng-mouseover=progress($event,day,section)></div></td></tr></table><div class=schedule-legend>{{'--.generic.legend' | translateText}}<div class=attendance-light>{{'--.schedule.light' | translateText}}</div><div class=attendance-moderate>{{'--.schedule.moderate' | translateText}}</div><div class=attendance-heavy>{{'--.schedule.heavy' | translateText}}</div><div class=attendance-appointment>{{'--.schedule.appointment' | translateText}}</div></div></div>"),a.put("js/directive/component/schedule/template.html","<div class=schedule-form><div class=schedule-open ng-show=\"isOpenNow === true\">{{'--.schedule.isOpenNow' | translateText}}</div><table><tr><td></td><td ng-repeat=\"hour in hours\"><div class=hour-block-info><div>{{hour.text}}</div></div></td></tr><tr ng-show=\"sections[day].length &gt;0\" ng-repeat=\"day in days\"><td>{{daysTranslation[day] | translateText}}</td><td ng-repeat=\"section in sections[day]\"><div class=hour-block ng-mouseover=progress($event,day,section) ng-class=attendance_class[section.attendance] ng-mousedown=select(day,section)></div></td></tr></table><div class=schedule-legend>{{'--.generic.legend' | translateText}}<div class=attendance-light>{{'--.schedule.light' | translateText}}</div><div class=attendance-moderate>{{'--.schedule.moderate' | translateText}}</div><div class=attendance-heavy>{{'--.schedule.heavy' | translateText}}</div><div class=attendance-appointment>{{'--.schedule.appointment' | translateText}}</div></div></div>"),a.put("js/directive/component/searchBar/_template.html",'<div class=search-container><input dir-bottom-arrow=down() dir-top-arrow=top() dir-enter=search() ng-model=searchBarService.currentSearch class="gling-button-light search-bar" placeholder="{{\'--.welcome.search\' | translateText}}"> <span ng-click=search() class="glyphicon glyphicon-search search-icon"></span><search-result-ctrl ng-info=searchResultParam></search-result-ctrl></div>'),a.put("js/directive/component/searchBar/template.html",'<div class=search-container><input dir-top-arrow=top() dir-enter=search() ng-model=searchBarService.currentSearch placeholder="{{\'--.welcome.search\' | translateText}}" class="gling-button-light search-bar" dir-bottom-arrow=down()><span class="glyphicon glyphicon-search search-icon" ng-click=search()></span><search-result-ctrl ng-info=searchResultParam></search-result-ctrl></div>'),a.put("js/directive/component/searchResult/_template.html",'<div id=searchContainer ng-show=getInfo().display class=search-result-box dir-bottom-arrow=down() dir-top-arrow=top()><div ng-show="getInfo().result.businesses.length ==0 && getInfo().result.publications.length == 0 && getInfo().result.categories.length == 0" class=search-result-nothing>{{\'--.search.nothing\' | translateText}}</div><div ng-hide="getInfo().result.businesses.length ==0 && getInfo().result.publications.length == 0 && getInfo().result.categories.length == 0" class=scrollable-content><div ng-show="getInfo().result.businesses.length > 0"><div ng-hide="getInfo().mobile === true" class=search-result-sub-title>{{\'--.search.business\' | translateText}}</div><div class="search-result-business search-result-content" ng-mouseenter=select(business.index) ng-click=goToBusiness(business) ng-class="{\'search-result-selected\':indexSelected==business.index}" ng-repeat="business in getInfo().result.businesses"><img ng-src="{{business.illustration | image}}"> {{business.name}}</div><div class=search-result-content ng-hide="getInfo().mobile === true" ng-click=seeAllBusiness() ng-mouseenter=select(seeMoreBusinessIndex) ng-class="{\'search-result-selected\':indexSelected==seeMoreBusinessIndex}"><button class="search-result-show-more link">{{\'--.search.business.seeMore\' | translateText}}</button></div></div><div ng-show="getInfo().result.publications.length >0"><div ng-hide="getInfo().mobile === true" class=search-result-sub-title>{{\'--.search.publication\' | translateText}}</div><table><tr class="search-result-publication search-result-content" ng-mouseenter=select(publication.index) ng-click=goToPublication(publication) ng-class="{\'search-result-selected\':indexSelected==publication.index}" ng-repeat="publication in getInfo().result.publications"><td><img ng-src="{{publication.pictures[0] | image}}"> {{publication.title}}</td><td><div class=search-result-publication-business><img ng-src="{{publication.businessIllustration | image}}"> {{publication.businessName}}</div></td></tr></table><div ng-hide="getInfo().mobile === true" ng-click=seeAllPublication() ng-mouseenter=select(seeMorePublicationIndex) class=search-result-content ng-class="{\'search-result-selected\':indexSelected==seeMorePublicationIndex}"><div class="search-result-show-more link">{{\'--.search.publication.seeMore\' | translateText}}</div></div></div><div ng-show="getInfo().result.categories.length > 0"><div ng-hide="getInfo().mobile === true" class=search-result-sub-title>{{\'--.search.category\' | translateText}}</div><div class="search-result-category search-result-content" ng-mouseenter=select(category.index) ng-click=goToCategory(category) ng-class="{\'search-result-selected\':indexSelected==category.index}" ng-repeat="category in getInfo().result.categories">{{category.category.translationName}} <span class=transition ng-show="category.subCategory!=null">>></span> {{category.subCategory.translationName}} <span class=transition ng-show="category.subSubCategory!=null">>></span> {{category.subSubCategory.translationName}}</div><div ng-click=seeAllCategory() ng-hide="getInfo().mobile === true" class=search-result-content ng-mouseenter=select(seeMoreCategoryIndex) ng-class="{\'search-result-selected\':indexSelected==seeMoreCategoryIndex}"><div class="search-result-show-more link">{{\'--.search.category.seeMore\' | translateText}}</div></div></div><div class=search-result-content ng-click=seeAll() ng-mouseenter=select(seeMoreIndex) ng-class="{\'search-result-selected\':indexSelected==seeMoreIndex}"><div class="search-result-show-more link">{{\'--.search.seeMore\' | translateText}}</div></div></div></div>'),a.put("js/directive/component/searchResult/template.html",'<div class=search-result-box dir-top-arrow=top() ng-show=getInfo().display id=searchContainer dir-bottom-arrow=down()><div class=search-result-nothing ng-show="getInfo().result.businesses.length ==0 &amp;&amp; getInfo().result.publications.length == 0 &amp;&amp; getInfo().result.categories.length == 0">{{\'--.search.nothing\' | translateText}}</div><div class=scrollable-content ng-hide="getInfo().result.businesses.length ==0 &amp;&amp; getInfo().result.publications.length == 0 &amp;&amp; getInfo().result.categories.length == 0"><div ng-show="getInfo().result.businesses.length &gt; 0"><div class=search-result-sub-title ng-hide="getInfo().mobile === true">{{\'--.search.business\' | translateText}}</div><div class="search-result-business search-result-content" ng-click=goToBusiness(business) ng-class="{\'search-result-selected\':getInfo().indexSelected==business.index}" ng-mouseenter=select(business.index) ng-repeat="business in getInfo().result.businesses"><img ng-src="{{business.illustration | image}}"><span>{{business.name}}</span></div><div class=search-result-content ng-click=seeAllBusiness() ng-class="{\'search-result-selected\':getInfo().indexSelected==seeMoreBusinessIndex}" ng-mouseenter=select(seeMoreBusinessIndex) ng-hide="getInfo().mobile === true"><button class="search-result-show-more link">{{\'--.search.business.seeMore\' | translateText}}</button></div></div><div ng-show="getInfo().result.publications.length &gt;0"><div class=search-result-sub-title ng-hide="getInfo().mobile === true">{{\'--.search.publication\' | translateText}}</div><table><tr class="search-result-publication search-result-content" ng-click=goToPublication(publication) ng-class="{\'search-result-selected\':getInfo().indexSelected==publication.index}" ng-mouseenter=select(publication.index) ng-repeat="publication in getInfo().result.publications"><td><img ng-src="{{publication.pictures[0] | image}}"><span>{{publication.title}}</span></td><td><div class=search-result-publication-business><img ng-src="{{publication.businessIllustration | image}}"><span>{{publication.businessName}}</span></div></td></tr></table><div class=search-result-content ng-click=seeAllPublication() ng-class="{\'search-result-selected\':getInfo().indexSelected==seeMorePublicationIndex}" ng-mouseenter=select(seeMorePublicationIndex) ng-hide="getInfo().mobile === true"><div class="search-result-show-more link">{{\'--.search.publication.seeMore\' | translateText}}</div></div></div><div ng-show="getInfo().result.categories.length &gt; 0"><div class=search-result-sub-title ng-hide="getInfo().mobile === true">{{\'--.search.category\' | translateText}}</div><div class="search-result-category search-result-content" ng-click=goToCategory(category) ng-class="{\'search-result-selected\':getInfo().indexSelected==category.index}" ng-mouseenter=select(category.index) ng-repeat="category in getInfo().result.categories">{{category.category.translationName}}<span class=transition ng-show="category.subCategory!=null">>></span>{{category.subCategory.translationName}}<span class=transition ng-show="category.subSubCategory!=null">>></span>{{category.subSubCategory.translationName}}</div><div class=search-result-content ng-click=seeAllCategory() ng-class="{\'search-result-selected\':getInfo().indexSelected==seeMoreCategoryIndex}" ng-mouseenter=select(seeMoreCategoryIndex) ng-hide="getInfo().mobile === true"><div class="search-result-show-more link">{{\'--.search.category.seeMore\' | translateText}}</div></div></div><div class=search-result-content ng-click=seeAll() ng-class="{\'search-result-selected\':getInfo().indexSelected==seeMoreIndex}" ng-mouseenter=select(seeMoreIndex)><div class="search-result-show-more link">{{\'--.search.seeMore\' | translateText}}</div></div></div></div>'),
a.put("js/directive/component/toTop/_template.html",'<div ng-click=toTop() ng-show="displayToTopButton === true" class=home-to-top><span class="glyphicon glyphicon-arrow-up"></span><br>{{\'--.generic.top\' | translateText}}</div>'),a.put("js/directive/component/toTop/template.html",'<div class=home-to-top ng-show="displayToTopButton === true" ng-click=toTop()><span class="glyphicon glyphicon-arrow-up"></span><br>{{\'--.generic.top\' | translateText}}</div>'),a.put("js/directive/field/dirFieldCheck/template.html",'<div class="input-text field_text row" ng-class="{\'error\' : displayError()===true,\'has-calculator\': getInfo().hasCalculator===true}" ng-hide="isActive() === false"><div class=form-group><label class="control-label col-md-3" ng-show=getInfo().fieldTitle>{{getInfo().fieldTitle | translateText}}</label><div class=col-md-6><div><input type=checkbox name={{getInfo().name}} ng-disabled=getInfo().disabled() ng-model=getInfo().field[getInfo().fieldName] ng-class="{input_number: getInfo().numbersOnly === \'integer\' || getInfo().numbersOnly === \'double\',\n                       \'money\':!!getInfo().money}" dir-focus-me=getInfo().focus() class=form-control-check></div></div><div class="col-md-3 errors" ng-show="displayError()===true">{{getInfo().validationMessage | translateText}}</div></div><div class="col-md-3 hidden-sm hidden-xs"></div><div class="col-md-6 help" ng-show="getInfo().details!=null">{{getInfo().details | translateText}}</div></div>'),a.put("js/directive/field/dirFieldDate/template.html",'<div class="row form-group has-feedback" ng-class="{\'error\' : displayError()===true}" ng-click=logField() ng-hide="isActive() === false"><div><label class="control-label col-md-3" ng-show=getInfo().fieldTitle>{{getInfo().fieldTitle | translateText}}</label><div class=col-md-6><div class=dropdown></div><a id={{id}} role=button data-toggle=dropdown data-target=# href="" class=dropdown-toggle><div class=input-group><input ng-disabled=getInfo().disabled() name={{getInfo().name}} ng-model=resultFormated class="form-control"> <span class=input-group-addon><i class="glyphicon glyphicon-calendar"></i></span></div><ul role=menu aria-labelledby=dLabel class="dropdown-menu date_input"><datetimepicker data-ng-model=result data-datetimepicker-config="{ dropdownSelector: \'{{idHtag}}\',minView:\'{{getInfo().minimalDelay}}\' }"></datetimepicker></ul></a></div><div ng-transclude></div><div class="col-md-3 errors" ng-show="displayError()===true">{{getInfo().validationMessage | translateText}}</div></div><div class="col-md-3 hidden-sm hidden-xs"></div><div class="col-md-6 help" ng-show="getInfo().details!=null">{{getInfo().details | translateText}}</div></div>'),a.put("js/directive/field/dirFieldDateSimple/template.html",'<div class="input-text field_text row" ng-class="{\'error\' : displayError()===true,\'has-calculator\': getInfo().hasCalculator===true}" ng-hide="isActive() === false"><div class=form-group><label class="control-label col-md-3" ng-show=getInfo().fieldTitle>{{getInfo().fieldTitle | translateText}}</label><div class=col-md-6><div>{{\'--.field.dateSimple.to\' | translateText}}<select ng-options="day as day | date:\'EEE dd MMM\' for day in days" ng-model=day style="min-width: 100px;margin-right: 20px;margin-left: 5px" ng-disabled=getInfo().disabled()></select>{{\'--.field.dateSimple.at\' | translateText}}<select ng-options="hour.value as hour.key for hour in hours" ng-model=hour style="min-width: 100px;margin-right: 20px;margin-left: 5px" ng-disabled=getInfo().disabled()></select></div></div><div class="col-md-3 errors" ng-show="displayError()===true">{{getInfo().validationMessage | translateText}}</div></div><div class="col-md-3 hidden-sm hidden-md"></div><div class="col-md-6 help" ng-show="getInfo().details!=null">{{getInfo().details | translateText}}</div></div>'),a.put("js/directive/field/dirFieldDocument/template.html",'<div class="input-text field_text row" ng-class="{\'error\' : displayError()===true,\'has-calculator\': getInfo().hasCalculator===true}" ng-hide="isActive() === false"><div class="form-group row"><label class="control-label col-md-3" ng-show=getInfo().fieldTitle>{{getInfo().fieldTitle |translateText}}</label><div ng-class="getInfo().fullSize==true?\'col-md-12\':\'col-md-6\'"><div style="text-align: center"><div><div ng-show="inDownload=== true &amp;&amp; percent != 100" class=document-question-progress-bar><div ng-style=style><spa></spa></div></div><div ng-show="inDownload=== true && percent != 100" class=document-question-progress-percentage>{{percent}} %</div><div ng-show="inDownload=== true && percent == 100">{{\'--.field.document.inTreatment\' | translateText}}</div><span class="btn btn-default btn-file field-document-btn" ng-hide="inDownload === true || getInfo().disabled()">{{((getInfo().field[getInfo().fieldName]!=null)?\'--.download.button.update\':\'--.download.button.new\') | translateText}} <input name="{{ id }}" type=file ng-file-select="onFileSelect($files)"></span><div ng-show="success && getInfo().disabled()!=true">{{\'--.field.document.success\' | translateText}}</div></div><img ng-show="  getInfo().field[getInfo().fieldName]!=null" ng-style={width:getInfo().posx,height:getInfo().posy} style="border:1px solid #999999;max-width: 850px" ng-src="{{getInfo().field[getInfo().fieldName] | image}}"></div></div><div class="col-md-3 errors" ng-show="displayError()===true">{{getInfo().validationMessage | translateText}}</div></div></div>'),a.put("js/directive/field/dirFieldImageMultipleResizable/template.html",'<div class="input-text field_text row field-image-multiple" ng-class="{\'error\' : displayError()===true,\'has-calculator\': getInfo().hasCalculator===true}" ng-hide="isActive() === false"><div class=modal-description ng-show="getInfo().help!=null">{{getInfo().help | translateText}}</div><div class=form-group><label class="control-label col-md-3" ng-show=getInfo().fieldTitle>{{getInfo().fieldTitle |translateText}}</label><div ng-class="getInfo().fullSize==true?\'col-md-12\':\'col-md-6\'"><div ng-class="{\'input-group\':!!getInfo().money}"><div ng-repeat="imageContainer in images" class=image-block-container><div class=image-block><div ng-show="imageContainer.percent>0 && imageContainer.percent < 100">{{imageContainer.percent}} %</div><div class=image-container><img ng-src="{{imageContainer.image}}"></div><div class="image-remove glyphicon glyphicon-remove" ng-click=remove(imageContainer)></div></div><button ng-click=fullSize(imageContainer.image)>Voir en taille réelle</button> <button ng-click=resize(imageContainer)>Recadrer</button> {{\'--.generic.comment\' | translateText}}<textarea ng-model=imageContainer.comment></textarea></div><div class="add-image-button image-block" ng-hide="getInfo().maxImage!=null && images.length>=getInfo().maxImage"><input id=a type=file ng-file-select="onFileSelect($files)"></div></div></div><div class="col-md-3 errors" ng-show="displayError()===true">{{getInfo().validationMessage | translateText}}</div></div></div>'),a.put("js/directive/field/dirFieldImageMutiple/template.html",'<div class="input-text field_text row field-image-multiple" ng-class="{\'error\' : displayError()===true,\'has-calculator\': getInfo().hasCalculator===true}" ng-hide="isActive() === false"><div class=modal-description ng-show="getInfo().help!=null">{{getInfo().help | translateText}}</div><div class=form-group><label class="control-label col-md-3" ng-show=getInfo().fieldTitle>{{getInfo().fieldTitle |translateText}}</label><div ng-class="getInfo().fullSize==true?\'col-md-12\':\'col-md-6\'"><div ng-class="{\'input-group\':!!getInfo().money}"><div ng-repeat="imageContainer in images" class=image-block-container><div class=image-block><div class=image-percentage ng-show="imageContainer.percent>0 && imageContainer.percent < 100">{{imageContainer.percent}} %</div><div ng-show="imageContainer.percent>0 && imageContainer.percent < 100" class=image-percentage-background style="width: {{imageContainer.percent}}%"></div><div ng-hide="imageContainer.percent>0 && imageContainer.percent < 100" class=image-container><img ng-src="{{imageContainer.image| image}}"></div><div class="image-remove glyphicon glyphicon-remove" ng-click=remove(imageContainer)></div></div>{{\'--.generic.comment\' | translateText}}<textarea ng-model=imageContainer.image.comment></textarea></div><div class="add-image-button image-block" ng-hide="getInfo().maxImage!=null && images.length>=getInfo().maxImage"><input name="{{ id }}" type=file ng-file-select="onFileSelect($files)"></div></div></div><div class="col-md-3 errors" ng-show="displayError()===true">{{getInfo().validationMessage | translateText}}</div></div></div>'),a.put("js/directive/field/dirFieldSelect/template.html",'<div class="input-text field_text row" ng-class="{\'error\' : displayError()===true,\'has-calculator\': getInfo().hasCalculator===true}" ng-hide="isActive() === false"><div class=form-group><label class="control-label col-md-3" ng-show=getInfo().fieldTitle>{{getInfo().fieldTitle | translateText}}</label><div class=col-md-6><div ng-class="{\'input-group\':!!getInfo().money}"><select ng-disabled=getInfo().disabled() name={{getInfo().name}} ng-model=getInfo().field[getInfo().fieldName] dir-focus-me=getInfo().focus() ng-options="option.key as option.value | translateText for option in getInfo().options" class=form-control></select></div></div><div class="col-md-3 errors" ng-show="displayError()===true">{{getInfo().validationMessage | translateText}}</div></div><div class="col-md-3 hidden-sm hidden-xs"></div><div class="col-md-6 help" ng-show="getInfo().details!=null">{{getInfo().details | translateText}}</div></div>'),a.put("js/directive/field/dirFieldText/template.html",'<div class="input-text field_text row" ng-class="{\'error\' : displayError()===true,\'has-calculator\': getInfo().hasCalculator===true}" ng-hide="isActive() === false"><div class=form-group><label class="control-label col-md-3" ng-show=getInfo().fieldTitle>{{getInfo().fieldTitle | translateText}}</label><div class=col-md-6><div ng-class="{\'input-group\':!!getInfo().money}"><button class="calculator btn btn-sm btn-default fa fa-calculator" ng-click=openCalculator()></button> <input type={{fieldType}} id={{getInfo().id}} name={{getInfo().name}} ng-disabled=getInfo().disabled() ng-model=getInfo().field[getInfo().fieldName] numbers-only={{getInfo().numbersOnly}} ng-class="{input_number: getInfo().numbersOnly === \'integer\' || getInfo().numbersOnly === \'double\',\n                       \'money\':!!getInfo().money}" placeholder={{getInfo().placeholder}} dir-focus-me=getInfo().focus() class=form-control ng-show="getInfo().fieldType != \'textarea\'" typeahead="c as c for c in getInfo().autoCompleteValue | filter:$viewValue | limitTo:10" typeahead-min-length="1"> <span ng-show=!!getInfo().money class=input-group-addon>{{getInfo().money}}</span></div></div><div class="col-md-3 errors" ng-show="displayError()===true">{{getInfo().validationMessage | translateText}}</div></div><div class="col-md-3 hidden-sm hidden-md"></div><div class="col-md-6 help" ng-show="getInfo().details!=null">{{getInfo().details | translateText}}</div></div>'),a.put("js/directive/field/dirFieldTextArea/template.html",'<div class="input-text field_text row" ng-class="{\'error\' : displayError()===true,\'has-calculator\': getInfo().hasCalculator===true}" ng-hide="isActive() === false"><div class=form-group><label class="control-label col-md-3" ng-show=getInfo().fieldTitle>{{getInfo().fieldTitle | translateText}}</label><div class=col-md-6><div><textarea name={{getInfo().name}} ng-disabled=getInfo().disabled() ng-model=getInfo().field[getInfo().fieldName] ng-class="{input_number: getInfo().numbersOnly === \'integer\' || getInfo().numbersOnly === \'double\',\n                       \'money\':!!getInfo().money}" placeholder={{getInfo().placeholder}} dir-focus-me=getInfo().focus() class=form-control></textarea></div></div><div class="col-md-3 errors" ng-show="displayError()===true">{{getInfo().validationMessage | translateText}}</div></div><div class="col-md-3 hidden-sm hidden-xs"></div><div class="col-md-6 help" ng-show="getInfo().details!=null">{{getInfo().details | translateText}}</div></div>'),a.put("js/directive/form/account/template.html",'<div class=form><dir-field-text ng-info=fields.firstname></dir-field-text><dir-field-text ng-info=fields.lastname></dir-field-text><dir-field-select ng-info=fields.gender></dir-field-select><dir-field-select ng-info=fields.language></dir-field-select><dir-field-text ng-info=fields.email></dir-field-text><dir-field-text ng-info=fields.password></dir-field-text><dir-field-text ng-info=fields.repeatPassword></dir-field-text><div ng-show="getInfo().updateMode!=true" ng-bind-html="\'--.registration.accept.condition\' | translateText | text"></div></div>'),a.put("js/directive/form/address/template.html","<div class=form><dir-field-select ng-info=fields.name></dir-field-select><dir-field-text ng-info=fields.customName></dir-field-text><dir-field-text ng-info=fields.street></dir-field-text><dir-field-text ng-info=fields.zip></dir-field-text><dir-field-text ng-info=fields.city></dir-field-text></div>"),a.put("js/directive/form/business/template.html","<div class=form><dir-field-text ng-info=fields.name></dir-field-text><dir-field-text ng-info=fields.vta></dir-field-text><dir-field-text-area ng-info=fields.description></dir-field-text-area><dir-field-text ng-info=fields.phone></dir-field-text><dir-field-text ng-info=fields.email></dir-field-text><dir-field-text ng-info=fields.website></dir-field-text></div>"),a.put("js/directive/form/businessCategory/template.html",'<div class=form><div class=business-category ng-class="{\'disabled\' : isDisabled()}"><img src=/assets/images/modal-loading.gif ng-show="loading"><div ng-hide=loading><div>{{\'--.business.category.description\' | translateText}}</div><div class="panel panel-default"><div class=panel-heading>{{\'--.businessCategory.column.category\' | translateText}}</div><div class=panel-body><div name={{category.name}} ng-disabled=isDisabled() ng-repeat="category in categories" class=category-box ng-class="{\'category-selected\':category.selected === true}" ng-click=select(category)>{{category.translationName | translateText}}</div></div></div><div class="panel panel-default"><div class=panel-heading>{{\'--.businessCategory.column.subcategory\' | translateText}}</div><div class=panel-body><div name={{subcategory.name}} ng-repeat="subcategory in subcategories" ng-disabled=isDisabled() class=category-box ng-class="{\'subcategory-selected\':subcategory.selected === true}" ng-click=selectSubcategory(subcategory)>{{subcategory.translationName | translateText}}</div></div></div><div class="panel panel-default"><div class=panel-heading>{{\'--.businessCategory.column.subsubcategory\' | translateText}}</div><div class=panel-body><div name={{subsubcategory.name}} ng-repeat="subsubcategory in subsubcategories" ng-disabled=isDisabled() class=category-box ng-class="{\'subsubcategory-selected\':subsubcategory.selected === true}" ng-click=selectSubSubcategory(subsubcategory)>{{subsubcategory.translationName | translateText}}</div></div></div></div></div></div>'),a.put("js/directive/form/businessCreationForm/template.html","<div><div class=modal-description>{{'--.business.registrationModal.business.desc' | translateText}}</div><br><div class=modal-description>{{'--.business.registration.importFromFacebook.desc' | translateText}}</div><dir-field-text ng-info=importFromFacebookParam></dir-field-text><img ng-show=loading src=/assets/images/modal-loading.gif style=float:right><button class=\"btn gling-button-dark\" ng-click=importBusinessFromFacebook() style=\"float: right\" type=button ng-disabled=loading>{{'--.business.registration.importFromFacebook' | translateText}}</button><table class=horizontal-split><tr><td><div></div></td><td>{{'--.generic.or' | translateText}}</td><td><div></div></td></tr></table><div class=modal-description>{{'--.business.registration.data.desc' | translateText}}</div><dir-field-text ng-info=businessNameField></dir-field-text><img ng-show=loading src=/assets/images/modal-loading.gif style=float:right><button id=business-registration-btn-save class=\"btn gling-button-dark\" ng-click=save() type=button ng-disabled=loading>{{'--.generic.save' | translateText}}</button></div>"),a.put("js/directive/form/businessNotification/template.html","<div class=form><dir-field-select ng-info=fields.interests></dir-field-select><dir-field-text ng-info=fields.title></dir-field-text><dir-field-text-area ng-info=fields.description></dir-field-text-area><dir-field-date-simple ng-info=fields.startDate></dir-field-date-simple><dir-field-date-simple ng-info=fields.endDate></dir-field-date-simple><dir-field-image-mutiple ng-info=fields.illustration></dir-field-image-mutiple><dir-field-text-area ng-info=fields.editionReason></dir-field-text-area><h3>{{'--.publication.previsualization' | translateText}}</h3><publication-widget-ctrl ng-info={publication:getInfo().dto,previsualization:true}></publication-widget-ctrl></div>"),a.put("js/directive/form/businessRegistrationForm/template.html","<div><div class=modal-description>{{'--.business.registrationModal.business.desc' | translateText}}</div><br><div class=modal-description>{{'--.business.registration.importFromFacebook.desc' | translateText}}</div><dir-field-text ng-info=importFromFacebookParam></dir-field-text><button class=\"btn gling-button-dark\" ng-click=importBusinessFromFacebook() style=\"float: right\" type=button ng-disabled=loading>{{'--.business.registration.importFromFacebook' | translateText}}</button><img ng-show=loading src=/assets/images/modal-loading.gif style=float:right><table class=horizontal-split><tr><td><div></div></td><td>{{'--.generic.or' | translateText}}</td><td><div></div></td></tr></table><div class=modal-description>{{'--.business.registration.data.desc' | translateText}}</div><dir-field-text ng-info=businessNameField></dir-field-text><button id=business-registration-btn-save class=\"btn gling-button-dark\" ng-show=\"badgeSelected==2\" ng-click=save() type=button ng-disabled=loading>{{'--.generic.save' | translateText}}</button><img ng-show=loading src=/assets/images/modal-loading.gif style=float:right></div>"),a.put("js/directive/form/businessSocialNetwork/template.html","<div class=form><div class=modal-description>{{'--.business.socialNetwork.form.description' | translateText}}</div><dir-field-text ng-info=fields.facebook></dir-field-text><dir-field-text ng-info=fields.twitter></dir-field-text><dir-field-text ng-info=fields.instagram></dir-field-text>{{'--.business.socialNetwork.other' | translateText}} {{'--.business.socialNetwork.other' | translateText}}<dir-field-text ng-info=fields.delivery></dir-field-text><dir-field-text ng-info=fields.ecommerce></dir-field-text><dir-field-text ng-info=fields.opinion></dir-field-text><dir-field-text ng-info=fields.reservation></dir-field-text></div>"),a.put("js/directive/form/claimBusiness/_template.html","<div class=form><div>{{'--.business.claim.form.desc' | translateText}}</div><dir-field-text ng-info=fields.phone></dir-field-text><dir-field-text ng-info=fields.vta></dir-field-text></div>"),a.put("js/directive/form/claimBusiness/template.html","<div class=form><div ng-bind-html=\"'--.business.claim.form.desc' | translateText | text\"></div><dir-field-text ng-info=fields.phone></dir-field-text><dir-field-text ng-info=fields.vta></dir-field-text></div>"),a.put("js/directive/form/contact/template.html","<div class=form><div class=modal-description>{{'--.contactForm.help'}}</div><dir-field-text ng-info=fields.email></dir-field-text><dir-field-text ng-info=fields.subject></dir-field-text><dir-field-text-area ng-info=fields.message></dir-field-text-area></div>"),a.put("js/directive/form/customerInterest/template.html",'<div class=form><div class="row customer_interest_form_container"><div class=customer_interest_form ng-repeat="interest in interests"><div class="col-xs-12 col-sm-6 col-md-4"><button class="interest btn" ng-class={interest_selected:interest.registrationSelection} ng-click=select(interest)><input type=checkbox ng-checked="interest.registrationSelection"> <span class="{{\'gling-icon gling-icon-\' + interest.name}}"></span> {{interest.translationName | translateText}}</button></div></div></div></div>'),a.put("js/directive/form/download/template.html",'<div class=form><dir-field-document ng-info=fields.file></dir-field-document><button type=button ng-show="fields.file.field!=null && fields.file.field.isImage!=true" ng-click=download() class=button>{{\'--.field.document.download\' | translateText}} {{getInfo().field.name}}</button> <img ng-show="fields.file.field!=null && fields.file.field.isImage==true" ng-src="/{{fileCall}}"></div>'),a.put("js/directive/form/image/template.html",'<div class=form><div class=modal-description ng-show="getInfo().details!=null">{{getInfo().details | translateText}}</div><dir-field-document ng-info=imageParam></dir-field-document></div>'),a.put("js/directive/form/login/_template.html",'<div class="form login-form"><div class=facebook-login-btn-container><button ng-click=fb_login(); class="facebook-login-btn btn gling-button-dark"><img src="/assets/images/facebook/login_icon.png"> <span>{{\'--.loginModal.facebook.btn\' |translateText}}</span></button></div><table class=horizontal-split><tr><td><div></div></td><td>{{\'--.generic.or\' | translateText}}</td><td><div></div></td></tr></table><dir-field-text ng-info=fields.email></dir-field-text><dir-field-text ng-info=fields.password></dir-field-text><div ng-bind-html="\'--.registration.accept.condition\' | translateText | text"></div></div>'),a.put("js/directive/form/login/template.html",'<div class="form login-form"><div class=facebook-login-btn-container><a class="facebookShare ng-isolate-scope" ng-click=fb_login()><div class=facebookButton><div class=pluginButton><div class=pluginButtonContainer><div class=pluginButtonImage><button type=button><i class="pluginButtonIcon img sp_plugin-button-2x sx_plugin-button-2x_favblue"></i></button></div><span class=pluginButtonLabel>{{\'--.loginModal.facebook.btn\' |translateText}}</span></div></div></div></a></div><table class=horizontal-split><tr><td><div></div></td><td>{{\'--.generic.or\' | translateText}}</td><td><div></div></td></tr></table><dir-field-text ng-info=fields.email></dir-field-text><dir-field-text ng-info=fields.password></dir-field-text><div class=condition ng-bind-html="\'--.registration.accept.condition\' | translateText | text"></div></div>'),a.put("js/directive/form/promotion/template.html","<div class=form><dir-field-select ng-info=fields.interests></dir-field-select><dir-field-text ng-info=fields.title></dir-field-text><dir-field-text-area ng-info=fields.description></dir-field-text-area><dir-field-date-simple ng-info=fields.startDate></dir-field-date-simple><dir-field-date-simple ng-info=fields.endDate></dir-field-date-simple><dir-field-image-mutiple ng-info=fields.illustration></dir-field-image-mutiple><table class=onoffswitchtable><tr><td>{{'--.promotion.simplePromotion' | translateText}}</td><td><div class=onoffswitch><input type=checkbox name=onoffswitch class=onoffswitch-checkbox id=myonoffswitchFromPromotionForm checked ng-model=completePromotion><label class=onoffswitch-label for=myonoffswitchFromPromotionForm><span class=onoffswitch-inner></span> <span class=onoffswitch-switch></span></label></div></td><td>{{'--.promotion.completePromotion' | translateText}}</td></tr></table><dir-field-text ng-info=fields.originalPrice></dir-field-text><dir-field-text ng-info=fields.offPercent></dir-field-text><dir-field-text ng-info=fields.offPrice></dir-field-text><dir-field-text-area ng-info=fields.editionReason></dir-field-text-area><h3>{{'--.publication.previsualization' | translateText}}</h3><publication-widget-ctrl ng-info={publication:getInfo().dto,previsualization:true}></publication-widget-ctrl></div>"),a.put("js/directive/form/schedule/template.html",'<div class=schedule-form><div class=modal-description>{{\'--.business.schedule.edit.modal.description\' | translateText}}</div><div ng-show="startSection!=null" class=schedule-info ng-style=infoStyle>{{selectedTiming}}</div><div><div class=schedule-form-radio><div class=attendance-close id=schedule-edit-btn-attendance-close ng-click="selectAttendance(\'CLOSE\')"><input type=radio ng-model=attendance_selected value="CLOSE"> {{\'--.schedule.closed\' | translateText}}</div><div class=attendance-light id=schedule-edit-btn-attendance-light ng-click="selectAttendance(\'LIGHT\')"><input type=radio ng-model=attendance_selected value="LIGHT"> {{\'--.schedule.light\' | translateText}}</div><div class=attendance-moderate id=schedule-edit-btn-attendance-moderate ng-click="selectAttendance(\'MODERATE\')"><input type=radio ng-model=attendance_selected value="MODERATE"> {{\'--.schedule.moderate\' | translateText}}</div><div class=attendance-heavy id=schedule-edit-btn-attendance-heavy ng-click="selectAttendance(\'IMPORTANT\')"><input type=radio ng-model=attendance_selected value="IMPORTANT"> {{\'--.schedule.heavy\' | translateText}}</div><div class=attendance-appointment id=schedule-edit-btn-attendance-appointment ng-click="selectAttendance(\'APPOINTMENT\')"><input type=radio ng-model=attendance_selected value="APPOINTMENT"> {{\'--.schedule.appointment\' | translateText}}</div></div><table class=editable><tr><td></td><td ng-repeat="hour in hours"><div class=hour-block-info><div>{{hour.text}}</div></div></td></tr><tr ng-repeat="day in days"><td>{{day}}</td><td ng-repeat="section in sections[day]"><button class=hour-block ng-class=attendance_class[section.attendance] ng-mousedown=select(day,section) ng-mouseover=progress($event,day,section)></button></td></tr></table></div></div>'),a.put("js/directive/mobile/galleryMobile/template.html",'<div class=gallery-modal-mobile ng-show=display><div><div class=previous ng-click=previous() ng-show="images.length>1"><div><span class="gling-icon gling-icon-arrow_left"></span></div></div><button ng-click=close() class="btn-close glyphicon glyphicon-remove"></button> <span class=helper></span> <img class=gallery-picture ng-src="{{image | image}}"><div class=description ng-show="image.comment!=null">{{image.comment}}</div><div class=close-area ng-click=close()></div><div class=next ng-click=next() ng-show="images.length>1"><div><span class="gling-icon gling-icon-arrow_right"></span></div></div></div></div>'),a.put("js/directive/mobile/headerSearch/template.html",'<div class="navbar navbar-app navbar-absolute-top" ng-class="{\'header-with-advanced-search\':advancedSearch}"><div class="navbar-brand navbar-brand-center header-option-container" style="padding-top: 5px"><search-bar-ctrl ng-info={mobile:true}></search-bar-ctrl></div><div class="btn-group pull-left"><div class="btn btn-navbar" ng-click=back() ng-hide="displayMenu !== false"><div class=nav-button ng-show=displayBack()><i class="glyphicon glyphicon-chevron-left"></i></div></div><div class="btn btn-navbar nav-menu" ng-click=showMenu() ng-show="displayMenu !== false"><div class=nav-button><i class="fa fa-bars"></i></div></div></div></div>'),a.put("js/directive/mobile/title/template.html",'<div class="navbar navbar-app navbar-absolute-top"><div class="navbar-brand navbar-brand-center">{{title | translateText}}</div><div class="btn-group pull-left"><div class="btn btn-navbar" ng-click=back() ng-hide="displayMenu !== false"><div class=nav-button ng-show=displayBack()><i class="glyphicon glyphicon-chevron-left"></i></div></div><div class="btn btn-navbar nav-menu" ng-click=showMenu() ng-show="displayMenu !== false"><div class=nav-button><i class="fa fa-bars"></i></div></div></div></div>'),a.put("js/directive/superAdmin/menu/template.html","<div><button ng-click=\"navigateTo('/admin/stat')\">Statistiques</button> <button ng-click=\"navigateTo('/admin/business')\">Business list</button> <button ng-click=\"navigateTo('/admin/categories_and_interests')\">Catégories et intérêts</button> <button ng-click=\"navigateTo('/admin/contact')\">Formuaire de contact</button> <button ng-click=\"navigateTo('/admin/map')\">Carte</button></div>"),a.put("js/directive/town/newsFeedForTown/template.html",'<div class=news-feed-list><h3 style="text-align: center">Suivez les nouveautés des commerces de votre commune</h3><div><h4 style="text-align: center">Les dernières actualités</h4><a class=publication ng-repeat="notification in notifications" href=http://www.shops1160.be/index.php/commerces/#/business/{{notification.businessId}}><table><tr><td rowspan=2><img ng-src="{{notification.businessIllustration | image}}"></td><td class=title>{{notification.businessName}}</td></tr><tr><td>{{notification.title}}</td></tr></table></a><div ng-show="loading === true"><img src=https://www.gling.be/assets/images/modal-loading.gif ng-show="loading"></div></div><div><h4 style="text-align: center">Les dernières promotions</h4><a class=promotion ng-repeat="promotion in promotions" href=http://www.shops1160.be/index.php/commerces/#/business/{{promotion.businessId}}><table><tr><td rowspan=2><img ng-src="{{promotion.businessIllustration | image}}"></td><td><span class=title>{{promotion.businessName}}</span> - {{promotion.endDate | date:\'dd MMM yyyy hh:mm\'}}</td></tr><tr><td>{{promotion.title}}<span style="float: right" class=title>- {{(promotion.offPercent * 100) | number:0}} %</span></td></tr></table></a><div ng-show="loading === true"><img src=https://www.gling.be/assets/images/modal-loading.gif ng-show="loading"></div></div></div>'),a.put("js/directive/town/publicationListForTown/template.html",'<div class=town-business-publication-list><div class=town-business-publication-list-element ng-repeat="publication in publications"><div class=title>{{publication.title}} <span ng-show="publication.type === \'PROMOTION\'">{{publication.endDate | date:\'medium\'}}</span></div><table class=body><tr><td>{{publication.description}}</td><td ng-show="publication.pictures.length > 0"><img ng-click=openGallery(publication.pictures[0],publication) ng-src="{{publication.pictures[0] | image}}"></td></tr></table><div class=publicationDate>{{publication.endDate | date:\'medium\'}}</div></div></div>'),a.put("js/directive/town/townBusiness/template.html",'<div><div class=town-business-list ng-show="elementToDisplay === \'list\'"><h3>Les commerces de votre commune.</h3><div class=search-box><div class=input-group><span class="input-group-addon glyphicon glyphicon-search" id=basic-addon1></span> <input ng-model=search class=form-control placeholder="Par nom, adresse, type,..." aria-describedby=basic-addon1> <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden=true style="pointer-events: visible;cursor: pointer" ng-show="search.length > 0" ng-click="search = \'\'"></span></div></div>Cliquer sur les images pour obtenir plus d\'information<br><div><div class=town-business-list-element ng-hide="business.visible === false" ng-repeat="business in businesses" ng-click=selectBusiness(business)><img ng-src="{{business.illustration | image}}"><div class=town-business-list-element-data><div class=business-name>{{business.name}}</div><div class=address>{{business.address.street}}</div></div></div></div><div ng-show="loading === true"><img src=https://www.gling.be/assets/images/modal-loading.gif ng-show="loading"></div><div ng-show="loading == false && emptyResult()">Aucun résultat ne correspond à votre recherche</div></div><div ng-show="elementToDisplay === \'businessDetails\'"><div><button ng-click=backToList() class="btn gling-button-dark glyphicon glyphicon-chevron-left">Retourner à la liste des commerces</button></div><div class=town-business-details><div class=town-business-details-left><div class=town-business-details-header><img ng-src="{{selectedBusiness.illustration | image}}"><div><div class=business-header-name>{{selectedBusiness.name}}</div><div class=business-header-details>{{selectedBusiness.address.street}}<br>{{selectedBusiness.phone}}<br><a href=mailto:{{selectedBusiness.email}}>{{selectedBusiness.email}}</a></div></div></div><category-line-ctrl></category-line-ctrl><div class=business-description>{{selectedBusiness.description}}</div></div><div class=town-business-details-right>Dernières actualités<schedule-ctrl ng-info={dto:selectedBusiness.schedules}></schedule-ctrl><publication-list-for-town-ctrl ng-info={businessId:selectedBusiness.id}></publication-list-for-town-ctrl></div></div></div></div>'),
a.put("js/directive/web/footerBar/template.html","<div class=footer-bar><a href=\"/legal/\" target=_blank>{{'--.footer.legal' | translateText}}</a> <a href=# ng-click=\"openContactForm('HELP')\">{{'--.footer.help' | translateText}}</a> <a href=# ng-click=\"openContactForm('CONTACT')\">{{'--.footer.contact' | translateText}}</a> <a href=https://www.facebook.com/gling.be target=_blank><img src=\"/assets/images/facebook/login_icon.png\"></a> <span style=\"float: right;font-size: 12px\">Gling © 2015</span></div>"),a.put("js/directive/web/headerBar/template.html",'<div><div class=navigation-bar ng-class="{\'header-with-advanced-search\':advancedSearch}"><div class="container header-option-container"><h1 id=welcome-btn-welcome class="gling-icon gling-icon-logoapp button-with-label" ng-click=goToHome() style="cursor : pointer"><p>{{\'--.headerBar.logo.label\'}}</p></h1><img src=/assets/images/beta.png style="margin-top: -10px"><search-bar-ctrl ng-info={mobile:false}></search-bar-ctrl><select class=gling-button-light ng-model=currentPosition ng-options="position.key as position.translation | translateText for position in positions" style="display: inline-block;width: 150px"></select><div class=profile-buttons-container ng-show="accountService.getMyself()==null"><select class=gling-button-light ng-model=languageService.currentLanguage ng-options="lang.code as lang.language for lang in languageService.languages"></select><button id=welcome-btn-login class=gling-button ng-click=login() type=button>{{\'--.welcome.login\' | translateText}}</button><span>{{\'--.generic.or\' | translateText}}</span><button id=welcome-btn-registration class=gling-button ng-click=registration() type=button>{{\'--.welcome.signIn\' | translateText}}</button></div><div class=profile-buttons-container ng-show="accountService.getMyself()!=null" style="display : inline-block"><div class=dropdown ng-show="accountService.getMyself()!=null" style="display : inline-block"><div class=menu-connection-button-container><div class=menu-connection-name>{{accountService.getMyself().firstname}}</div><div id=dropdownMenu1 class="gling-icon gling-icon-profil menu-connection-icon" data-toggle=dropdown aria-expanded=true><span></span></div><ul class="dropdown-menu dropdown-menu-right" role=menu aria-labelledby=dropdownMenu1><li role=presentation><a id=welcome-btn-profile role=menuitem ng-click="navigateTo(\'/profile\')" tabindex=-1 href="">{{\'--.welcome.myProfile\' | translateText}}</a></li><li role=presentation><a id=welcome-btn-logout role=menuitem ng-click=logout() tabindex=-1 href="">{{\'--.generic.logout\' | translateText}}</a></li><li><ul></ul></li></ul></div></div></div></div><div class=navigation-bar-menu><div><button class=gling-button-dark ng-click="goTo(\'/welcome\')" ng-class="{\'selected\':testPath(\'/welcome\')}">{{\'--.welcome.welcome\' | translateText}}</button><button class=gling-button-dark ng-click="goTo(\'/home/\')" ng-class="{\'selected\':testPath(\'/home\')}">{{\'--.welcome.newsfeed\' | translateText}}</button><button class=gling-button-dark ng-click="goTo(\'/map\')" ng-class="{\'selected\':testPath(\'/map\')}">{{\'--.welcome.map\' | translateText}}</button><button class=gling-button-dark ng-show="accountService.getMyself()!=null" ng-click="goTo(\'/my-businesses\')" ng-class="{\'selected\':testPath(\'/my-business\')}">{{\'--.welcome.myBusinesses\' | translateText}}</button><button class=gling-button-dark ng-show="accountService.getMyself()!=null &amp;&amp; accountService.getMyself().type == \'BUSINESS\'" ng-click="goTo(\'/business/\'+accountService.getMyself().businessId)" ng-class="{\'selected\':testPath(\'/business\')}">{{\'--.welcome.myBusiness\' | translateText}}</button></div></div></div></div>'),a.put("js/modal/AddressModal/view.html","<div class=modal-header><button class=\"btn glyphicon glyphicon-remove\" style=float:right ng-click=close()></button><h4 ng-show=update class=modal-title>{{'--.account.address.modal.title.update' | translateText}}</h4><h4 ng-hide=update class=modal-title>{{'--.account.address.modal.title.create' | translateText}}</h4></div><div class=modal-body><address-form-ctrl ng-info=addressParam></address-form-ctrl></div><div class=modal-footer><button id=profile-btn-save ng-disabled=loading type=button class=\"btn gling-button-dark\" ng-click=save()>{{'--.generic.save' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show=\"loading\"></div>"),a.put("js/modal/BasicModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{title | translateText}}</h4></div><div class="modal-body inject-data"></div><div class=modal-footer><button id=basic-modal-btn-save ng-disabled=loading type=button class="btn gling-button-dark" ng-click=save()>{{\'--.generic.save\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loading"></div>'),a.put("js/modal/BusinessCreationModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" ng-click=close() style=float:right></button><h4 class=modal-title>{{\'--.business.registrationModal.title\' | translateText}}</h4></div><div class="modal-body modal-login business-registration"><business-creation-form-ctrl ng-info=businessRegistrationParams></business-creation-form-ctrl></div>'),a.put("js/modal/BusinessNotificationModal/view.html","<div class=modal-header><button class=\"btn glyphicon glyphicon-remove\" style=float:right ng-click=close()></button><h4 ng-show=update class=modal-title>{{'--.businessNotification.modal.title.update' | translateText}}</h4><h4 ng-hide=update class=modal-title>{{'--.businessNotification.modal.title.create' | translateText}}</h4></div><div class=modal-body ng-style=getHeight()><business-notification-form-ctrl ng-info=businessNotificationParam></business-notification-form-ctrl></div><div class=modal-footer><button ng-disabled=loading id=promotion-modal-btn-save type=button class=\"btn gling-button-dark\" ng-click=save(false)>{{'--.generic.save' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show=\"loading\"></div>"),a.put("js/modal/BusinessRegistrationModal/_view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{\'--.business.registrationModal.title\' | translateText}}</h4></div><div class="modal-body modal-login business-registration"><div class=wizard><div ng-class="{\'current\':badgeSelected==1}"><span class=badge ng-class="{\'badge-inverse\':badgeSelected==1}">1</span> {{\'--.customer.registrationModal.personal.title\' | translateText}}</div><div ng-class="{\'current\':badgeSelected==2}"><span class=badge ng-class="{\'badge-inverse\':badgeSelected==2}">2</span> {{\'--.business.registrationModal.business.title\' | translateText}}</div></div><div ng-show="badgeSelected==1"><div class=modal-description>{{\'--.business.registrationModal.personal.desc\' | translateText}}</div><div class=facebook-login-btn-container><button ng-click=fb_login(); class="facebook-login-btn btn gling-button-dark" ng-disabled=loading><img src="/assets/images/facebook/login_icon.png"> <span>{{\'--.registrationModal.facebook.btn\' |translateText}}</span></button></div><table class=horizontal-split><tr><td><div></div></td><td>{{\'--.generic.or\' | translateText}}</td><td><div></div></td></tr></table><account-form-ctrl ng-info=accountParam></account-form-ctrl></div><div ng-show="badgeSelected==2"><div class=modal-description>{{\'--.business.registrationModal.business.desc\' | translateText}}</div><br><div class=modal-description>{{\'--.business.registration.importFromFacebook.desc\' | translateText}}</div><dir-field-text ng-info=importFromFacebookParam></dir-field-text><button ng-show="badgeSelected==2" ng-disabled=loading style="float: right" type=button class="btn gling-button-dark" ng-click=importBusinessFromFacebook()>{{\'--.business.registration.importFromFacebook\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loading"><table class=horizontal-split><tr><td><div></div></td><td>{{\'--.generic.or\' | translateText}}</td><td><div></div></td></tr></table><div class=modal-description>{{\'--.business.registration.data.desc\' | translateText}}</div><dir-field-text ng-info=businessNameField></dir-field-text></div></div><div class=modal-footer><button ng-show="badgeSelected==1" id=business-registration-btn-next ng-disabled=loading type=button class="btn gling-button-dark" ng-click=createAccount()>{{\'--.businessRegistration.createAccount\' | translateText}}</button> <button ng-show="badgeSelected==2" id=business-registration-btn-save ng-disabled=loading type=button class="btn gling-button-dark" ng-click=save()>{{\'--.generic.save\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loading"></div>'),a.put("js/modal/BusinessRegistrationModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" ng-click=close() style=float:right></button><h4 class=modal-title>{{\'--.business.registrationModal.title\' | translateText}}</h4></div><div class="modal-body modal-login business-registration"><div class=wizard><div ng-class="{\'current\':badgeSelected==1}"><span class=wizard-badge ng-class="{\'badge-inverse\':badgeSelected==1}">1</span> {{\'--.customer.registrationModal.personal.title\' | translateText}}</div><div ng-class="{\'current\':badgeSelected==2}"><span class=wizard-badge ng-class="{\'badge-inverse\':badgeSelected==2}">2</span> {{\'--.business.registrationModal.business.title\' | translateText}}</div></div><div ng-show="badgeSelected==1"><div class=modal-description>{{\'--.business.registrationModal.personal.desc\' | translateText}}</div><div class=facebook-login-btn-container><a class="facebookShare ng-isolate-scope" ng-click=fb_login()><div class=facebookButton><div class=pluginButton><div class=pluginButtonContainer><div class=pluginButtonImage><button type=button><i class="pluginButtonIcon img sp_plugin-button-2x sx_plugin-button-2x_favblue"></i></button></div><span class=pluginButtonLabel>{{\'--.registrationModal.facebook.btn\' |translateText}}</span></div></div></div></a></div><table class=horizontal-split><tr><td><div></div></td><td>{{\'--.generic.or\' | translateText}}</td><td><div></div></td></tr></table><account-form-ctrl ng-info=accountParam></account-form-ctrl></div><div ng-show="badgeSelected==2"><business-creation-form-ctrl ng-info=businessRegistrationParams></business-creation-form-ctrl></div></div><div class=modal-footer ng-show="badgeSelected==1"><button id=business-registration-btn-next class="btn gling-button-dark" ng-show="badgeSelected==1" ng-click=createAccount() type=button ng-disabled=loading>{{\'--.businessRegistration.createAccount\' | translateText}}</button><img ng-show=loading src=/assets/images/modal-loading.gif></div>'),a.put("js/modal/ChangePassword/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{\'--.changePasswordModal.title\' | translateText}}</h4></div><div class="modal-body form"><dir-field-text ng-info=fields.oldPassword></dir-field-text><dir-field-text ng-info=fields.newPassword></dir-field-text><dir-field-text ng-info=fields.repeatPassword></dir-field-text></div><div class=modal-footer><button ng-disabled=loading type=button id=change-password-btn-save class="btn gling-button-dark" ng-click=save()>{{\'--.generic.save\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loading"></div>'),a.put("js/modal/ConfirmAndShareModal/view.html","<div class=modal-body>{{'--.publication.success.message' | translateText}}<br><button class=gling-button-dark ng-click=share()><img style=\"width: 18px\" src=\"/assets/images/facebook/login_icon_white.png\"> {{'--.publication.success.shareOnFacebook' | translateText}}</button> <button ng-click=close() class=gling-button-dark>{{'--.generic.close' | translateText}}</button></div>"),a.put("js/modal/CustomerRegistrationModal/_view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{\'--.customer.registrationModal.title\' | translateText}}</h4></div><div class="modal-body modal-login customer-registration"><div class=modal-description>{{\'--.customer.registrationModal.personal.desc\' | translateText}}<br><span class="modal-login-link link" ng-click=toBusinessRegistration()>{{\'--.registrationModal.toBusinessRegistration\' | translateText}}</span></div><div class=facebook-login-btn-container><button ng-click=fb_login(); class="facebook-login-btn btn gling-button-dark" ng-disabled=loading><img src="/assets/images/facebook/login_icon.png"> <span>{{\'--.registrationModal.facebook.btn\' |translateText}}</span></button></div><table class=horizontal-split><tr><td><div></div></td><td>{{\'--.generic.or\' | translateText}}</td><td><div></div></td></tr></table><account-form-ctrl ng-info=accountParam></account-form-ctrl></div><div class=modal-footer><button id=customer-registration-modal-btn-save ng-disabled=loading type=button class="btn gling-button-dark" ng-click=save()>{{\'--.generic.save\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loading"></div>'),a.put("js/modal/CustomerRegistrationModal/view.html","<div class=modal-header><button class=\"btn glyphicon glyphicon-remove\" ng-click=close() style=float:right></button><h4 class=modal-title>{{'--.customer.registrationModal.title' | translateText}}</h4></div><div class=\"modal-body modal-login customer-registration\"><div class=modal-description>{{'--.customer.registrationModal.personal.desc' | translateText}}<br><span class=\"modal-login-link link\" ng-click=toBusinessRegistration()>{{'--.registrationModal.toBusinessRegistration' | translateText}}</span></div><div class=facebook-login-btn-container><a class=\"facebookShare ng-isolate-scope\" ng-click=fb_login()><div class=facebookButton><div class=pluginButton><div class=pluginButtonContainer><div class=pluginButtonImage><button type=button><i class=\"pluginButtonIcon img sp_plugin-button-2x sx_plugin-button-2x_favblue\"></i></button></div><span class=pluginButtonLabel>{{'--.registrationModal.facebook.btn' |translateText}}</span></div></div></div></a></div><table class=horizontal-split><tr><td><div></div></td><td>{{'--.generic.or' | translateText}}</td><td><div></div></td></tr></table><account-form-ctrl ng-info=accountParam></account-form-ctrl></div><div class=modal-footer><button id=customer-registration-modal-btn-save class=\"btn gling-button-dark\" ng-click=save() type=button ng-disabled=loading>{{'--.generic.save' | translateText}}</button><img ng-show=loading src=/assets/images/modal-loading.gif></div>"),a.put("js/modal/DownloadFieldModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{\'--.downloadModal.title\' | translateText}}</h4></div><div class=modal-body><dir-field-document ng-info=fields.file></dir-field-document></div><div class=modal-footer><button ng-disabled=loading type=button class="btn gling-button-dark" ng-click=save()>{{\'--.generic.save\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loading"></div>'),a.put("js/modal/EditCustomerInterestModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{\'--.customer.editInterestModal.title\' | translateText}}</h4></div><div class="modal-body modal-login"><customer-interest-form-ctrl ng-info=customerInterestParam></customer-interest-form-ctrl></div><div class=modal-footer><button ng-disabled=loading id=edit-customer-interest-btn-save type=button class="btn gling-button-dark" ng-click=save()>{{\'--.generic.save\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loading"></div>'),a.put("js/modal/ForgotPasswordModal/view.html","<div class=modal-header><button class=\"btn glyphicon glyphicon-remove\" style=float:right ng-click=close()></button><h4 class=modal-title>{{'--.forgotPassword.title' | translateText}}</h4></div><div class=modal-body><p>{{'--.forgotPassword.desc' | translateText}}</p><dir-field-text ng-info=fields.email></dir-field-text></div><div class=modal-footer><button ng-disabled=loading type=button class=\"btn gling-button-dark\" ng-click=save()>{{'--.generic.submit' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show=\"loading\"></div>"),a.put("js/modal/GalleryModal/view.html",'<div class="modal-body gallery-modal"><div><img class=gallery-picture ng-src="{{image | image}}"></div><div class=comment-container><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button> {{image.comment}}</div><table ng-show="images.length > 1" style="width: 100%"><tr><td><button type=button&quot; id=gallery-modal-btn-previous class="btn gling-button-dark" ng-click=previous()>{{\'--.gallery.modal.previous\' | translateText}}</button></td><td><span id=gallery-modal-span-number-page>{{imageNb}} / {{images.length}}</span></td><td><button type=button&quot; id=gallery-modal-btn-next style="float: right" class="btn gling-button-dark" ng-click=next()>{{\'--.gallery.modal.next\' | translateText}}</button></td></tr></table></div>'),a.put("js/modal/HelpModal/view.html","<div class=modal-header><button class=\"btn glyphicon glyphicon-remove\" style=float:right ng-click=close()></button><h4 class=modal-title>{{'--.helpModal.title' | translateText}}</h4></div><div class=modal-body>{{message | translateText}}</div>"),a.put("js/modal/IframeModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{title | translateText}}</h4></div><div class=modal-body><iframe src={{url}}></iframe></div>'),a.put("js/modal/LoginModal/_view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{\'--.loginModal.title\' | translateText}}</h4></div><div class="modal-body modal-login"><div class=help-div ng-show="helpMessage!=null">{{helpMessage | translateText}}</div><login-form-ctrl ng-info=loginFormParam></login-form-ctrl><div class=link ng-click=toForgotPassword()>{{\'--.login.form.button.forgotPassword\' | translateText}}</div><div class="modal-login-link-box modal-description"><div>{{\'--.loginModal.notRegisterYet\' | translateText}}</div><span class="modal-login-link link" ng-click=toCustomerRegistration()>{{\'--.loginModal.toCustomerRegistration\' | translateText}}</span> <span class="modal-login-link link" ng-click=toBusinessRegistration()>{{\'--.loginModal.toBusinessRegistration\' | translateText}}</span></div></div><div class=modal-footer><button ng-disabled=loginFormParam.loading type=button class="btn btn-default" ng-click=close()>{{\'--.generic.close\' | translateText}}</button> <button ng-disabled=loginFormParam.loading id=login-modal-btn-save type=button class="btn gling-button-dark" ng-click=save()>{{\'--.generic.login.btn\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loginFormParam.loading"></div>'),a.put("js/modal/LoginModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" ng-click=close() style=float:right></button><h4 class=modal-title>{{\'--.loginModal.title\' | translateText}}</h4></div><div class="modal-body modal-login"><div class=help-div ng-show="helpMessage!=null"><i class="gling-icon gling-icon-info"></i>{{helpMessage | translateText}}</div><login-form-ctrl ng-info=loginFormParam></login-form-ctrl><table class=login-action><tr><td><i class="glyphicon glyphicon-question-sign"></i> {{\'--.login.form.button.forgotPassword\' | translateText}}</td><td><a class=link ng-click=toForgotPassword()>{{\'--.login.form.button.forgotPassword.action\' | translateText}}</a></td></tr><tr><td><i class="glyphicon glyphicon-question-sign"></i>{{\'--.loginModal.notRegisterYet\' | translateText}}</td><td><span class="modal-login-link link" ng-click=toCustomerRegistration()>{{\'--.loginModal.toCustomerRegistration\' | translateText}}</span></td></tr><tr ng-show="helpMessage==null"><td><i class="glyphicon glyphicon-question-sign"></i>{{\'--.loginModal.youAreBusiness\' | translateText}}</td><td><span class="modal-login-link link" ng-click=toBusinessRegistration()>{{\'--.loginModal.toBusinessRegistration\' | translateText}}</span></td></tr></table></div><div class=modal-footer><button id=login-modal-btn-save class="btn gling-button-dark" ng-click=save() type=button ng-disabled=loginFormParam.loading>{{\'--.generic.login.btn\' | translateText}}</button><img ng-show=loginFormParam.loading src=/assets/images/modal-loading.gif></div>'),a.put("js/modal/MessageModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{title | translateText}}</h4></div><div class=modal-body>{{message | translateText}}</div><div class=modal-footer ng-show=displaySaveButton()><button ng-disabled=loading id=modal-message-btn-valid type=button class="btn gling-button-dark" ng-click=save()>{{\'--.generic.valid\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loading"></div>'),a.put("js/modal/OneFieldModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" style=float:right ng-click=close()></button><h4 class=modal-title>{{\'--.loginModal.title\' | translateText}}</h4></div><div class="modal-body modal-login"><dir-field-text ng-info=text></dir-field-text></div><div class=modal-footer><button ng-disabled=loading type=button class="btn gling-button-dark" ng-click=save()>{{\'--.generic.valid\' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show="loading"></div>'),a.put("js/modal/PromotionModal/view.html","<div class=modal-header><button class=\"btn glyphicon glyphicon-remove\" style=float:right ng-click=close()></button><h4 ng-show=update class=modal-title>{{'--.promotion.modal.title.update' | translateText}}</h4><h4 ng-hide=update class=modal-title>{{'--.promotion.modal.title.create' | translateText}}</h4></div><div class=modal-body ng-style=getHeight()><promotion-form-ctrl ng-info=promotionParam></promotion-form-ctrl></div><div class=modal-footer><button ng-disabled=loading id=promotion-modal-btn-save type=button class=\"btn gling-button-dark\" ng-click=save(false)>{{'--.generic.save' | translateText}}</button> <img src=/assets/images/modal-loading.gif ng-show=\"loading\"></div>"),a.put("js/modal/ResizeImageMobileModal/view.html",'<div class=modal-body><div style="margin: -15px"><image-tool-ctrl ng-info=params></image-tool-ctrl></div><button style="margin-top: 30px" ng-click=save()>save</button></div>'),a.put("js/modal/admin/ConfirmClaimModal/view.html",'<div class=modal-header><button class="btn glyphicon glyphicon-remove" ng-click=close() style=float:right></button><h4 class=modal-title>{{business.name}} réclamation</h4></div><div class="modal-body modal-login business-registration">Listes des personnes réclamant le commerce<tabset><tab active=claim.active ng-repeat="claim in claims"><tab-heading>{{claim.account.firstname}} ({{claim.account.lastname}})</tab-heading><table class=table-basic><tr><td>nom</td><td>{{claim.account.firstname}} {{claim.account.lastname}}</td></tr><tr><td>email</td><td>{{claim.account.email}}</td></tr><tr><td>téléphone</td><td>{{claim.phone}}</td></tr><tr><td>tva</td><td>{{claim.vta}}</td></tr><tr><td colspan=2><button class="btn gling-button-dark" ng-click=confirm(claim) type=button ng-disabled=loading>{{\'--.generic.confirm\' | translateText}}</button><img ng-show=loading src=/assets/images/modal-loading.gif></td></tr></table></tab></tabset></div>'),a.put("js/modal/mobile/AlertModal/view.html","<div class=modal-body ng-click=close()>{{message}}</div>"),a.put("js/modal/mobile/InterestSelectionModal/view.html",'<div class=modal-body ng-style=getHeight()><div style="overflow: auto"><div style="margin: 10px 0"><div ng-repeat="interest in customerInterests" ng-click=selectInterest(interest)><span class="home-interest gling-icon {{\'gling-icon-\' + interest.name}}" ng-class="{\'selected\':interest.selected === true}"></span> {{interest.translationName | translateText}}</div></div></div></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=selectInterest(null)>{{\'--.interest.selection.window.nothing\' | translateText}}</button> <button ng-disabled=loading type=button class="btn btn-default" ng-click=close()>{{\'--.generic.close\' | translateText}}</button></div>'),a.put("js/modal/mobile/LoadingModal/view.html","<div class=modal-body><img src=\"/assets/images/loading_big.gif\"><br>{{'--.generic.loading' | translateText}}</div>"),a.put("js/tool/imageTool/template.html",'<div class=image-tool><div><button ng-disabled="displayPicture !== true" class="gling-button-dark js-crop menu-btn" ng-click=zoom(true)>+</button> <button ng-disabled="displayPicture !== true" class="gling-button-dark js-crop menu-btn" ng-click=zoom(false)>-</button> <button class="gling-button-dark js-crop glyphicon glyphicon-ok" ng-click=crop()></button></div><div class=image-tool-container><div class=image-tool-overlay style=max-width:{{canvasWidth}}px;height:{{imageToolOverlayHeight}}px><div class=image-tool-overlay-inner><div class=resize-container ng-show="displayPicture === true"><span class="resize-handle resize-handle-nw"></span> <span class="resize-handle resize-handle-ne"></span> <img class=resize-image alt="image for resizing"> <span class="resize-handle resize-handle-se"></span> <span class="resize-handle resize-handle-sw"></span></div></div></div></div></div>'),a.put("js/view/admin/CategoriesAndInterests.html",'<super-admin-menu-ctrl></super-admin-menu-ctrl><div class=category_and_interest>Recherche<input ng-model=search><button ng-click="disabled = !disabled">Editer</button><button ng-click=importTranslation() ng-disabled="translationLoading === true">Réimporter les traductions</button><img ng-show="translationLoading === true" src=/assets/images/modal-loading.gif><table><tr><td></td><td ng-repeat="interest in interests">{{interest.name}}</td></tr><tr ng-repeat="category in getCategoryList()"><td>{{category.translationName | translateText}}</td><td ng-repeat="interest in interests"><input ng-blur=save($event,category,interest) style=width:40px value={{getPriority(category,interest)}} ng-disabled=disabled></td></tr></table></div>'),a.put("js/view/admin/_CategoriesAndInterests.html",'<super-admin-menu-ctrl></super-admin-menu-ctrl><div class=category_and_interest>Recherche<input ng-model="search"> <button ng-click="disabled = !disabled">Editer</button> <button ng-click=importTranslation() ng-disabled="translationLoading === true">Réimporter les traductions</button> <img ng-show="translationLoading === true" src="/assets/images/modal-loading.gif"><table><tr><td></td><td ng-repeat="interest in interests">{{interest.name}}</td></tr><tr ng-repeat="category in getCategoryList()"><td>{{category.translationName | translateText}}</td><td ng-repeat="interest in interests"><input ng-disabled=disabled style=width:40px value={{getPriority(category,interest)}} ng-blur="save($event,category,interest)"></td></tr></table></div>'),a.put("js/view/admin/_adminBusiness.html",'<super-admin-menu-ctrl></super-admin-menu-ctrl><div class=admin-business-page><h1>Commerces</h1><h2>Nouveaux commerces</h2><table class=import-table><tr><td>Importer un nouveau commerce depuis une page facebook</td><td><input ng-disabled="importBusinessLoading === true" ng-model=importBusinessInput placeholder="Url de la page à importer"></td><td><button ng-disabled="importBusinessLoading === true" ng-click=importBusinessStart()>Importer !</button> <img src=/assets/images/modal-loading.gif ng-show="importBusinessLoading === true"></td></tr></table><h2>Listes des commerces Total : {{businesses.length}})</h2><img src=/assets/images/modal-loading.gif ng-show="businessListLoading === true"> <button ng-click=displayMapFct(!displayMap)>Afficher la carte</button><table ng-table=tableParams class="table business-list-param" ng-show="businessListLoading===false"><tr ng-repeat="business in $data" ng-mouseover=startAnimation(business,true) ng-mouseleave=startAnimation(business,false)><td data-title="\'--.generic.name\' | translateText" sortable>{{business.name}}</td><td data-title="\'--.generic.status\' | translateText" sortable>{{business.businessStatus}}</td><td data-title="\'Création\'" sortable>{{business.creationDate | date}}</td><td data-title="\'Followers\'" sortable>{{business.totalFollowers}}</td><td data-title="\'Email\'" sortable>{{business.email}}</td><td data-title="\'Publication active/total\'" sortable>{{business.nbPublicationActive}} / {{business.nbPublication}}</td><td data-title="\'--.generic.action\' | translateText" sortable><button ng-click=toBusiness(business.id)>{{\'--.admin.business.toBusiness\' | translateText}}</button> <button name=admin-business-btn-confirm-publication ng-click=confirmPublication(business) ng-show="business.businessStatus == \'WAITING_CONFIRMATION\' ">{{\'--.admin.business.confirmPublication\' | translateText}}</button></td></tr></table><div class=map-panel ng-show="displayMap === true"><button ng-click="displayMap = !displayMap">Masquer la carte</button><div><map center="{{mapData.center.latitude}}, {{mapData.center.longitude}}" zoom={{mapData.zoom}}></map></div></div></div>'),a.put("js/view/admin/_adminContact.html",'<super-admin-menu-ctrl></super-admin-menu-ctrl><h1>contacter les commerçants</h1>Sujet<br><input ng-model=dto.subject style="width:800px"><br><br>Message<br><textarea ng-model=dto.message style=width:800px;height:600px></textarea><br><br><button ng-click=send()>Envoyer</button>'),a.put("js/view/admin/_adminMap.html",'<super-admin-menu-ctrl></super-admin-menu-ctrl><h1>Cartes</h1><map center="{{mapData.center.latitude}}, {{mapData.center.longitude}}" zoom={{mapData.zoom}}></map>'),a.put("js/view/admin/_adminStat.html",'<super-admin-menu-ctrl></super-admin-menu-ctrl><div class=my-tabs><div ng-click="setTab(\'main\')" ng-class="{\'selected\':tab == \'main\'}">Statistiques</div><div ng-click="setTab(\'users\')" ng-class="{\'selected\':tab == \'users\'}">Détails utilisateurs</div><div ng-click="setTab(\'interest\')" ng-class="{\'selected\':tab == \'interest\'}">Intérêts</div></div><div ng-show="tab == \'main\'"><h1>Stats</h1><table class=admin_stat><tr ng-repeat="(title, val) in stats"><td>{{title}}</td><td>{{val.value1}}</td><td>{{val.value2 * 100 | number:2}} %</td></tr></table><button ng-click=refreshStat()>Refrech</button></div><div ng-show="tab == \'users\'"><h1>User Details</h1><table><tr ng-repeat="detail in details"><td>{{detail.title}} ({{detail.total}})</td><td style="vertical-align: top"><donut-chart-ctrl style="width: 300px;height: 300px;display: inline-block" ng-info=detail.nbSessionChartParam></donut-chart-ctrl></td><td><donut-chart-ctrl style="width: 300px;height: 300px;display: inline-block" ng-info=detail.nbFollowChartParam></donut-chart-ctrl></td><td><donut-chart-ctrl style="width: 300px;height: 300px;display: inline-block" ng-info=detail.nbAddressChartParam></donut-chart-ctrl></td><td><donut-chart-ctrl style="width: 300px;height: 300px;display: inline-block" ng-info=detail.sharePositionChartParam></donut-chart-ctrl></td></tr><tr collapse=2><button ng-click=refreshDetails()>Refrech</button></tr></table></div><div ng-show="tab == \'interest\'"><h1>Intérêts</h1><donut-chart-ctrl style="width: 600px;height: 600px;display: inline-block" ng-info=interestGraph1></donut-chart-ctrl><donut-chart-ctrl style="width: 600px;height: 600px;display: inline-block" ng-info=interestGraph7></donut-chart-ctrl><donut-chart-ctrl style="width: 600px;height: 600px;display: inline-block" ng-info=interestGraph14></donut-chart-ctrl><donut-chart-ctrl style="width: 600px;height: 600px;display: inline-block" ng-info=interestGraph28></donut-chart-ctrl><button ng-click=refreshInterest()>Refrech</button></div>'),
a.put("js/view/admin/adminBusiness.html",'<super-admin-menu-ctrl></super-admin-menu-ctrl><div class=admin-business-page><h1>Commerces</h1><h2>Nouveaux commerces</h2><table class=import-table><tr><td>Importer un nouveau commerce depuis une page facebook</td><td><input ng-model=importBusinessInput placeholder="Url de la page &agrave; importer" ng-disabled="importBusinessLoading === true"></td><td><button ng-click=importBusinessStart() ng-disabled="importBusinessLoading === true">Importer !</button><img ng-show="importBusinessLoading === true" src=/assets/images/modal-loading.gif></td></tr></table><h2>Listes des commerces Total : {{businesses.length}})</h2><img ng-show="businessListLoading === true" src=/assets/images/modal-loading.gif><button ng-click=displayMapFct(!displayMap)>Afficher la carte</button><table class="table business-list-param" ng-show="businessListLoading===false" ng-table=tableParams><tr ng-mouseover=startAnimation(business,true) ng-repeat="business in $data" ng-mouseleave=startAnimation(business,false)><td data-title="\'--.generic.name\' | translateText" sortable>{{business.name}}</td><td data-title="\'--.generic.status\' | translateText" sortable>{{business.businessStatus}}</td><td data-title="\'Cr&eacute;ation\'" sortable>{{business.creationDate | date}}</td><td data-title="\'Followers\'" sortable>{{business.totalFollowers}}</td><td data-title="\'Email\'" sortable>{{business.email}}</td><td data-title="\'Publication active/total\'" sortable>{{business.nbPublicationActive}} / {{business.nbPublication}}</td><td data-title="\'a un propri&eacute;taire\'" sortable>{{business.hasOwner?\'oui\':\'non\'}}</td><td data-title="\'--.generic.action\' | translateText" sortable><button ng-click=toBusiness(business.id)>{{\'--.admin.business.toBusiness\' | translateText}}</button><button ng-show="business.businessStatus == \'WAITING_CONFIRMATION\' " ng-click=confirmPublication(business) name=admin-business-btn-confirm-publication>{{\'--.admin.business.confirmPublication\' | translateText}}</button><button ng-show="business.businessStatus == \'PUBLISHED\' &amp;&amp; business.isClaimed ==true" ng-click=confirmClaim(business) name=admin-business-btn-confirm-claim>{{\'--.admin.business.confirmClaim\' | translateText}}</button></td></tr></table><div class=map-panel ng-show="displayMap === true"><button ng-click="displayMap = !displayMap">Masquer la carte</button><div><map center="{{mapData.center.latitude}}, {{mapData.center.longitude}}" zoom={{mapData.zoom}}></map></div></div></div>'),a.put("js/view/admin/adminContact.html","<super-admin-menu-ctrl></super-admin-menu-ctrl><h1>contacter les commerçants</h1>Sujet<br><input ng-model=dto.subject style=width:800px><br><br>Message<br><textarea ng-model=dto.message style=width:800px;height:600px></textarea><br><br><button ng-click=send()>Envoyer</button>"),a.put("js/view/admin/adminMap.html",'<super-admin-menu-ctrl></super-admin-menu-ctrl><h1>Cartes</h1><map center="{{mapData.center.latitude}}, {{mapData.center.longitude}}" zoom={{mapData.zoom}}></map>'),a.put("js/view/admin/adminStat.html",'<super-admin-menu-ctrl></super-admin-menu-ctrl><div class=my-tabs><div ng-click="setTab(\'main\')" ng-class="{\'selected\':tab == \'main\'}">Statistiques</div><div ng-click="setTab(\'users\')" ng-class="{\'selected\':tab == \'users\'}">Détails utilisateurs</div><div ng-click="setTab(\'interest\')" ng-class="{\'selected\':tab == \'interest\'}">Intérêts</div></div><div ng-show="tab == \'main\'"><h1>Stats</h1><table class=admin_stat><tr ng-repeat="(title, val) in stats"><td>{{title}}</td><td>{{val.value1}}</td><td>{{val.value2 * 100 | number:2}} %</td></tr></table><button ng-click=refreshStat()>Refrech</button></div><div ng-show="tab == \'users\'"><h1>User Details</h1><table><tr ng-repeat="detail in details"><td>{{detail.title}} ({{detail.total}})</td><td style="vertical-align: top"><donut-chart-ctrl style="width: 300px;height: 300px;display: inline-block" ng-info=detail.nbSessionChartParam></donut-chart-ctrl></td><td><donut-chart-ctrl style="width: 300px;height: 300px;display: inline-block" ng-info=detail.nbFollowChartParam></donut-chart-ctrl></td><td><donut-chart-ctrl style="width: 300px;height: 300px;display: inline-block" ng-info=detail.nbAddressChartParam></donut-chart-ctrl></td><td><donut-chart-ctrl style="width: 300px;height: 300px;display: inline-block" ng-info=detail.sharePositionChartParam></donut-chart-ctrl></td></tr><tr collapse=2><button ng-click=refreshDetails()>Refrech</button></tr></table></div><div ng-show="tab == \'interest\'"><h1>Intérêts</h1><donut-chart-ctrl style="width: 600px;height: 600px;display: inline-block" ng-info=interestGraph1></donut-chart-ctrl><donut-chart-ctrl style="width: 600px;height: 600px;display: inline-block" ng-info=interestGraph7></donut-chart-ctrl><donut-chart-ctrl style="width: 600px;height: 600px;display: inline-block" ng-info=interestGraph14></donut-chart-ctrl><donut-chart-ctrl style="width: 600px;height: 600px;display: inline-block" ng-info=interestGraph28></donut-chart-ctrl><button ng-click=refreshInterest()>Refrech</button></div>'),a.put("js/view/mobile/_business.html",'<div class="navbar navbar-app navbar-absolute-top" ng-class="{\'header-with-advanced-search\':advancedSearch}"><div class="btn-group pull-left"><div class="btn btn-navbar" ng-click=back()><div class=nav-button><i class="glyphicon glyphicon-chevron-left"></i></div></div></div><div class="btn-group pull-right"><div class="btn btn-navbar" ng-click=followed()><div class="nav-button business-page-follow"><span class=selected ng-show=business.following>{{\'--.followWidget.stopFollow\' | translateText}}<i class="gling-icon gling-icon-bell"></i></span> <span ng-hide=business.following>{{\'--.followWidget.follow\' | translateText}}<i class="gling-icon gling-icon-bell2"></i></span></div></div></div></div><div class=app-body><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="scrollable-content business-mobile-page scrollable-content-body"><div class=scrollable-content-inner><div class=business-page-header ng-style="{\'background-image\':\'url(\'+(business.landscape | image)+\')\' }"><div class="edit-button-container landscape-edit"></div><table ng-click=refreshPublications()><tr><td><div class=business-page-illustration-container><img class=business-illustration ng-src="{{business.illustration | image}}"><div class=edit-button-container></div></div></td><td><div class=business-page-name>{{business.name}}<div class=edit-button-container></div></div></td></tr></table></div><category-line-ctrl ng-info=categoryLineParams></category-line-ctrl><div style="overflow: auto"><div class=business-tab-set><div class=business-tab style=display:inline-block ng-class="{\'selected\':tabToDisplay === tab.name}" ng-repeat="tab in tab" ng-show=tab.display() ng-click=tab.action()><i class="gling-icon {{tab.icon}}"></i> {{tab.translatableName | translateText}}</div></div></div><div ng-show="tabToDisplay==\'home\'"><div ng-show="myBusiness===true"><button id=business-btn-promotion-add class="btn gling-button-dark" ng-click=createPromotion() ng-disabled="business.businessStatus !== \'PUBLISHED\'">{{\'--.business.publication.btn.promotion\' | translateText}}</button> <button class="btn gling-button-dark" ng-click=createNotification() ng-disabled="business.businessStatus !== \'PUBLISHED\'">{{\'--.business.publication.btn.notification\' | translateText}}</button></div><publication-list-mobile-for-business-ctrl ng-info=publicationListParam></publication-list-mobile-for-business-ctrl></div><div class=section ng-show="tabToDisplay==\'info\'"><table class=business-info-line ng-show="business.description !=null && business.description.length > 0"><tr><td colspan=2><span ng-bind-html="business.description | text : descriptionLimit"></span> <span ng-show="business.description.length > descriptionLimitBase && descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000" class=link>{{\'--.textReuction.seeMore\' | translateText}}</span> <span ng-show="business.description.length > descriptionLimitBase && descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase" class=link>{{\'--.textReuction.seeLess\' | translateText}}</span></td></tr></table><table class=business-info-line><tr><td colspan=2><div class=business-info-line-action><google-map-widget-ctrl ng-info=googleMapParams></google-map-widget-ctrl></div></td></tr><tr><td><div class=business-address>{{business.address.street}}<br>{{business.address.zip}},{{business.address.city}}</div></td><td class=td-action>{{business.distance / 1000 | number:2}} Km</td></tr></table><table class=business-info-line ng-show="business.phone!=null"><tr><td>{{business.phone}}</td><td class=td-action><a class="business-info-line-action glyphicon glyphicon-earphone" href=tel:{{business.phone}}></a></td></tr></table><table class=business-info-line ng-show="business.website!=null"><tr><td>{{\'--.generic.site\' | translateText}}</td><td class=td-action><a href={{business.website}} target=_blank>{{business.website}}</a></td></tr></table><table class=business-info-line ng-show="business.email!=null"><tr><td>{{business.email}}</td><td class=td-action><a class="business-info-line-action glyphicon glyphicon-envelope" href=mailto:{{business.email}}></a></td></tr></table><table class=business-info-line ng-show="displaySocialNetwork() === true"><tr><td><div ng-show=!!business.socialNetwork.facebookLink class=business-social-network-box><a id=welcome-link-facebook href={{business.socialNetwork.facebookLink}} title=Facebook target=_blank><img src=/assets/images/social_network/facebook.png></a></div><div ng-show=!!business.socialNetwork.twitterLink class=business-social-network-box><a id=welcome-link-twitter href={{business.socialNetwork.twitterLink}} title=Twitter target=_blank><img src=/assets/images/social_network/twitter.png></a></div><div ng-show=!!business.socialNetwork.instagramLink class=business-social-network-box><a id=welcome-link-instagram href={{business.socialNetwork.instagramLink}} title=Instagram target=_blank><img src=/assets/images/social_network/instagram.png></a></div><div ng-show=!!business.socialNetwork.deliveryLink class=business-social-network-box><a id=welcome-link-delivery href={{business.socialNetwork.deliveryLink}} title="{{\'--.business.socialNetwork.delivery\' | translateText}}" target=_blank><img src=/assets/images/social_network/delivery.png></a></div><div ng-show=!!business.socialNetwork.reservationLink class=business-social-network-box><a href={{business.socialNetwork.reservationLink}} title="{{\'--.business.socialNetwork.reservation\' | translateText}}" target=_blank><img src=/assets/images/social_network/reservation.png></a></div><div ng-show=!!business.socialNetwork.opinionLink class=business-social-network-box><a href={{business.socialNetwork.opinionLink}} title="{{\'--.business.socialNetwork.opinion\' | translateText}}" target=_blank><img src=/assets/images/social_network/opinion.png></a></div><div ng-show=!!business.socialNetwork.ecommerceLink class=business-social-network-box><a href={{business.socialNetwork.ecommerceLink}} title="{{\'--.business.socialNetwork.ecommerce\' | translateText}}" target=_blank><img src=/assets/images/social_network/e_commerce.png></a></div></td></tr></table><table class=business-info-line ng-show="displaySchedule() === true"><tr><td><schedule-ctrl ng-info={dto:business.schedules}></schedule-ctrl></td></tr></table></div><div class="section gallery-mobile" ng-show="tabToDisplay==\'gallery\'"><h4>{{\'--.generic.gallery\' | translateText}}</h4><img ng-repeat="image in business.galleryPictures" style="margin-top: 5px" ng-click=openGallery(image) ng-src="{{image | image}}"></div></div></div></div></div></div>'),a.put("js/view/mobile/_businessNotification.html",'<mobile-title-ctrl display-menu=false title="\'--.businessNotification.modal.title.create\'"></mobile-title-ctrl><div class=app-body><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="section scrollable-content scrollable-content-body"><div class=scrollable-content-inner><div class=inject-box></div><button id=promotion-modal-btn-save type=button class="btn gling-button-dark" ng-click=save(false)>{{\'--.generic.save\' | translateText}}</button></div></div></div></div></div>'),a.put("js/view/mobile/_customer_registration.html",'<mobile-title-ctrl title="\'--.page.customer_registration.title\'" display-menu=false></mobile-title-ctrl><div class=app-body><div class="app-content modal-login"><div class=scrollable><div class="section customer-registration scrollable-content"><div class=modal-description>{{\'--.customer.registrationModal.help.business\' |translateText}}<br></div><div class=facebook-login-btn-container><button ng-click=fb_login(); class="facebook-login-btn btn gling-button-dark"><img src="/assets/images/facebook/login_icon.png"> <span>{{\'--.loginModal.facebook.btn\' |translateText}}</span></button></div><table class=horizontal-split><tr><td><div></div></td><td>{{\'--.generic.or\' | translateText}}</td><td><div></div></td></tr></table><account-form-ctrl ng-info=accountParam></account-form-ctrl><div class=generic-center><button class="btn gling-button-dark" ng-click=save()>{{\'--.generic.registration\' | translateText}}</button></div></div></div></div></div>'),a.put("js/view/mobile/_followed_business_page.html",'<mobile-title-ctrl display-menu=false title="\'--.followed-business.page.title\'"></mobile-title-ctrl><div class=app-body><div class="app-content modal-login"><div class=scrollable><div class="section customer-registration scrollable-content followed-business"><div ng-repeat="business in businesses" class=followed-business-line><div ng-click="navigateTo(\'/business/\'+business.id)"><img class=illustration ng-src="{{business.illustration | image}}"> {{business.name}} {{business.followingFrom | date}}</div><div><button class="btn btn-xs gling-button-dark" ng-click=stopFollow(business)>{{\'--.business.follow.stopFollowing\' | translateText}}</button> <button class="btn btn-xs gling-button-dark" ng-click=setNotification(business)><i class="glyphicon glyphicon-ok" ng-show=business.followingNotification></i> <i class="glyphicon glyphicon-remove" ng-hide=business.followingNotification></i> {{\'--.generic.notification\' | translateText}}</button></div></div></div></div></div></div>'),a.put("js/view/mobile/_forgotPassword.html",'<mobile-title-ctrl title="\'--.page.forgot_password.title\'" display-menu=false></mobile-title-ctrl><div class=app-body><div class=app-content><div class=scrollable><div class="section customer-registration scrollable-content"><p>{{\'--.forgotPassword.desc\' | translateText}}</p><dir-field-text ng-info=fields.email></dir-field-text><div class=generic-center><button ng-click=save() ng-disabled=loading type=button class="btn gling-button-dark">{{\'--.mobile.forgotPassword.btn\' | translateText}}</button></div></div></div></div></div><div class="navbar navbar-app navbar-absolute-bottom"><div class="btn-group navbar-brand-center"><div style="text-align: center;width: 100%"><div class="btn btn-navbar glyphicon glyphicon-home" ng-click="navigateTo(\'/\')"></div></div></div></div>'),a.put("js/view/mobile/_home.html",'<header-search-ctrl></header-search-ctrl><div class=app-body><div class=app-content><div class=scrollable><div class="scrollable-content scrollable-content-body"><div class=scrollable-content-inner><div class=home-page-interest-box><div ng-click=selectInterest()><span class=gling-button>{{\'--.home.mobile.selectInterest\' | translateText}}</span> <i ng-show="getSelectedInterest()!=null" class="home-interest gling-icon {{\'gling-icon-\' + getSelectedInterest().name}} selected"></i></div></div><publication-list-mobile-ctrl ng-info=publicationListCtrl></publication-list-mobile-ctrl><div class=help-div ng-show="emptyMessage!==null">{{\'--.home.emptyResult.\'+emptyMessage | translateText}}</div><business-list-mobile-ctrl ng-info=businessListParam ng-show="emptyMessage!==null"></business-list-mobile-ctrl></div></div></div></div></div><div class="navbar navbar-app navbar-absolute-bottom"><div class="btn-group navbar-brand-center"><div class=home-footer><div class="home-interest-switch home-interest-box-background"><div><button class="gling-button gling-icon gling-icon-location button-with-label home-interest" ng-class="{\'selected\':followedMode !== true}" ng-click=setFollowingMode(false)><p>{{\'--.home.localisation.help\' | translateText}}</p></button></div><div><div class=onoffswitch ng-click=setFollowingMode()><label class=onoffswitch-label ng-class="{\'followedMode\':followedMode}"><span class=onoffswitch-inner></span> <span class=onoffswitch-switch></span></label></div></div><div><button class="gling-button gling-icon gling-icon-bell button-with-label home-interest" ng-class="{\'selected\':followedMode === true}" ng-click=setFollowingMode(true)><p>{{\'--.home.followning.help\' | translateText}}</p></button></div></div></div></div></div>'),a.put("js/view/mobile/_legal.html","<mobile-title-ctrl title=\"'--.page.legal.title'\" display-menu=false></mobile-title-ctrl><div class=app-body><div class=\"app-content modal-login\"><div class=scrollable><div class=\"section customer-registration scrollable-content\"><p lang=fr-FR align=center><strong>CONDITIONS</strong> <strong>GENERALES d’utilisation du site Gling</strong></p><h1>Préambule</h1><p align=justify>Le site www.gling.be est géré par la société en formation Gling ayant pour mission de mettre en relation des commerces et des consommateurs et de créer une nouvelle forme d’interactivité et de suivi entre ces deux acteurs.</p><p><strong>Article</strong> <strong>1 – DEFINITIONS</strong></p><p align=justify>Dans les présentes Conditions générales d’utilisation, les mots ou groupes de mots qui suivent ont la signification définie au présent article. La définition d’un mot donné au singulier vaut lorsque le mot est utilisé au pluriel dans les Conditions générales d’utilisation et inversement. Lorsque les mots ou groupes de mots définis sont utilisés dans les présentes Conditions générales d’utilisation, la première lettre du mot (ou de chaque mot) est une majuscule. Lorsque le même mot est employé dans les Conditions générales d’utilisation sans majuscule, il n'a pas le sens donné au présent article, mais celui du langage commun.</p><p lang=fr-FR align=justify><u>Conditions générales d’utilisation</u> : le terme « Conditions générales d’utilisations » désigne le présent document.</p><p lang=fr-FR align=justify><u>Site</u> : le terme « Site » vise le site internet <a href=http://www.gling.be>www.gling.be</a>.</p><p lang=fr-FR align=justify><u>Utilisateur</u> : le terme « Utilisateur » vise toute personne, quelle qu’elle soit, utilisant le Site à quelque fin que ce soit.</p><p lang=fr-FR align=justify><u>Commerce</u> : le terme « Commerce » vise toute personne qui exerce des actes qualifiés commerciaux par la loi et qui en font leur profession habituelle, soit à titre principal, soit à titre d'appoint et enregistré comme tel sur le Site.</p><p lang=fr-FR align=justify><u>Titulaire du site</u> : le terme « Titulaire du site » vise la société en formation de droit belge Gling ou toute société issue de la restructuration de celle-ci ou toute société contrôlée par celle-ci.</p><p lang=fr-FR align=justify><u>Compte</u> : le terme « Compte » vise le compte utilisateur tel que complété par l’Utilisateur lors de son inscription.</p><p lang=fr-FR align=justify><u>Produit</u> : le terme « Produit » vise tous biens ou services susceptibles de faire l'objet d'une publication par l’intermédiaire du Site.</p><p lang=fr-FR align=justify><strong>Article</strong> <strong>2</strong> <strong>–</strong> <strong>OBJET</strong></p><p lang=fr-FR align=justify>Le présent document a pour objet de déterminer les conditions générales d’utilisation du Site.</p><p lang=fr-FR align=justify>L’Utilisateur s’engage à utiliser le Site avec toute la prudence et diligence auxquelles il est tenu, dans le respect des dispositions légales et d’ordre public, nationales et internationales et des présentes dispositions.</p><p lang=fr-FR align=justify><strong>ARTICLE 3 – ENTREE EN VIGUEUR ET DUREE</strong></p><p lang=fr-FR align=justify>Les présentes Conditions entrent en vigueur à la date de mise en ligne du Site.</p><p lang=fr-FR align=justify><strong>Article 4 – ACCEPTATION</strong></p><p lang=fr-FR align=justify>L’utilisation du Site, à quelque titre que ce soit, suppose l’acceptation pleine et entière par l’Utilisateur, quel qu’il soit, ainsi que sa compréhension des présentes Conditions, en ce compris la primauté des Conditions sur toutes autres conditions générales que l’Utilisateur du Site pourrait invoquer.</p><p lang=fr-FR align=justify>L’acceptation des présentes conditions générales d’utilisation du site internet Gling donne mandat au Titulaire d’une part de mettre en relation les commerces et les utilisateurs et d’autre part, de réaliser toutes les opérations effectuées par l’intermédiaire du Site suivant les modalités précisées ci-après.</p><p lang=fr-FR align=justify><strong>Article 5 – MODIFICATION</strong></p><p lang=fr-FR align=justify>Le Titulaire se réserve le droit de modifier périodiquement, unilatéralement et sans avis préalable les Conditions, par exemple pour les adapter aux modifications législatives et réglementaires, ou modifier les fonctionnalités proposées. L’Utilisateur devra consulter régulièrement ces Conditions pour être informé des modifications effectuées. L’Utilisateur est présumé avoir pris connaissance, accepté et compris ces modifications par la poursuite de l’utilisation du Site.</p><p lang=fr-FR align=justify><strong>Article 6 – Prestation de Services</strong></p><p align=justify>Le Site a pour finalité d’offrir aux Utilisateurs un service leur permettant de suivre l’actualité des commerces bruxellois.</p><p align=justify>A ce titre, le Site constitue une plateforme de mise en relation entre des consommateurs et/ou des commerçants. En aucun cas, le Titulaire n’assume les obligations nées de l’exécution d’un contrat de vente.</p><p align=justify>Le Titulaire est un tiers par rapport aux Commerces et intervient qu’à titre d’intermédiaire entre les Commerces et les Utilisateurs qui les ont consultés. Le Titulaire ne peut voir sa responsabilité engagée en raison de la défaillance, à quelque titre que ce soit, ou de l’exactitude des informations publiées par les Commerces.</p><p align=justify>Les engagements pris par les Commerces souhaitant partager des offres promotionnelles constituent de simples promesses faites à l’égard de l’Utilisateur et n’engagent en aucune manière le Titulaire.</p><p lang=fr-FR align=justify><strong>Article 7 – FORMULAIRE D’ENREGISTREMENT – COMPTE UTILISATEUR</strong></p><p align=justify>Pour accéder aux services fournis par le Site, l’Utilisateur doit créer un Compte. Lors de son inscription, l’Utilisateur est tenu de fournir des informations complètes et exactes et s’engage à notifier au Titulaire sans délai toute modification de celles-ci.</p><p align=justify>En s'enregistrant, l’Utilisateur référence un identifiant unique et un mot de passe nominatif strictement personnels, qu'il s'engage à conserver confidentiels.</p><p align=justify>L’Utilisateur s'engage à ne pas prendre un identifiant injurieux, contraire à l’ordre public ou aux bonnes mœurs, portant atteinte aux droits de tiers, aux lois et aux règlements en vigueur en Belgique ainsi qu’à l’image de Gling.</p><p align=justify>L’Utilisateur s'engage à ne pas créer ou utiliser d'autres comptes que celui initialement créé, que ce soit sous sa propre identité ou celle d’un tiers. Toute dérogation à cette règle devra faire l'objet d'une demande explicite de la part de l’Utilisateur et d'une autorisation expresse du Titulaire. Le fait de créer ou d’utiliser de nouveaux comptes sous sa propre identité ou celle de tiers sans avoir demandé et obtenu l'autorisation préalable du Titulaire pourra entraîner la suspension immédiate des Comptes de l’Utilisateur de tous les services associés à ce Compte conformément à l’article 10 ci-après.</p><p align=justify>L’Utilisateur est seul responsable de la confidentialité, de la sécurité et de l’usage de son identifiant et du mot de passe liés à son Compte.</p><p align=justify>Le Titulaire ne pourra être tenu responsable de quelque dommage occasionné par la mention de données erronées ou non suffisamment précises par l’Utilisateur lors de l’inscription de son Compte.</p><p><strong>Article 7 – MAJORITE</strong></p><p align=justify>L’Utilisateur déclare être majeur et disposer de la capacité d’exercice pour s’engager aux termes des présentes Conditions.</p><p align=justify>L’Utilisateur veille à s’assurer que l’accès et/ou l’utilisation de son compte par tout tiers, en ce compris des mineurs d’âge, sans son autorisation préalable est bloqué. Le Titulaire ne peut en aucune manière voir sa responsabilité engagée, à quelque titre que ce soit, en raison de l’utilisation du Site et/ou du Compte utilisateur par un mineur d’âge, par quelque moyen que ce soit.</p><p><strong>Article 8 – Utilisation du site</strong></p><p align=justify>Les Utilisateurs s’engagent à utiliser les services offerts par le Site de bonne foi et à ne pas contrevenir aux présentes conditions générales.</p><p align=justify>Les Utilisateurs s’engagent expressément à ne pas utiliser les services offerts par le Site et le Titulaire à des fins illicites et contraires aux bonnes mœurs.</p><p align=justify>A cet effet, l’Utilisateur s’engage à ne pas reproduire, sans l’autorisation préalable et exprès de son auteur, sans que cette liste ne soit exhaustive, toute œuvre, illustration, image, photographie, texte, fichier, etc., et plus généralement tout contenu protégé par des droits de propriété intellectuelle et industrielle.</p><p align=justify>L’Utilisateur s’engage à procéder à toutes les vérifications nécessaires relativement aux droits attachés aux éléments reproduits dans sa (ses) publication(s) et, le cas échéant, à obtenir l’autorisation des titulaires de ces droits.</p><p align=justify>Le Commerce s’engage à intégralement garantir le Titulaire contre tout dommage souffert, directement ou indirectement par le Titulaire du fait de son comportement.</p><p align=justify>Le Titulaire se réserve la faculté de suspendre l’accès à toute publication qu’il considère comme violant les présentes conditions générales, une norme légale ou étant contraire aux bonnes mœurs. Dans une telle hypothèse, le Titulaire notifiera à l’Utilisateur concerné, par email, la mesure de suspension, en l’invitant à mettre fin au comportement fautif identifié dans la notification.</p><p><strong>Article 9 – OBLIGATIONS DE L’UTILISATEUR</strong></p><p align=justify>L’Utilisateur a l’obligation de se conformer aux instructions, messages, règles, termes et conditions mentionnés par le Titulaire lors de son utilisation du Site.</p><p align=justify>Toute instruction et note (par ex. Questions fréquemment posées) formulées par le Titulaire doivent être respectées par les Utilisateurs dans leur version actualisée éventuellement amendée. Si les Utilisateurs ne respectent pas l’une ou l’autre de leurs obligations issues des Conditions, quelle qu’elle soit, le Titulaire peux prendre les mesures appropriées (par ex., émettre un avertissement, bloquer ou effacer le contenu, rendre inaccessible l’accès des Utilisateurs ou les avertir).</p><p align=justify>Les Utilisateurs sont responsables, sans la moindre restriction, de leur conduite personnelle lors de leur utilisation. Ceci s’applique en particulier en cas de doute sur toute contribution publiée ou tout contenu utilisé par l’Utilisateur.</p><p align=justify>En ce qui concerne plus particulièrement le Commerce, il est supposé au préalable s’assurer que ses publications ne violent pas des règlementations particulières ou ne violent pas des règles publiques ou des droits de tiers (par ex. droit d’auteur, droit visant la protection des données). Le Commerce est seul responsable du contenu de sa page personnelle. Le Titulaire n’a pas l’obligation de vérifier le caractère correct ni de vérifier la légalité de ces contenus et contributions.</p><p align=justify>En publiant du contenu sur le Site, le Commerce confère au Titulaire les droits sur celui-ci. En fonction du contenu, ceci inclut notamment le droit de conserver, adapter, modifier le contenu et le rendre public. Le Commerce ne pourra que demander l’effacement subséquent du contenu posté sur le Site s’il existe des raisons importantes et justifiées de procéder ainsi.</p><p align=justify>Le Commerce libère et décharge le Titulaire des conséquences de toute plainte qui serait introduite contre lui par des tiers du fait de la violation par lui d’une obligation ou d’un droit, sauf s’il n’en est pas l’auteur. Les coûts raisonnables de défense devront également être remboursés au Titulaire.</p><p><a name=_Ref378666875></a> <strong>Article 10 – SUSPENSION DE L’ACCES AUX SITE – SUPPRESION DU COMPTE</strong></p><p align=justify>A défaut pour l’Utilisateur visé par la mesure de suspension visée à l’article 8, de remédier à la situation dénoncée, le Titulaire lui adressera une mise en demeure de se conformer immédiatement audit article.</p><p align=justify>Si nonobstant la mise en demeure, l’Utilisateur ne met pas fin volontairement au comportement fautif dénoncé, le Titulaire supprimera, sans nouvel avis ni préavis, le Compte sans indemnité au profit de ce dernier.</p><p align=justify>Le Titulaire se réserve la faculté de refuser la ré-inscription de l’Utilisateur qui a fait l’objet d’une suppression de son Compte.</p><p align=justify>De manière générale, le Titulaire se réserve la faculté de suspendre ou d’interrompre tout ou partie de l’accès au Site, ainsi que de prendre des mesures techniques ainsi que, le cas échéant, légales, en cas présomption, dans le chef de l’Utilisateur, qu’il porte atteinte, à quelque titre que ce soit, aux intérêts du Titulaire, du Site ou de tout tiers, en ce compris à ses droits de propriété intellectuelle.</p><p align=justify><strong>Article 11 – propriété intelectuelle</strong></p><p align=justify><a name=OLE_LINK6></a> La notion de « Propriété Intellectuelle » vise tout objet et droit de propriété intellectuelle et industrielle, en ce compris (sans y être limité) les droits d’auteur, les marques, les brevets, les modèles, les banques de données, les codes sources et tout autre matériel dont Le Titulaire est propriétaire.</p><p align=justify>La structure générale du Site ainsi que l'ensemble des contenus qui y sont diffusés (à savoir notamment les images, articles, photographies, illustrations, signes distinctifs, logos, marques, vidéos, interviews, sons, textes, etc.), y incluant d’éventuelles newsletters, sont protégés par la législation nationale et internationale en matière de propriété intellectuelle, et notamment le droit d'auteur, les droits voisins, le droit des marques, le droit à l'image.</p><p align=justify>Le Titulaire se réserve explicitement les droits de propriété intellectuelle et autres droits sur son nom, son logo et son identité visuelle. Il est interdit aux tiers d’utiliser ces noms, logos et identité visuelle sans l’autorisation écrite expresse préalable du Titulaire.</p><p align=justify>Les présentes Conditions n'entraînent le transfert d'aucun droit de propriété intellectuelle aux Utilisateurs qui ne sont pas autorisés à copier, envoyer, distribuer, diffuser, vendre, publier, émettre, faire circuler, arranger ou modifier le matériel du Site autrement que dans le cadre de l’utilisation et la gestion des listes créées.</p><p align=justify>Tous les droits de reproduction sont réservés au Titulaire, y compris pour les textes, les documents téléchargeables, les représentations iconographiques et photographiques. A ce titre, à défaut d'autorisation expresse du Titulaire, il est strictement interdit d'exploiter les contenus du Site et notamment de les reproduire, représenter, modifier ou adapter en tout ou partie.</p><p align=justify>Le Titulaire est conscient que son nom et son logo pourrait être détournés abusivement par des tiers dans le cadre d’activités frauduleuses. À cet égard, le Titulaire attire l’attention de ses Utilisateurs à être vigilants et recommande dès lors de ne pas entrer en contact avec les instigateurs de ces activités frauduleuses et de ne pas envoyer d'argent ni de révéler des informations bancaires ou relatives à une carte de crédit ou à une identité à quiconque prétendant représenter le Titulaire ou entretenir une relation bancaire avec le Titulaire sans s’être assuré au préalable de vérifier l’émetteur de la demande. En cas de doute, il vous est loisible de prendre contact avec le Titulaire à l’adresse info@@gling.be.</p><p align=justify>Le Titulaire ne peut en tout état de cause être tenu pour responsable de l’utilisation abusive ou frauduleuse de son nom, de son logo ou de son adresse. Il est demandé d’informer directement les services de police compétents ou les autorités judicaires de toute activité suspecte. Ces activités peuvent également être signalées au Titulaire.</p><p align=justify><strong>Article 12 –</strong> <strong>DONNÉES PERSONNELLES</strong></p><p align=justify>Soucieuse du respect de la vie privée des Utilisateurs du Site, le Titulaire s'engage à ce que la collecte et le traitement d'informations personnelles, soient effectués au sein du Site conformément à la loi belge du 8 décembre 1992 relative à la protection de la vie privée.</p><p align=justify>Moyennant une demande envoyée par e-mail, adressée à info@@gling.be, les Utilisateurs peuvent obtenir, gratuitement, la communication écrite des données à caractère personnel les concernant ainsi que, le cas échéant, la rectification de celles qui seraient inexactes, incomplètes ou non pertinentes.</p><p align=justify>Le Titulaire s'engage à faire ses meilleurs efforts pour protéger les données à caractère personnel, afin notamment d'empêcher qu'elles soient déformées, endommagées ou communiquées à des tiers non autorisés.</p><p align=justify>Le Titulaire peut divulguer les informations personnelles des Utilisateurs sur requête d'une autorité légale ou en toute bonne foi en considérant que cette action est requise :</p><p align=justify>- pour se conformer à toute loi ou réglementation en vigueur,</p><p align=justify>- pour protéger ou défendre les droits ou les biens du Titulaire ou du Site,</p><p align=justify>- et, pour intervenir, dans des circonstances extrêmes, dans le but de protéger la sécurité personnelle de l’Utilisateur du Site ou du public.</p><p align=justify><strong>Article 13 –</strong> <strong>RESPONSABILITE</strong></p><p>La responsabilité du Titulaire ne saurait être engagée dans les cas suivants :</p><ul><li><p lang=fr-FR align=justify>difficultés de fonctionnement du Site ou interruption de ses services indépendamment de sa volonté ;</p></li></ul><ul><li><p lang=fr-FR align=justify>interruptions momentanées des services ou du Site nécessaires à leur évolution, maintenance ou mise à jour ;</p></li></ul><ul><li><p lang=fr-FR align=justify>défaillances ou dysfonctionnement du réseau Internet dans la transmission de données, messages ou documents ;</p></li></ul><p align=justify>Le Titulaire fournit des efforts raisonnables pour donner des informations exactes sur le Site, qui peuvent être modifiées et mises à jour sans préavis ni notification. Le Titulaire, ainsi que tout autre partie mentionnée sur le Site ne supportent aucune responsabilité et n’assurent aucune garantie explicite ou implicite en ce qui concerne l’absence d’erreur, de virus ou de fonctionnement défectueux du Site et/ou sur le caractère correct, raisonnable, à jour et complet du contenu du Site et des pages.</p><p align=justify>Le Titulaire ne peut en aucun cas être tenu pour responsable de tout dommage direct ou indirect dans le sens le plus large, qui surviendrait de ou serait lié à l’usage du Site.</p><p align=justify><strong>Article 14 –</strong> <strong>INFORMATION SUR LE SITE</strong></p><p>Les descriptions des produits/services présentes sur le Site sont indiquées à titre purement informative. Elles ne sauraient engager la responsabilité de Titulaire, à quelque titre que ce soit.</p><p><strong>Article 15 – FORUM et commentaires</strong></p><p align=justify>Si le Titulaire permet aux Utilisateurs de laisser des commentaires sur certaines pages du Site, ces derniers s’engagent à respecter les législations généralement applicables et notamment à ne publier aucun propos dénigrant, diffamatoire injurieux, haineux, belliqueux, raciste, xénophobe ou incitant à la discrimination, à la haine ou à la violence à l'égard d'une personne, physique ou morale, d'un groupe, d'une communauté ou de leurs membres, en raison d'une prétendue race, de la couleur, de l'ascendance ou de l'origine nationale ou ethnique de ceux-ci ou de certains d'entre.</p><p align=justify>L’Utilisateur s’interdit de poster quelques images, illustrations, liens hypertextes, photos, etc., violant une quelconque disposition légale belge ou internationale.</p><p align=justify>Le Titulaire ne pourra en aucune manière voir sa responsabilité engagée du fait de quelque information ou matériel, quel qu’il soit, posté par quelque Utilisateur que ce soit sur le Site.</p><p align=justify><strong>Article 16 – Liminatation d’utilisation</strong></p><p align=justify>Le Commerce s’interdit d’utiliser le Site :</p><ul><li><p align=justify>comme plateforme de transfert de publicité, de newsletter, de virus et/ou de spam, sans que cette liste ne soit exhaustive ;</p></li></ul><ul><li><p align=justify>afin de promouvoir, diffuser des objets dont la commercialisation est interdite ou contraire aux bonnes mœurs.</p></li></ul><p align=justify><strong>Article 17 – Liens hypertextes</strong></p><p align=justify>Les liens hypertextes mis en œuvre en direction d'autres sites internet ne sauraient engager la responsabilité du Titulaire, celui-ci n'exerçant aucun contrôle sur le contenu de ces sites.</p><p align=justify>Si le Titulaire n’est pas opposé à la création de liens hypertextes vers son site, une autorisation doit cependant être demandée et obtenue préalablement par écrit. Le Titulaire se réserve néanmoins la faculté d’exiger la suppression d’un lien vers une des pages du Site s’il estime que le maintien du lien ne correspond pas à ses missions, valeurs ou serait susceptible de lui porter préjudice.</p><p align=justify><strong>Article 18 – Cookies</strong></p><p align=justify><a name=OLE_LINK7></a> <a name=OLE_LINK8></a> Gling entend vous informer au sujet de l’usage des cookies conformément à l’article 129,1°, de la loi du 13 juin 2005 relative aux communications électroniques. Le terme « cookies » est utilisé pour désigner notamment l’ensemble des fichiers de texte, « pixels tags » ou, lors de votre utilisation de notre application, des identifiants Android ou des « IDFA » qui sont susceptibles de s’installer sur votre ordinateur lors de vos visites sur le site Gling et son application. Ces fichiers comportent des informations telles que par exemple vos préférences linguistiques, votre dernière adresse de géolocalisation, vos intérêts, ou encore des données relatives à vos interactions avec le contenu du site Gling (nombres de visites sur la plateforme, pages visitées et produits pré-réservés ou achetés, publicités sur lesquelles vous cliquez…) de manière à ce que ces informations ne doivent plus être renseignés lors de vos visites ultérieures. Ainsi, les cookies facilitent votre visite et votre navigabilité sur le site Gling et nous permettent par la même occasion de sauvegarder vos préférences et de suivre l’évolution des modes d’utilisation du site.</p><p align=justify>Vous pouvez à tout moment modifier la configuration de vos cookies (vous pouvez par exemple demander à être avertis lorsque des requêtes de cookies sont adressées à votre ordinateur, ou refuser ces cookies) en modifiant les paramètres de votre navigateur internet (Internet Explorer, Firefox, Chrome, Safari ou Opera). Il convient toutefois de constater qu'il sera dans ce cas possible que vous ne puissiez plus vous enregistrer sur le site Gling.be ou utiliser certaines fonctionnalités pour lesquelles une identification ou un encodage préalables sont requis.</p><p align=justify>Le site internet de Gling utilise les types de cookies suivants:</p><p align=justify><strong>Cookies à finalité technique</strong></p><p align=justify><a name=OLE_LINK12></a> <a name=OLE_LINK13></a> <a name=OLE_LINK14></a> Il s'agit de cookies qui sont indispensables au fonctionnement du site internet. Sans ces cookies, le site ne pourrait pas fonctionner correctement. Ces cookies ne peuvent dès lors pas être désactivés.</p><p align=justify><strong>Cookies fonctionnels</strong></p><p align=justify>Il s'agit de cookies qui servent à améliorer la fonctionnalité du site internet Gling.be et l’usage personnel que vous en faites. Il peut par exemple s'agir de cookies qui retiennent le contenu que vous avez consulté ou l’adresse électronique et le mot de passe que vous avez introduits lorsque vous vous êtes identifiés lors d'une visite précédente. L'usage de cookies fonctionnels permet à Gling d'offrir un contenu adapté à vos centres d'intérêt, ce qui vous offre un gain de temps et vous évite de devoir systématiquement vous identifier ou remplir vos informations lors de chaque nouvelle utilisation du site Gling.be.</p><p align=justify><strong>Cookies analytiques</strong></p><p align=justify>Il s’agit des cookies qui permettent de connaître l’utilisation et les performances des diverses rubriques du site Gling.be et ce afin d’en améliorer le fonctionnement.</p><p align=justify><strong>Cookies publicitaires</strong></p><p align=justify>Il s’agit des cookies qui permettent de choisir en temps réel la publicité afficher sur des sites tiers, en fonction des contenus et services que vous avez consultés précédemment ou de vous proposer des produits et des contenus susceptibles de vous intéresser.</p><p align=justify><strong>Cookies de réseaux</strong></p><p align=justify>Enfin, les offres publiées sur Gling.be sont susceptibles d’être accompagnées d’une application informatique tierce permettant le partage de contenus par les utilisateurs de Gling sur les réseaux sociaux, tels que les boutons présents sous la mention \"Partager cette page\".</p><p align=justify>Gling décline tout contrôle sur le processus employé par les réseaux sociaux concernés (Facebook, Twitter, Google+ et Pinterest) pour collecter ces informations et nous vous invitons à consulter les politiques de confidentialité y afférentes.</p><p align=justify><strong>Article 19 – Dispositions diverses</strong></p><p align=justify>Les Utilisateurs acceptent que le Titulaire leur adresse des notifications, par courriel, par courrier postal ou par tout autre moyen de communication utile.</p><p align=justify>Si une ou plusieurs clauses des Conditions venaient à être déclarées nulles ou inapplicables, la nullité ou l’inapplicabilité ne saurait affecter la validité ou l’applicabilité des autres clauses.</p><p align=justify>Le fait que le Titulaire omette, à un moment donné, d’exiger la stricte application des Conditions, ne peut être considéré comme une renonciation aux droits dont elle dispose et n’empêchera pas le Titulaire d’en exiger la stricte observation.</p><p align=justify>Le fait que le Titulaire n’ait pas exigé le respect ou ait négligé de faire respecter une des dispositions des Conditions ne signifie pas qu’il ait renoncé aux droits qu’il détient en vertu des Conditions et n’affecte pas la validité en tout ou en partie desdites Conditions ni ne compromet l’exercice du droit du Titulaire de prendre les actions qui s’imposent.</p><p align=justify><strong>Article 20 – Loi applicable et clause attributive de compétence</strong></p><p align=justify>Sauf dérogation expresse et écrite, les Conditions sont exclusivement régis par le droit belge.</p><p align=justify>Les Utilisateurs s’efforcent de résoudre à l’amiable tout différend ou litige éventuel qui les opposeraient au Titulaire survenant à l’occasion de l’exécution des Conditions.</p><p align=justify><a name=_GoBack></a> A défaut de solution amiable, les cours et tribunaux francophones de l’arrondissement judiciaire de Bruxelles sont seuls compétents. La langue de la procédure sera le français.</p></div></div></div></div>"),
a.put("js/view/mobile/_profile.html",'<mobile-title-ctrl title="\'--.page.profile.title\'" display-menu=true></mobile-title-ctrl><div class="app-body profile-page"><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="section scrollable-content"><div ui-state=activeTab default><ul class="nav nav-tabs"><li ng-click="activeTab = \'personal\'" ng-class="{\'active\':activeTab == \'personal\'}"><a ui-set="{\'activeTab\': 1}">{{\'--.customer.profile.personalInformation\' | translateText}}</a></li><li ng-click="activeTab = \'address\'" ng-class="{\'active\':activeTab == \'address\'}"><a ui-set="{\'activeTab\': 2}">{{\'--.customer.profile.myAddresses\' | translateText}}</a></li><li ng-click="activeTab = \'interest\'" ng-class="{\'active\':activeTab == \'interest\'}"><a ui-set="{\'activeTab\': 3}">{{\'--.customer.profile.interest\' | translateText}}</a></li></ul><div ng-show="activeTab == \'personal\'"><account-form-ctrl ng-info=accountParam></account-form-ctrl><button class="btn gling-button-dark glyphicon glyphicon-edit" ng-show=accountParam.disabled ng-click="accountParam.disabled = false">{{\'--.generic.edit\' |translateText}}</button> <button class="btn gling-button-dark" ng-hide=accountParam.disabled ng-click=accountSave()>{{\'--.generic.save\' | translateText}}</button> <button class="btn gling-button-dark" ng-hide=accountParam.disabled ng-click=accountCancel()>{{\'--.generic.cancel\' | translateText}}</button> <button ng-show="model.myself.loginAccount===true" ng-click=editPassword() type=button class="btn gling-button-dark">{{\'--.changePasswordModal.title\' | translateText}}</button><table class=profile-social-network-table><tr><th colspan=2>Lien avec vos réseaux sociaux</th></tr><tr><td><img src="assets/images/social_network/facebook.png"></td><td><div class=link ng-click=fb_login(); ng-hide="model.myself.facebookAccount===true">{{\'--.profile.facebook.btn\' |translateText}}</div><div ng-show="model.myself.facebookAccount===true">Lié au compte facebook {{model.myself.facebookCredential.firstname}} {{model.myself.facebookCredential.lastname}}</div></td></tr></table></div><div ng-show="activeTab == \'address\'"><button class="btn gling-button-dark" ng-click=addAddress()>{{\'--.customer.profile.address.create\' | translateText}}</button><div class="panel panel-gling" ng-repeat="address in model.myself.addresses"><div class=panel-heading>{{address.name}}</div><div class=panel-body><div class=address-box><div><span>{{\'--.generic.street\' | translateText}}</span>{{address.street}}</div><div><span>{{\'--.generic.zip\' | translateText}}</span>{{address.zip}}</div><div><span>{{\'--.generic.city\' | translateText}}</span>{{address.city}}</div><div><span>{{\'--.generic.country\' | translateText}}</span>{{address.country}}</div></div><button class="btn gling-button-dark glyphicon glyphicon-edit" ng-click=editAddress(address)>{{\'--.generic.edit\' | translateText}}</button> <button class="btn gling-button-dark glyphicon glyphicon-remove" ng-click=deleteAddress(address)>{{\'--.generic.remove\' |translateText}}</button></div></div></div><div ng-show="activeTab == \'interest\'"><div ng-repeat="interest in model.myself.customerInterests" ng-show=interestParam.disabled class=category-box><span class="{{\'gling-icon gling-icon-\' + interest.name}}"></span> {{interest.translationName |translateText}}</div><customer-interest-form-ctrl ng-hide=interestParam.disabled ng-info=interestParam></customer-interest-form-ctrl><button class="btn gling-button-dark glyphicon glyphicon-edit" ng-show=interestParam.disabled ng-click="interestParam.disabled = false">{{\'--.generic.edit\' |translateText}}</button> <button class="btn gling-button-dark" ng-hide=interestParam.disabled ng-click=interestSave()>{{\'--.generic.save\' | translateText}}</button> <button class="btn gling-button-dark" ng-hide=interestParam.disabled ng-click="interestParam.disabled = true">{{\'--.generic.cancel\' | translateText}}</button></div></div></div></div></div></div>'),a.put("js/view/mobile/_promotion.html",'<mobile-title-ctrl display-menu=false title="\'--.promotion.modal.title.create\'"></mobile-title-ctrl><div class=app-body><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="section scrollable-content scrollable-content-body"><div class=scrollable-content-inner><div class=inject-box></div><button id=promotion-modal-btn-save type=button class="btn gling-button-dark" ng-click=save(false)>{{\'--.generic.save\' | translateText}}</button></div></div></div></div></div>'),a.put("js/view/mobile/_search_page.html",'<header-search-ctrl display-menu=false></header-search-ctrl><div class=app-body><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="scrollable-content scrollable-content-body"><div ng-show="results == null" class=loading><img src="/assets/images/big_loading.gif"></div><div ng-hide="results==null"><tabset><tab ng-show=businessTab.display active=businessTab.active><tab-heading>{{\'--.generic.business\' | translateText}} ({{businessTab.totalToDisplay}})</tab-heading><business-list-mobile-ctrl ng-info={data:businessTab.data}></business-list-mobile-ctrl></tab><tab ng-show=publicationTab.display active=publicationTab.active><tab-heading>{{\'--.generic.publication\' | translateText}} ({{publicationTab.totalToDisplay}})</tab-heading><publication-list-mobile-ctrl ng-info={data:publicationTab.data}></publication-list-mobile-ctrl></tab><tab ng-show=categoryTab.display active=categoryTab.active><tab-heading>{{\'--.generic.category\' | translateText}} ({{categoryTab.totalToDisplay}})</tab-heading><div ng-show="categoryTab == 0">{{\'--.list.nothing\' | translateText}}</div><div ng-repeat="(cat,value) in categoryTab.data"><span class="search-category link search-category-lev1" ng-click="navigateTo(\'/search/category:\'+cat)"></span> <span ng-repeat="(sCat,value2) in value"><span class="search-category link search-category-lev2" ng-click="navigateTo(\'/search/category:\'+sCat)"></span> <span ng-repeat="(ssCat,value3) in value2"><span class="search-category link search-category-lev3" ng-click="navigateTo(\'/search/category:\'+ssCat)">{{cat | translateText}} >> {{sCat | translateText}} >> {{ssCat | translateText}}</span><business-list-mobile-ctrl ng-info={data:value3,loading:false}></business-list-mobile-ctrl></span></span></div></tab></tabset></div></div></div></div></div>'),a.put("js/view/mobile/_welcome.html","<div class=app-body><div class=\"app-content modal-login welcome-page\"><div class=scrollable><div class=\"section customer-registration scrollable-content\"><div class=welcome-header><select class=gling-button-light ng-model=languageService.currentLanguage ng-options=\"lang.code as lang.language for lang in languageService.languages\"></select><div><span class=\"logo gling-icon gling-icon-logoapp button-with-label\"></span><h2>What's up in my shops</h2></div></div><h3>{{'--.mobile.welcome.registration.desc' |translateText}}</h3><div class=generic-center><button class=gling-button-dark ng-click=\"navigateTo('/customer_registration')\">{{'--.mobile.welcome.toCustomerRegistration.btn' | translateText}}</button></div><div class=separator></div><h3>{{'--.mobile.welcome.login.desc' | translateText}}</h3><login-form-ctrl ng-info=loginFormParam></login-form-ctrl><div class=generic-center><button ng-click=login() ng-disabled=loading type=button class=gling-button-dark>{{'--.mobile.welcome.login.btn' | translateText}}</button></div><div class=link style=\"display: inline-block\" ng-click=\"navigateTo('/forgot_password')\">{{'--.login.form.button.forgotPassword' | translateText}}</div></div></div></div></div>"),a.put("js/view/mobile/business.html",'<div class="navbar navbar-app navbar-absolute-top" ng-class="{\'header-with-advanced-search\':advancedSearch}"><div class="btn-group pull-left"><div class="btn btn-navbar" ng-click=back()><div class=nav-button><i class="glyphicon glyphicon-chevron-left"></i></div></div></div><div class="btn-group pull-right"><div class="btn btn-navbar" ng-click=followed()><div class="nav-button business-page-follow"><span class=selected ng-show=business.following>{{\'--.followWidget.stopFollow\' | translateText}}<i class="gling-icon gling-icon-bell"></i></span><span ng-hide=business.following>{{\'--.followWidget.follow\' | translateText}}<i class="gling-icon gling-icon-bell2"></i></span></div></div></div></div><div class=app-body><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="scrollable-content business-mobile-page scrollable-content-body"><div class=scrollable-content-inner><div class=business-page-header ng-style="{\'background-image\':\'url(\'+(business.landscape | image)+\')\' }"><div class="edit-button-container landscape-edit"></div><table ng-click=refreshPublications()><tr><td><div class=business-page-illustration-container><img class=business-illustration ng-src="{{business.illustration | image}}"><div class=edit-button-container></div></div></td><td><div class=business-page-name>{{business.name}}<div class=edit-button-container></div></div></td></tr></table></div><category-line-ctrl ng-info=categoryLineParams></category-line-ctrl><div style="overflow: auto"><div class=business-tab-set><div class=business-tab ng-show=tab.display() ng-class="{\'selected\':tabToDisplay === tab.name}" ng-click=tab.action() style=display:inline-block ng-repeat="tab in tab"><i class="gling-icon {{tab.icon}}"></i>{{tab.translatableName | translateText}}</div></div></div><div class=business-page-content ng-show="tabToDisplay==\'home\'"><div ng-show="myBusiness===true"><button id=business-btn-promotion-add class="btn gling-button-dark" ng-click=createPromotion() ng-disabled="business.businessStatus !== \'PUBLISHED\'">{{\'--.business.publication.btn.promotion\' | translateText}}</button><button class="btn gling-button-dark" ng-click=createNotification() ng-disabled="business.businessStatus !== \'PUBLISHED\'">{{\'--.business.publication.btn.notification\' | translateText}}</button></div><publication-list-mobile-for-business-ctrl ng-info=publicationListParam></publication-list-mobile-for-business-ctrl></div><div class="business-page-content section" ng-show="tabToDisplay==\'info\'"><table class=business-info-line ng-show="business.description !=null &amp;&amp; business.description.length &gt; 0"><tr><td colspan=2><span ng-bind-html="business.description | text : descriptionLimit"></span><span class=link ng-show="business.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000">{{\'--.textReuction.seeMore\' | translateText}}</span><span class=link ng-show="business.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase">{{\'--.textReuction.seeLess\' | translateText}}</span></td></tr></table><table class=business-info-line><tr><td colspan=2><div class=business-info-line-action><google-map-widget-ctrl ng-info=googleMapParams></google-map-widget-ctrl></div></td></tr><tr><td><div class=business-address>{{business.address.street}}<br>{{business.address.zip}},{{business.address.city}}</div></td><td class=td-action>{{business.distance / 1000 | number:2}} Km</td></tr></table><table class=business-info-line ng-show="business.phone!=null"><tr><td>{{business.phone}}</td><td class=td-action><a class="business-info-line-action glyphicon glyphicon-earphone" href=tel:{{business.phone}}></a></td></tr></table><table class=business-info-line ng-show="business.website!=null"><tr><td>{{\'--.generic.site\' | translateText}}</td><td class=td-action><a href={{business.website}} target=_blank>{{business.website}}</a></td></tr></table><table class=business-info-line ng-show="business.email!=null"><tr><td>{{business.email}}</td><td class=td-action><a class="business-info-line-action glyphicon glyphicon-envelope" href=mailto:{{business.email}}></a></td></tr></table><table class=business-info-line ng-show="displaySocialNetwork() === true"><tr><td><div class=business-social-network-box ng-show=!!business.socialNetwork.facebookLink><a id=welcome-link-facebook href={{business.socialNetwork.facebookLink}} title=Facebook target=_blank><img src=/assets/images/social_network/facebook.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.twitterLink><a id=welcome-link-twitter href={{business.socialNetwork.twitterLink}} title=Twitter target=_blank><img src=/assets/images/social_network/twitter.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.instagramLink><a id=welcome-link-instagram href={{business.socialNetwork.instagramLink}} title=Instagram target=_blank><img src=/assets/images/social_network/instagram.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.deliveryLink><a id=welcome-link-delivery href={{business.socialNetwork.deliveryLink}} title="{{\'--.business.socialNetwork.delivery\' | translateText}}" target=_blank><img src=/assets/images/social_network/delivery.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.reservationLink><a href={{business.socialNetwork.reservationLink}} title="{{\'--.business.socialNetwork.reservation\' | translateText}}" target=_blank><img src=/assets/images/social_network/reservation.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.opinionLink><a href={{business.socialNetwork.opinionLink}} title="{{\'--.business.socialNetwork.opinion\' | translateText}}" target=_blank><img src=/assets/images/social_network/opinion.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.ecommerceLink><a href={{business.socialNetwork.ecommerceLink}} title="{{\'--.business.socialNetwork.ecommerce\' | translateText}}" target=_blank><img src=/assets/images/social_network/e_commerce.png></a></div></td></tr></table><table class=business-info-line ng-show="displaySchedule() === true"><tr><td><schedule-ctrl ng-info={dto:business.schedules}></schedule-ctrl></td></tr></table></div><div class="section gallery-mobile" ng-show="tabToDisplay==\'gallery\'"><h4>{{\'--.generic.gallery\' | translateText}}</h4><img ng-click=openGallery(image) ng-src="{{image | image}}" ng-repeat="image in business.galleryPictures" style="margin-top: 5px"></div></div></div></div></div></div>'),a.put("js/view/mobile/businessNotification.html",'<mobile-title-ctrl display-menu=false title="\'--.businessNotification.modal.title.create\'"></mobile-title-ctrl><div class=app-body><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="section scrollable-content scrollable-content-body"><div class=scrollable-content-inner><div class=inject-box></div><button id=promotion-modal-btn-save class="btn gling-button-dark" ng-click=save(false) type=button>{{\'--.generic.save\' | translateText}}</button></div></div></div></div></div>'),a.put("js/view/mobile/customer_registration.html","<mobile-title-ctrl display-menu=false title=\"'--.page.customer_registration.title'\"></mobile-title-ctrl><div class=app-body><div class=\"app-content modal-login\"><div class=scrollable><div class=\"section customer-registration scrollable-content\"><div class=modal-description>{{'--.customer.registrationModal.help.business' |translateText}}<br></div><div class=facebook-login-btn-container><button class=\"facebook-login-btn btn gling-button-dark\" ng-click=fb_login();><img src=/assets/images/facebook/login_icon.png><span>{{'--.loginModal.facebook.btn' |translateText}}</span></button></div><table class=horizontal-split><tr><td><div></div></td><td>{{'--.generic.or' | translateText}}</td><td><div></div></td></tr></table><account-form-ctrl ng-info=accountParam></account-form-ctrl><div class=generic-center><button class=\"btn gling-button-dark\" ng-click=save()>{{'--.generic.registration' | translateText}}</button></div></div></div></div></div>"),a.put("js/view/mobile/followed_business_page.html",'<mobile-title-ctrl display-menu=false title="\'--.followed-business.page.title\'"></mobile-title-ctrl><div class=app-body><div class="app-content modal-login"><div class=scrollable><div class="section customer-registration scrollable-content followed-business"><div class=followed-business-line ng-repeat="business in businesses"><div ng-click="navigateTo(\'/business/\'+business.id)"><img class=illustration ng-src="{{business.illustration | image}}"> {{business.name}} {{business.followingFrom | date}}</div><div><button class="btn btn-xs gling-button-dark" ng-click=stopFollow(business)>{{\'--.business.follow.stopFollowing\' | translateText}}</button><button class="btn btn-xs gling-button-dark" ng-click=setNotification(business)><i class="glyphicon glyphicon-ok" ng-show=business.followingNotification></i><i class="glyphicon glyphicon-remove" ng-hide=business.followingNotification></i>{{\'--.generic.notification\' | translateText}}</button></div></div></div></div></div></div>'),a.put("js/view/mobile/forgotPassword.html",'<mobile-title-ctrl display-menu=false title="\'--.page.forgot_password.title\'"></mobile-title-ctrl><div class=app-body><div class=app-content><div class=scrollable><div class="section customer-registration scrollable-content"><p>{{\'--.forgotPassword.desc\' | translateText}}</p><dir-field-text ng-info=fields.email></dir-field-text><div class=generic-center><button class="btn gling-button-dark" ng-click=save() type=button ng-disabled=loading>{{\'--.mobile.forgotPassword.btn\' | translateText}}</button></div></div></div></div></div><div class="navbar navbar-app navbar-absolute-bottom"><div class="btn-group navbar-brand-center"><div style="text-align: center;width: 100%"><div class="btn btn-navbar glyphicon glyphicon-home" ng-click="navigateTo(\'/\')"></div></div></div></div>'),a.put("js/view/mobile/home.html",'<header-search-ctrl></header-search-ctrl><div class=app-body><div class=app-content><div class=scrollable><div class="scrollable-content scrollable-content-body"><div class=scrollable-content-inner><div class=home-page-interest-box><div ng-click=selectInterest()><span class=gling-button>{{\'--.home.mobile.selectInterest\' | translateText}}</span><i class="home-interest gling-icon selected {{\'gling-icon-\' + getSelectedInterest().name}}" ng-show="getSelectedInterest()!=null"></i></div></div><publication-list-mobile-ctrl ng-info=publicationListCtrl></publication-list-mobile-ctrl><div class=help-div ng-show="emptyMessage!==null">{{\'--.home.emptyResult.\'+emptyMessage | translateText}}</div><business-list-mobile-ctrl ng-show="emptyMessage!==null" ng-info=businessListParam></business-list-mobile-ctrl></div></div></div></div></div><div class="navbar navbar-app navbar-absolute-bottom navbar-footer"><div class="btn-group navbar-brand-center"><div class=home-footer><div class="home-interest-switch home-interest-box-background"><div><button class="gling-button gling-icon gling-icon-location button-with-label home-interest" ng-class="{\'selected\':followingMode !== true}" ng-click=setFollowingMode(false)><p>{{\'--.home.localisation.help\' | translateText}}</p></button></div><div><div class=onoffswitch ng-click=setFollowingMode()><label class=onoffswitch-label ng-class="{\'followedMode\':followingMode}"><span class=onoffswitch-inner></span><span class=onoffswitch-switch></span></label></div></div><div><button class="gling-button gling-icon gling-icon-bell button-with-label home-interest" ng-class="{\'selected\':followingMode === true}" ng-click=setFollowingMode(true)><p>{{\'--.home.followning.help\' | translateText}}</p></button></div></div></div></div></div>'),a.put("js/view/mobile/profile.html",'<mobile-title-ctrl display-menu=true title="\'--.page.profile.title\'"></mobile-title-ctrl><div class="app-body profile-page"><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="section scrollable-content"><div default ui-state=activeTab><ul class="nav nav-tabs"><li ng-click="activeTab = \'personal\'" ng-class="{\'active\':activeTab == \'personal\'}"><a ui-set="{\'activeTab\': 1}">{{\'--.customer.profile.personalInformation\' |translateText}}</a></li><li ng-click="activeTab = \'address\'" ng-class="{\'active\':activeTab == \'address\'}"><a ui-set="{\'activeTab\': 2}">{{\'--.customer.profile.myAddresses\' | translateText}}</a></li><li ng-click="activeTab = \'interest\'" ng-class="{\'active\':activeTab == \'interest\'}"><a ui-set="{\'activeTab\': 3}">{{\'--.customer.profile.interest\' | translateText}}</a></li></ul><div ng-show="activeTab == \'personal\'"><account-form-ctrl ng-info=accountParam></account-form-ctrl><button class="btn gling-button-dark glyphicon glyphicon-edit" ng-show=accountParam.disabled ng-click="accountParam.disabled = false">{{\'--.generic.edit\' |translateText}}</button><button class="btn gling-button-dark" ng-click=accountSave() ng-hide=accountParam.disabled>{{\'--.generic.save\' | translateText}}</button><button class="btn gling-button-dark" ng-click=accountCancel() ng-hide=accountParam.disabled>{{\'--.generic.cancel\' | translateText}}</button><button class="btn gling-button-dark" ng-show="model.myself.loginAccount===true" ng-click=editPassword() type=button>{{\'--.changePasswordModal.title\' | translateText}}</button><table class=profile-social-network-table><tr><th colspan=2>Lien avec vos réseaux sociaux</th></tr><tr><td><img src=assets/images/social_network/facebook.png></td><td><div class=link ng-click=fb_login(); ng-hide="model.myself.facebookAccount===true">{{\'--.profile.facebook.btn\' |translateText}}</div><div ng-show="model.myself.facebookAccount===true">Lié au compte facebook {{model.myself.facebookCredential.firstname}}{{model.myself.facebookCredential.lastname}}</div></td></tr></table></div><div ng-show="activeTab == \'address\'"><button class="btn gling-button-dark" ng-click=addAddress()>{{\'--.customer.profile.address.create\' | translateText}}</button><div class="panel panel-gling" ng-repeat="address in model.myself.addresses"><div class=panel-heading>{{address.name}}</div><div class=panel-body><div class=address-box><div><span>{{\'--.generic.street\' | translateText}}</span>{{address.street}}</div><div><span>{{\'--.generic.zip\' | translateText}}</span>{{address.zip}}</div><div><span>{{\'--.generic.city\' | translateText}}</span>{{address.city}}</div><div><span>{{\'--.generic.country\' | translateText}}</span>{{address.country}}</div></div><button class="btn gling-button-dark glyphicon glyphicon-edit" ng-click=editAddress(address)>{{\'--.generic.edit\' |translateText}}</button><button class="btn gling-button-dark glyphicon glyphicon-remove" ng-click=deleteAddress(address)>{{\'--.generic.remove\' |translateText}}</button></div></div></div><div ng-show="activeTab == \'interest\'"><div class=category-box ng-show=interestParam.disabled ng-repeat="interest in model.myself.customerInterests"><span ng-class="\'gling-icon gling-icon-\' + interest.name"></span> {{interest.translationName |translateText}}</div><customer-interest-form-ctrl ng-hide=interestParam.disabled ng-info=interestParam></customer-interest-form-ctrl><button class="btn gling-button-dark glyphicon glyphicon-edit" ng-show=interestParam.disabled ng-click="interestParam.disabled = false">{{\'--.generic.edit\' |translateText}}</button><button class="btn gling-button-dark" ng-click=interestSave() ng-hide=interestParam.disabled>{{\'--.generic.save\' | translateText}}</button><button class="btn gling-button-dark" ng-click="interestParam.disabled = true" ng-hide=interestParam.disabled>{{\'--.generic.cancel\' | translateText}}</button></div></div></div></div></div></div>'),a.put("js/view/mobile/promotion.html",'<mobile-title-ctrl display-menu=false title="\'--.promotion.modal.title.create\'"></mobile-title-ctrl><div class=app-body><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="section scrollable-content scrollable-content-body"><div class=scrollable-content-inner><div class=inject-box></div><button id=promotion-modal-btn-save class="btn gling-button-dark" ng-click=save(false) type=button>{{\'--.generic.save\' | translateText}}</button></div></div></div></div></div>'),a.put("js/view/mobile/search_page.html",'<header-search-ctrl display-menu=false></header-search-ctrl><div class=app-body><div class=app-content><div class=body-mask ng-show=displayMask></div><div class=scrollable><div class="scrollable-content scrollable-content-body"><div class=loading ng-show="results == null"><img src=/assets/images/big_loading.gif></div><div ng-hide="results==null"><tabset><tab ng-show=businessTab.display active=businessTab.active><tab-heading>{{\'--.generic.business\' | translateText}} ({{businessTab.totalToDisplay}})</tab-heading><business-list-mobile-ctrl ng-info={data:businessTab.data}></business-list-mobile-ctrl></tab><tab ng-show=publicationTab.display active=publicationTab.active><tab-heading>{{\'--.generic.publication\' | translateText}} ({{publicationTab.totalToDisplay}})</tab-heading><publication-list-mobile-ctrl ng-info={data:publicationTab.data}></publication-list-mobile-ctrl></tab><tab ng-show=categoryTab.display active=categoryTab.active><tab-heading>{{\'--.generic.category\' | translateText}} ({{categoryTab.totalToDisplay}})</tab-heading><div ng-show="categoryTab == 0">{{\'--.list.nothing\' | translateText}}</div><div ng-repeat="(cat,value) in categoryTab.data"><span class="search-category link search-category-lev1" ng-click="navigateTo(\'/search/category:\'+cat)"></span><span ng-repeat="(sCat,value2) in value"><span class="search-category link search-category-lev2" ng-click="navigateTo(\'/search/category:\'+sCat)"></span><span ng-repeat="(ssCat,value3) in value2"><span class="search-category link search-category-lev3" ng-click="navigateTo(\'/search/category:\'+ssCat)">{{cat | translateText}} >> {{sCat | translateText}} >> {{ssCat | translateText}}</span><business-list-mobile-ctrl ng-info={data:value3,loading:false}></business-list-mobile-ctrl></span></span></div></tab></tabset></div></div></div></div></div>'),a.put("js/view/mobile/welcome.html","<div class=app-body><div class=\"app-content modal-login welcome-page\"><div class=scrollable><div class=\"section customer-registration scrollable-content\"><div class=welcome-header><select class=gling-button-light ng-model=languageService.currentLanguage ng-options=\"lang.code as lang.language for lang in languageService.languages\"></select><div><span class=\"logo gling-icon gling-icon-logoapp button-with-label\"></span><h2>What's up in my shops</h2></div></div><h3>{{'--.mobile.welcome.registration.desc' |translateText}}</h3><div class=generic-center><button class=gling-button-dark ng-click=\"navigateTo('/customer_registration')\">{{'--.mobile.welcome.toCustomerRegistration.btn' | translateText}}</button></div><div class=separator></div><h3>{{'--.mobile.welcome.login.desc' | translateText}}</h3><login-form-ctrl ng-info=loginFormParam></login-form-ctrl><div class=generic-center><button class=gling-button-dark ng-click=login() type=button ng-disabled=loading>{{'--.mobile.welcome.login.btn' | translateText}}</button></div><div class=link ng-click=\"navigateTo('/forgot_password')\" style=\"display: inline-block\">{{'--.login.form.button.forgotPassword' | translateText}}</div></div></div></div></div>"),a.put("js/view/web/_business.html",'<div class=container-content><to-top-ctrl></to-top-ctrl><div ng-show="myBusiness === true" class="panel panel-gling business-management"><div class=management-block><h4>{{\'--.business.page.management.title\' | translateText}} <span style="float: right">{{\'--.business.page.management.status\' | translateText}} <span ng-class="\'business-status-\'+business.businessStatus"></span> {{\'--.business.status.\'+business.businessStatus | translateText}}</span></h4><div>{{\'--.business.page.edit.description\' | translateText}}</div></div><div class=management-block><h4>{{\'--.business.manager.progress.createPublicationTitle\' | translateText}}</h4><button id=business-btn-promotion-add class="btn gling-button-dark" ng-click=createPromotion() ng-disabled="business.businessStatus !== \'PUBLISHED\'">{{\'--.business.publication.btn.promotion\' | translateText}}</button> <button class="btn gling-button-dark" ng-click=createNotification() ng-disabled="business.businessStatus !== \'PUBLISHED\'">{{\'--.business.publication.btn.notification\' | translateText}}</button><div ng-hide="business.businessStatus===\'PUBLISHED\'">{{\'--.business.manager.createPublication.disabled.desc\' | translateText}}</div><div ng-show="business.businessStatus===\'PUBLISHED\'">{{\'--.business.manager.createPublication.enabled.desc\' | translateText}}</div></div><div><div style="width: 49%;display: inline-block;vertical-align: top" class=business-management-progress><h4>{{\'--.business.management.progression\' | translateText}}</h4><div class=business-management-progress-bar><div ng-style="{\'width\':(300 * (computeProgression()/8))+\'px\'}"></div><span>{{computeProgression()}} / 8</span></div><span>{{\'--.business.management.progression.desc\' | translateText}}</span><br><br><div class=business-management-progress-el><input type=checkbox ng-checked="business.address!=null"> <span ng-class="{\'completed\':business.address!=null}" ng-click=editAddress() class=link>{{\'--.business.manager.progress.add.address\' | translateText}}</span></div><div class=business-management-progress-el><input type=checkbox ng-checked="numberCategories()>0"> <span ng-class="{\'completed\':numberCategories()>0}" ng-click=editCategory() class=link>{{\'--.business.manager.progress.add.category\' | translateText}}</span></div><div class=business-management-progress-el><input type=checkbox ng-checked="business.description!=null"> <span ng-class="{\'completed\':business.description!=null}" ng-click=editbusiness() class=link>{{\'--.business.manager.progress.add.description\' | translateText}}</span></div><div class=business-management-progress-el><input type=checkbox ng-checked="business.illustration!=null"> <span ng-class="{\'completed\':business.illustration!=null}" ng-click=editIllustration() class=link>{{\'--.business.manager.progress.add.illustration\' | translateText}}</span></div><div class=business-management-progress-el><input type=checkbox ng-checked="business.landscape!=null"> <span ng-class="{\'completed\':business.landscape!=null}" ng-click=editLandscape() class=link>{{\'--.business.manager.progress.add.landscape\' | translateText}}</span></div><div class=business-management-progress-el><input type=checkbox ng-checked="business.galleryPictures.length>0"> <span ng-class="{\'completed\':business.galleryPictures.length>0}" ng-click=editGallery() class=link>{{\'--.business.manager.progress.add.gallery\' | translateText}}</span></div><div class=business-management-progress-el><input type=checkbox ng-checked="displaySocialNetwork()"> <span ng-class="{\'completed\':displaySocialNetwork()}" ng-click=editSocialNetwork() class=link>{{\'--.business.manager.progress.add.socialNetwork\' | translateText}}</span></div><div class=business-management-progress-el><input type=checkbox ng-checked="displaySchedule()"> <span ng-class="{\'completed\':displaySchedule()}" ng-click=editSchedule() class=link>{{\'--.business.manager.progress.add.schedule\' | translateText}}</span></div></div><div style="width: 49%;display: inline-block;vertical-align: top"><h4>{{\'--.business.page.management.changeStatus\' | translateText}}</h4><div class=management-block><p><span ng-show="business.businessStatus === \'NOT_PUBLISHED\'">{{\'--.business.page.edit.description.notPublished\' |translateText}}</span> <span ng-show="business.businessStatus === \'WAITING_CONFIRMATION\'">{{\'--.business.page.edit.description.waitConfirmation\' | translateText}}</span> <span ng-show="business.businessStatus === \'PUBLISHED\'">{{\'--.business.page.edit.descriptionPublished\' |translateText}}</span> <button ng-show="business.businessStatus === \'NOT_PUBLISHED\'" ng-click=publish() id=business-btn-publish class="btn gling-button-dark">{{\'--.business.page.publication\' | translateText}}</button> <button ng-show="business.businessStatus === \'WAITING_CONFIRMATION\'" ng-click=cancelPublishRequest() class="btn gling-button-dark">{{\'--.business.page.cancelPublishRequest\' | translateText}}</button> <button ng-show="business.businessStatus === \'PUBLISHED\'" ng-click=stopPublish() class="btn gling-button-dark">{{\'--.business.page.stopPublication\' | translateText}}</button></p></div><h4>{{\'--.business.page.management.help.title\' | translateText}}</h4><a class="btn gling-button-dark" class="btn gling-button-dark" href=/assets/document/business_help.pdf target=_blank>{{\'--.business.manager.progress.help\' | translateText}}</a> <button class="btn gling-button-dark" ng-click=openContact()>{{\'--.business.page.management.contact.btn\' | translateText}}</button></div></div></div><div class=onoffswitch-container ng-show=displayEditMode()><div>{{\'--.business.page.edit.editSwitchDisplay\' | translateText}}</div><div class=onoffswitch><input type=checkbox name=onoffswitch class=onoffswitch-checkbox id=myonoffswitchFromBusiness checked ng-model=edit><label class=onoffswitch-label for=myonoffswitchFromBusiness><span class=onoffswitch-inner></span> <span class=onoffswitch-switch></span></label></div><div>{{\'--.business.page.edit.editSwitchEdit\' | translateText}}</div></div><div class=business-page ng-show="business!=null"><div class=business-page-header><div class="business-page-header-landscape editable-element" ng-style="{\'background-image\':\'url(\'+(business.landscape | image)+\')\' }"><button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" id=business-btn-landscape-edit ng-show=edit ng-click=editLandscape()></button><div class="business-page-illustration-container editable-element" ng-click=refreshPublications()><img class=business-illustration ng-src="{{business.illustration | image}}"> <button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit btn-sm" id=business-btn-illustration-edit ng-show=edit ng-click=editIllustration()></button></div><div class="business-page-name editable-element" ng-click=refreshPublications()><span>{{business.name}}</span> <button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" id=business-btn-name-edit ng-show="edit && business.businessStatus === \'NOT_PUBLISHED\'" ng-click=editbusiness()></button></div></div><div class=business-page-bottom><div ng-show="business.hasOwner===false">{{\'--.business.page.noOwner\' | translateText}} <span class=business-claimed-status><span ng-show="myself!=null && myself.claimedBusinessId == business.id">{{\'--.business.page.noOwner.alreadyClaimed\' | translateText}}</span> <span ng-show="myself!=null && myself.claimedBusinessId!=null && myself.claimedBusinessId != business.id">{{\'--.business.page.noOwner.alreadyClaimedOther\' | translateText}}</span></span> <button ng-click=tryClaimBusiness() ng-show="myself == null || myself.claimedBusinessId==null" class="btn gling-button-dark btn-xs">{{\'--.business.page.claims\' | translateText}}</button></div><div class=business-right-column><div class=business-page-description><div><div style="display: inline-block"><category-line-ctrl ng-info=categoryLineParams></category-line-ctrl></div><button ng-show=edit id=business-btn-category-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-click=editCategory()></button></div><span ng-bind-html="business.description | text : descriptionLimit"></span> <span ng-show="business.description.length > descriptionLimitBase && descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000" class=link>{{\'--.textReuction.seeMore\' | translateText}}</span> <span ng-show="business.description.length > descriptionLimitBase && descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase" class=link>{{\'--.textReuction.seeLess\' | translateText}}</span><br><button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show=edit ng-click=editbusiness()></button></div></div><follow-widget-ctrl ng-info={business:business}></follow-widget-ctrl></div></div><div class=business-page-body><div class=business-page-body-center><div><select ng-model=publicationListParam.type ng-options="option.key as option.value | translateText for option in publicationOptions"></select><publication-list-for-business-ctrl ng-info=publicationListParam></publication-list-for-business-ctrl></div></div><div class=business-page-body-right><div class="panel panel-gling" ng-show="edit === true || (business.galleryPictures !=null && business.galleryPictures.length > 0)"><div class=panel-heading>{{\'--.business.gallery\' | translateText}}</div><div class=panel-body><gallery-ctrl ng-info={images:business.galleryPictures}></gallery-ctrl><button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" id=welcome-btn-gallery-edit ng-show=edit ng-click=editGallery()></button></div></div><div class="panel panel-gling"><div class=panel-heading>{{\'--.generic.address\' | translateText}}</div><div class=panel-body><google-map-widget-ctrl ng-info=googleMapParams></google-map-widget-ctrl><div class=business-address><div>{{business.address.street}}<br>{{business.address.zip}}, {{business.address.city}}</div><div>{{business.distance / 1000 | number:2}} Km</div></div><button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" id=business-btn-address-edit ng-show="edit && business.businessStatus === \'NOT_PUBLISHED\'" ng-click=editAddress()></button></div></div><div class="panel panel-gling"><div class=panel-heading>{{\'--.generic.contact\' | translateText}}</div><div class=panel-body><div id=welcome-contact-data-phone>{{business.phone}}</div><div><a href={{business.website}} target=_blank id=welcome-contact-data-website>{{business.website}}</a></div><div id=welcome-contact-data-email>{{business.email}}</div><button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" id=business-btn-contact-edit ng-show=edit ng-click=editbusiness()></button></div></div><div class="panel panel-gling business-social-panel" ng-show="edit === true || displaySocialNetwork()"><div class=panel-heading>{{\'--.generic.socialNetwork\' | translateText}}</div><div class=panel-body><div ng-show=!!business.socialNetwork.facebookLink class=business-social-network-box><a id=welcome-link-facebook href={{business.socialNetwork.facebookLink}} title=Facebook target=_blank><img src=/assets/images/social_network/facebook.png></a></div><div ng-show=!!business.socialNetwork.twitterLink class=business-social-network-box><a id=welcome-link-twitter href={{business.socialNetwork.twitterLink}} title=Twitter target=_blank><img src=/assets/images/social_network/twitter.png></a></div><div ng-show=!!business.socialNetwork.instagramLink class=business-social-network-box><a id=welcome-link-instagram href={{business.socialNetwork.instagramLink}} title=Instagram target=_blank><img src=/assets/images/social_network/instagram.png></a></div><div ng-show=!!business.socialNetwork.deliveryLink class=business-social-network-box><a id=welcome-link-delivery href={{business.socialNetwork.deliveryLink}} title="{{\'--.business.socialNetwork.delivery\' | translateText}}" target=_blank><img src=/assets/images/social_network/delivery.png></a></div><div ng-show=!!business.socialNetwork.reservationLink class=business-social-network-box><a href={{business.socialNetwork.reservationLink}} title="{{\'--.business.socialNetwork.reservation\' | translateText}}" target=_blank><img src=/assets/images/social_network/reservation.png></a></div><div ng-show=!!business.socialNetwork.opinionLink class=business-social-network-box><a href={{business.socialNetwork.opinionLink}} title="{{\'--.business.socialNetwork.opinion\' | translateText}}" target=_blank><img src=/assets/images/social_network/opinion.png></a></div><div ng-show=!!business.socialNetwork.ecommerceLink class=business-social-network-box><a href={{business.socialNetwork.ecommerceLink}} title="{{\'--.business.socialNetwork.ecommerce\' | translateText}}" target=_blank><img src=/assets/images/social_network/e_commerce.png></a></div><br><button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show=edit id=business-btn-social-network-edit ng-click=editSocialNetwork()></button></div></div><div class="panel panel-gling" ng-show="edit === true || displaySchedule()"><div class=panel-heading>{{\'--.business.profile.businessSchedule\' | translateText}}</div><div class=panel-body><schedule-ctrl ng-info={dto:business.schedules}></schedule-ctrl><button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" id=business-btn-schedule-edit ng-show=edit ng-click=editSchedule()></button></div></div></div></div></div></div>'),
a.put("js/view/web/_followed_business_page.html",'<div class=container-content><div class=followed-business><div class=generic-inline-block>{{\'--.generic.search\'| translateText}}</div><div class=generic-inline-block><input class=form-control ng-model="filter.$"></div><div style="float: right"><a href=# ng-click=checkAll(true)>{{\'--.followed-business.checkAll\' | translateText}}</a> / <a href=# ng-click=checkAll(false)>{{\'--.followed-business.uncheckAll\' | translateText}}</a></div><table ng-table=tableParams class=table><tr ng-repeat="business in $data"><td data-title="\'--.followedBusiness.table.business\' | translateText" sortable class=first-cell><img class=illustration ng-click="navigateTo(\'/business/\'+business.id)" ng-src="{{business.illustration | image}}"><div><span class=link ng-click="navigateTo(\'/business/\'+business.id)">{{business.name}}</span><br><button class="btn btn-xs gling-button-dark" ng-click=stopFollow(business)>{{\'--.business.follow.stopFollowing\' | translateText}}</button></div></td><td data-title="\'--.followedBusiness.table.categories\' | translateText"><span ng-repeat="(catLev1Key,lev2) in business.categories"><span ng-repeat="(catLev2Key, lev3) in lev2"><span ng-repeat="catLev3 in lev3">{{catLev3.translationName |translateText}} /</span></span></span></td><td data-title="\'--.followedBusiness.table.followingFrom\' | translateText" sortable style="text-align: center">{{business.followingFrom | date}}</td><td data-title="\'--.followedBusiness.table.notification\' | translateText" sortable style="text-align: center"><div><input ng-click=setNotification(business) type=checkbox ng-model=business.followingNotification></div></td></tr></table></div></div>'),a.put("js/view/web/_home.html",'<div class=container-content><div class=content-block><to-top-ctrl></to-top-ctrl><div class=help-div-geolocalisation ng-show="displaySharePositionWarning() && openGeolocationPopup !== true"><button class="help-popup-close glyphicon glyphicon-remove" ng-click="openGeolocationPopup=true"></button><p compile="\'--.home.geolocation.notAccepted\'"></p></div><div class=home-interest-box><div>{{\'--.home.interest-switch.help\' | translateText}}</div><div class="home-interest-switch home-interest-box-background"><div><button class="gling-button gling-icon gling-icon-location button-with-label home-interest" ng-class="{\'selected\':followedMode !== true}" ng-click=setFollowedMode(false)><p>{{\'--.home.localisation.help\' | translateText}}</p></button></div><div><div class=onoffswitch ng-click=setFollowedMode()><label class=onoffswitch-label ng-class="{\'followedMode\':followedMode}"><span class=onoffswitch-inner></span> <span class=onoffswitch-switch></span></label></div></div><div><button class="gling-button gling-icon gling-icon-bell button-with-label home-interest" ng-class="{\'selected\':followedMode === true}" ng-click=setFollowedMode(true)><p>{{\'--.home.followning.help\' | translateText}}</p></button></div></div></div><div class=home-interest-box><div>{{\'--.home.interest.help\' | translateText}}</div><div class=home-interest-box-background><button class="gling-button home-interest button-with-label-top {{\'gling-icon gling-icon-\' + interest.name}}" ng-repeat="interest in interestDisplayed" ng-show="interest.iconName!=null" ng-click=searchByInterest(interest) ng-class="{\'selected\':interest.selected === true}"><p>{{interest.translationName}}</p></button></div><div class="home-interest-box-background home-interest-box-background-second"><button class="gling-button home-interest button-with-label {{\'gling-icon gling-icon-\' + interest.name}}" ng-repeat="interest in interestDisplayed2" ng-show="interest.iconName!=null" ng-click=searchByInterest(interest) ng-class="{\'selected\':interest.selected === true}"><p>{{interest.translationName}}</p></button></div></div><publication-list-ctrl ng-info=publicationListCtrl></publication-list-ctrl><div class=help-div ng-show="emptyMessage!==null">{{\'--.home.emptyResult.\'+emptyMessage | translateText}}</div><business-list-ctrl ng-info=businessListParam ng-show="emptyMessage!==null"></business-list-ctrl></div></div>'),a.put("js/view/web/_map.html",'<div class="content-block map-page" style="margin-top: 100px;height:{{height}}px"><div class=map-content><div class="option-panel option-panel-left" ng-hide="displayFilters===true"><button ng-click="displayFilters=!displayFilters">Filtre</button></div><div class="option-panel option-panel-right" ng-hide="displayList===true"><button ng-click="displayList=!displayList">Liste des commerces</button></div><div style="height:{{height}}px !important" id=map></div><div class=filter-panel ng-show=displayFilters><span class="filter-panel-close glyphicon glyphicon-remove" ng-click="displayFilters=false"></span><h3>Filters</h3><div class=list-container><div class=list-container-scroll><input type=checkbox ng-model=filters.following>Uniquement les commerces suivi<br><input type=checkbox ng-model=filters.open>Uniquement les commerces actuellement ouverts<h3>Intérêts</h3><span class=link ng-click=selectAllInterest(true)>Tout sélectionner</span> / <span class=link ng-click=selectAllInterest(false)>Rien sélectionner</span><div ng-repeat="interest in interests"><input type=checkbox ng-model=interest.selected> <span class="{{\'gling-icon gling-icon-\' + interest.name}}"></span> {{interest.translationName}}</div></div></div></div><div class=displayed-business-panel ng-show=displayList><span class="filter-panel-close glyphicon glyphicon-remove" ng-click="displayList=false"></span><h3>Commerces</h3><div class=list-container><div class=list-container-scroll><div ng-show="listDisplayedBusiness.length == 0">Pas de commerce dans cette zone</div><div ng-repeat="business in listDisplayedBusiness" class=list-element ng-mouseover=startAnimation(business,true) ng-mouseleave=startAnimation(business,false)><business-for-map-ctrl ng-info={business:business}></business-for-map-ctrl></div></div></div></div></div></div>'),a.put("js/view/web/_profile.html",'<div class=container-content><div class=profile-page><div class="panel panel-gling main-panel panel-personal-information"><div class=panel-heading>{{\'--.customer.profile.personalInformation\' | translateText}}</div><div class=panel-body><account-form-ctrl ng-info=accountParam></account-form-ctrl><button class="btn gling-button-dark" id=profile-personal-btn-edit ng-show=accountParam.disabled ng-click=personalEdit()>{{\'--.generic.edit\' |translateText}}</button> <button class="btn gling-button-dark" id=profile-personal-btn-save ng-hide=accountParam.disabled ng-click=personalSave()>{{\'--.generic.save\' | translateText}}</button> <button id=profile-personal-btn-cancel class="btn gling-button-dark" ng-hide=accountParam.disabled ng-click=personalCancel()>{{\'--.generic.cancel\' | translateText}}</button><div class=col-md-3 ng-show="model.myself.loginAccount==true"></div><button type=button ng-show="model.myself.loginAccount===true" id=profile-personal-btn-edit-password class="btn gling-button-dark" ng-click=editPassword()>{{\'--.changePasswordModal.title\' | translateText}}</button><table class=profile-social-network-table><tr><th colspan=2>Lien avec vos réseaux sociaux</th></tr><tr><td><img src="assets/images/social_network/facebook.png"></td><td><div class=link ng-click=fb_login(); ng-hide="model.myself.facebookAccount===true">{{\'--.profile.facebook.btn\' |translateText}}</div><div ng-show="model.myself.facebookAccount===true">Lié au compte facebook {{model.myself.facebookCredential.firstname}} {{model.myself.facebookCredential.lastname}}</div></td></tr></table></div></div><div class="panel panel-gling main-panel"><div class=panel-heading>{{\'--.customer.profile.myAddresses\' | translateText}}</div><div class=panel-body><div><accordion><accordion-group class=address-container ng-repeat="address in model.myself.addresses" is-open=address.isOpen><accordion-heading>{{address.name}} <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': address.isOpen, \'glyphicon-chevron-right\': !address.isOpen}"></i></accordion-heading><div class=address-box><div><span>{{\'--.generic.street\' | translateText}}</span> <span>{{address.street}}</span></div><div><span>{{\'--.generic.zip\' | translateText}}</span> <span>{{address.zip}}</span></div><div><span>{{\'--.generic.city\' | translateText}}</span> <span>{{address.city}}</span></div><div><span>{{\'--.generic.country\' | translateText}}</span> <span>{{address.country}}</span></div></div><button class="btn gling-button-dark" ng-click=editAddress(address)>{{\'--.generic.edit\' | translateText}}</button> <button class="btn gling-button-dark glyphicon glyphicon-remove" ng-click=deleteAddress(address)>{{\'--.generic.remove\' |translateText}}</button></accordion-group></accordion><button id=profile-btn-address-add class="btn gling-button-dark" ng-click=addAddress()>{{\'--.customer.profile.create\' | translateText}}</button></div></div></div><div class="panel panel-gling main-panel"><div class=panel-heading>{{\'--.customer.profile.interest\' | translateText}}</div><div class="panel-body category-list"><div><div ng-repeat="interest in model.myself.customerInterests" class=category-box><span class="{{\'gling-icon gling-icon-\' + interest.name}}"></span> {{interest.translationName |translateText}}</div><button class="btn gling-button-dark" id=profile-interest-btn-edit ng-click=interestEdit()>{{\'--.generic.edit\' | translateText}}</button></div></div></div></div></div>'),a.put("js/view/web/_search_page.html",'<div class=container-content><to-top-ctrl></to-top-ctrl><div class=search-page><div ng-show="results == null" class=loading><img src="/assets/images/big_loading.gif"></div><div ng-hide="results==null"><tabset><tab ng-show=businessTab.display active=businessTab.active><tab-heading>{{\'--.generic.business\' | translateText}} ({{businessTab.totalToDisplay}})</tab-heading><business-list-ctrl ng-info={data:businessTab.data}></business-list-ctrl></tab><tab ng-show=publicationTab.display active=publicationTab.active><tab-heading>{{\'--.generic.publication\' | translateText}} ({{publicationTab.totalToDisplay}})</tab-heading><publication-list-ctrl ng-info={data:publicationTab.data}></publication-list-ctrl></tab><tab ng-show=categoryTab.display active=categoryTab.active><tab-heading>{{\'--.generic.category\' | translateText}} ({{categoryTab.totalToDisplay}})</tab-heading><div ng-show="categoryTab == 0">{{\'--.list.nothing\' | translateText}}</div><div ng-repeat="(cat,value) in categoryTab.data"><div class="search-category link search-category-lev1" ng-click="navigateTo(\'/search/category:\'+cat)">{{cat | translateText}}</div><div ng-repeat="(sCat,value2) in value"><div class="search-category link search-category-lev2" ng-click="navigateTo(\'/search/category:\'+sCat)">{{sCat | translateText}}</div><div ng-repeat="(ssCat,value3) in value2"><div class="search-category link search-category-lev3" ng-click="navigateTo(\'/search/category:\'+ssCat)">{{ssCat | translateText}}</div><business-list-ctrl ng-info={data:value3,loading:false}></business-list-ctrl></div></div></div></tab></tabset></div></div></div>'),a.put("js/view/web/business.html",'<div class=container-content><to-top-ctrl></to-top-ctrl><div class="panel panel-gling business-management" ng-show="myBusiness === true"><div class=management-block><h4>{{\'--.business.page.management.title\' | translateText}}<span style="float: right">{{\'--.business.page.management.status\' | translateText}}<span ng-class="\'business-status-\'+business.businessStatus"></span> {{\'--.business.status.\'+business.businessStatus | translateText}}</span></h4><div>{{\'--.business.page.edit.description\' | translateText}}</div></div><div class=management-block><h4>{{\'--.business.manager.progress.createPublicationTitle\' | translateText}}</h4><button id=business-btn-promotion-add class="btn gling-button-dark" ng-click=createPromotion() ng-disabled="business.businessStatus !== \'PUBLISHED\'">{{\'--.business.publication.btn.promotion\' | translateText}}</button><button class="btn gling-button-dark" ng-click=createNotification() ng-disabled="business.businessStatus !== \'PUBLISHED\'">{{\'--.business.publication.btn.notification\' | translateText}}</button><div ng-hide="business.businessStatus===\'PUBLISHED\'">{{\'--.business.manager.createPublication.disabled.desc\' | translateText}}</div><div ng-show="business.businessStatus===\'PUBLISHED\'">{{\'--.business.manager.createPublication.enabled.desc\' | translateText}}</div></div><div><div class=business-management-progress style="width: 49%;display: inline-block;vertical-align: top"><h4>{{\'--.business.management.progression\' | translateText}}</h4><div class=business-management-progress-bar><div ng-style="{\'width\':(300 * (computeProgression()/8))+\'px\'}"></div><span>{{computeProgression()}} / 8</span></div><span>{{\'--.business.management.progression.desc\' | translateText}}</span><br><br><div class=business-management-progress-el><input ng-checked="business.address!=null" type=checkbox><span class=link ng-class="{\'completed\':business.address!=null}" ng-click=editAddress()>{{\'--.business.manager.progress.add.address\' | translateText}}</span></div><div class=business-management-progress-el><input ng-checked=numberCategories()&gt;0 type=checkbox><span class=link ng-class="{\'completed\':numberCategories()&gt;0}" ng-click=editCategory()>{{\'--.business.manager.progress.add.category\' | translateText}}</span></div><div class=business-management-progress-el><input ng-checked="business.description!=null" type=checkbox><span class=link ng-class="{\'completed\':business.description!=null}" ng-click=editbusiness()>{{\'--.business.manager.progress.add.description\' | translateText}}</span></div><div class=business-management-progress-el><input ng-checked="business.illustration!=null" type=checkbox><span class=link ng-class="{\'completed\':business.illustration!=null}" ng-click=editIllustration()>{{\'--.business.manager.progress.add.illustration\' | translateText}}</span></div><div class=business-management-progress-el><input ng-checked="business.landscape!=null" type=checkbox><span class=link ng-class="{\'completed\':business.landscape!=null}" ng-click=editLandscape()>{{\'--.business.manager.progress.add.landscape\' | translateText}}</span></div><div class=business-management-progress-el><input ng-checked=business.galleryPictures.length&gt;0 type=checkbox><span class=link ng-class="{\'completed\':business.galleryPictures.length&gt;0}" ng-click=editGallery()>{{\'--.business.manager.progress.add.gallery\' | translateText}}</span></div><div class=business-management-progress-el><input ng-checked=displaySocialNetwork() type=checkbox><span class=link ng-class="{\'completed\':displaySocialNetwork()}" ng-click=editSocialNetwork()>{{\'--.business.manager.progress.add.socialNetwork\' | translateText}}</span></div><div class=business-management-progress-el><input ng-checked=displaySchedule() type=checkbox><span class=link ng-class="{\'completed\':displaySchedule()}" ng-click=editSchedule()>{{\'--.business.manager.progress.add.schedule\' | translateText}}</span></div></div><div style="width: 49%;display: inline-block;vertical-align: top"><h4>{{\'--.business.page.management.changeStatus\' | translateText}}</h4><div class=management-block><p><span ng-show="business.businessStatus === \'NOT_PUBLISHED\'">{{\'--.business.page.edit.description.notPublished\' |translateText}}</span><span ng-show="business.businessStatus === \'WAITING_CONFIRMATION\'">{{\'--.business.page.edit.description.waitConfirmation\' | translateText}}</span><span ng-show="business.businessStatus === \'PUBLISHED\'">{{\'--.business.page.edit.descriptionPublished\' |translateText}}</span><button id=business-btn-publish class="btn gling-button-dark" ng-show="business.businessStatus === \'NOT_PUBLISHED\'" ng-click=publish()>{{\'--.business.page.publication\' | translateText}}</button><button class="btn gling-button-dark" ng-show="business.businessStatus === \'WAITING_CONFIRMATION\'" ng-click=cancelPublishRequest()>{{\'--.business.page.cancelPublishRequest\' | translateText}}</button><button class="btn gling-button-dark" ng-show="business.businessStatus === \'PUBLISHED\'" ng-click=stopPublish()>{{\'--.business.page.stopPublication\' | translateText}}</button></p></div><h4>{{\'--.business.page.management.help.title\' | translateText}}</h4><a class="btn gling-button-dark" href=/assets/document/business_help.pdf target=_blank>{{\'--.business.manager.progress.help\' | translateText}}</a><button class="btn gling-button-dark" ng-click=openContact()>{{\'--.business.page.management.contact.btn\' | translateText}}</button></div></div></div><div class=onoffswitch-container ng-show=displayEditMode()><div>{{\'--.business.page.edit.editSwitchDisplay\' | translateText}}</div><div class=onoffswitch><input id=myonoffswitchFromBusiness class=onoffswitch-checkbox ng-model=edit name=onoffswitch checked type=checkbox><label class=onoffswitch-label for=myonoffswitchFromBusiness><span class=onoffswitch-inner></span><span class=onoffswitch-switch></span></label></div><div>{{\'--.business.page.edit.editSwitchEdit\' | translateText}}</div></div><div class=business-page ng-show="business!=null"><div class=business-page-header><div class="business-page-header-landscape editable-element" ng-style="{\'background-image\':\'url(\'+(business.landscape | image)+\')\' }"><button id=business-btn-landscape-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show=edit ng-click=editLandscape()></button><div class="business-page-illustration-container editable-element" ng-click=refreshPublications()><img class=business-illustration ng-src="{{business.illustration | image}}"><button id=business-btn-illustration-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit btn-sm" ng-show=edit ng-click=editIllustration()></button></div><div class="business-page-name editable-element" ng-click=refreshPublications()><span>{{business.name}}</span><button id=business-btn-name-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show="edit &amp;&amp; business.businessStatus === \'NOT_PUBLISHED\'" ng-click=editbusiness()></button></div></div><div class=business-page-bottom><div ng-show="business.hasOwner===false">{{\'--.business.page.noOwner\' | translateText}}<span class=business-claimed-status><span ng-show="myself!=null &amp;&amp; myself.businessId != null">{{\'--.business.page.noOwner.alreadyBusiness\' | translateText}}</span><span ng-show="myself!=null &amp;&amp; myself.businessId == null &amp;&amp; myself.claimedBusinessId == business.id">{{\'--.business.page.noOwner.alreadyClaimed\' | translateText}}</span><span ng-show="myself!=null &amp;&amp; myself.businessId == null &amp;&amp; myself.claimedBusinessId!=null &amp;&amp; myself.claimedBusinessId != business.id">{{\'--.business.page.noOwner.alreadyClaimedOther\' | translateText}}</span></span><button class="btn gling-button-dark btn-xs" ng-show="myself == null || (myself.claimedBusinessId==null &amp;&amp; myself.businessId == null  )" ng-click=tryClaimBusiness()>{{\'--.business.page.claims\' | translateText}}</button></div><div class=business-right-column><div class=business-page-description><div><div style="display: inline-block"><category-line-ctrl ng-info=categoryLineParams></category-line-ctrl></div><button id=business-btn-category-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show=edit ng-click=editCategory()></button></div><span ng-bind-html="business.description | text : descriptionLimit"></span><span class=link ng-show="business.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit==descriptionLimitBase" ng-click="descriptionLimit = 10000">{{\'--.textReuction.seeMore\' | translateText}}</span><span class=link ng-show="business.description.length &gt; descriptionLimitBase &amp;&amp; descriptionLimit!=descriptionLimitBase" ng-click="descriptionLimit = descriptionLimitBase">{{\'--.textReuction.seeLess\' | translateText}}</span><br><button class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show=edit ng-click=editbusiness()></button></div></div><follow-widget-ctrl ng-info={business:business}></follow-widget-ctrl></div></div><div class=business-page-body><div class=business-page-body-center><div><select ng-show="myBusiness === true" ng-model=publicationListParam.type ng-options="option.key as option.value | translateText for option in publicationOptions"></select><publication-list-for-business-ctrl ng-info=publicationListParam></publication-list-for-business-ctrl></div></div><div class=business-page-body-right><div class="panel panel-gling" ng-show="edit === true || (business.galleryPictures !=null &amp;&amp; business.galleryPictures.length &gt; 0)"><div class=panel-heading>{{\'--.business.gallery\' | translateText}}</div><div class=panel-body><gallery-ctrl ng-info={images:business.galleryPictures}></gallery-ctrl><button id=welcome-btn-gallery-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show=edit ng-click=editGallery()></button></div></div><div class="panel panel-gling"><div class=panel-heading>{{\'--.generic.address\' | translateText}}</div><div class=panel-body><google-map-widget-ctrl ng-info=googleMapParams></google-map-widget-ctrl><div class=business-address><div>{{business.address.street}}<br>{{business.address.zip}}, {{business.address.city}}</div><div>{{business.distance / 1000 | number:2}} Km</div></div><button id=business-btn-address-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show="edit &amp;&amp; business.businessStatus === \'NOT_PUBLISHED\'" ng-click=editAddress()></button></div></div><div class="panel panel-gling"><div class=panel-heading>{{\'--.generic.contact\' | translateText}}</div><div class=panel-body><div id=welcome-contact-data-phone>{{business.phone}}</div><div><a id=welcome-contact-data-website href={{business.website}} target=_blank>{{business.website}}</a></div><div id=welcome-contact-data-email>{{business.email}}</div><button id=business-btn-contact-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show=edit ng-click=editbusiness()></button></div></div><div class="panel panel-gling business-social-panel" ng-show="edit === true || displaySocialNetwork()"><div class=panel-heading>{{\'--.generic.socialNetwork\' | translateText}}</div><div class=panel-body><div class=business-social-network-box ng-show=!!business.socialNetwork.facebookLink><a id=welcome-link-facebook href={{business.socialNetwork.facebookLink}} title=Facebook target=_blank><img src=/assets/images/social_network/facebook.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.twitterLink><a id=welcome-link-twitter href={{business.socialNetwork.twitterLink}} title=Twitter target=_blank><img src=/assets/images/social_network/twitter.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.instagramLink><a id=welcome-link-instagram href={{business.socialNetwork.instagramLink}} title=Instagram target=_blank><img src=/assets/images/social_network/instagram.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.deliveryLink><a id=welcome-link-delivery href={{business.socialNetwork.deliveryLink}} title="{{\'--.business.socialNetwork.delivery\' | translateText}}" target=_blank><img src=/assets/images/social_network/delivery.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.reservationLink><a href={{business.socialNetwork.reservationLink}} title="{{\'--.business.socialNetwork.reservation\' | translateText}}" target=_blank><img src=/assets/images/social_network/reservation.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.opinionLink><a href={{business.socialNetwork.opinionLink}} title="{{\'--.business.socialNetwork.opinion\' | translateText}}" target=_blank><img src=/assets/images/social_network/opinion.png></a></div><div class=business-social-network-box ng-show=!!business.socialNetwork.ecommerceLink><a href={{business.socialNetwork.ecommerceLink}} title="{{\'--.business.socialNetwork.ecommerce\' | translateText}}" target=_blank><img src=/assets/images/social_network/e_commerce.png></a></div><br><button id=business-btn-social-network-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show=edit ng-click=editSocialNetwork()></button></div></div><div class="panel panel-gling" ng-show="edit === true || displaySchedule()"><div class=panel-heading>{{\'--.business.profile.businessSchedule\' | translateText}}</div><div class=panel-body><schedule-ctrl ng-info={dto:business.schedules}></schedule-ctrl><button id=business-btn-schedule-edit class="btn gling-button-dark btn-xs glyphicon glyphicon-edit" ng-show=edit ng-click=editSchedule()></button></div></div><div class=business-page-no-owner-info ng-show="business.hasOwner===false">{{\'--.business.noOwner.info\' | translateText}}</div></div></div></div></div>'),a.put("js/view/web/followed_business_page.html",'<div class=container-content><div class=followed-business><div class=generic-inline-block>{{\'--.generic.search\'| translateText}}</div><div class=generic-inline-block><input class=form-control ng-model=filter.$></div><div style="float: right"><a ng-click=checkAll(true) href=#>{{\'--.followed-business.checkAll\' | translateText}}</a> /<a ng-click=checkAll(false) href=#>{{\'--.followed-business.uncheckAll\'| translateText}}</a></div><table class=table ng-table=tableParams><tr ng-repeat="business in $data"><td class=first-cell data-title="\'--.followedBusiness.table.business\' | translateText" sortable><img class=illustration ng-click="navigateTo(\'/business/\'+business.id)" ng-src="{{business.illustration | image}}"><div><span class=link ng-click="navigateTo(\'/business/\'+business.id)">{{business.name}}</span><br><button class="btn btn-xs gling-button-dark" ng-click=stopFollow(business)>{{\'--.business.follow.stopFollowing\' | translateText}}</button></div></td><td data-title="\'--.followedBusiness.table.categories\' | translateText"><span ng-repeat="(catLev1Key,lev2) in business.categories"><span ng-repeat="(catLev2Key, lev3) in lev2"><span ng-repeat="catLev3 in lev3">{{catLev3.translationName |translateText}} /</span></span></span></td><td data-title="\'--.followedBusiness.table.followingFrom\' | translateText" style="text-align: center" sortable>{{business.followingFrom | date}}</td><td data-title="\'--.followedBusiness.table.notification\' | translateText" style="text-align: center" sortable><div><input ng-model=business.followingNotification ng-click=setNotification(business) type=checkbox></div></td></tr></table></div></div>'),a.put("js/view/web/home.html",'<div class=container-content><div class=content-block><to-top-ctrl></to-top-ctrl><div class=help-div-geolocalisation ng-show="displaySharePositionWarning() &amp;&amp; openGeolocationPopup !== true"><button class="help-popup-close glyphicon glyphicon-remove" ng-click="openGeolocationPopup=true"></button><p compile="\'--.home.geolocation.notAccepted\'"></p></div><div class=home-interest-box><div>{{\'--.home.interest-switch.help\' | translateText}}</div><div class="home-interest-switch home-interest-box-background"><div><button class="gling-button gling-icon gling-icon-location button-with-label home-interest" ng-class="{\'selected\':followingMode !== true}" ng-click=setFollowedMode(false)><p>{{\'--.home.localisation.help\' | translateText}}</p></button></div><div><div class=onoffswitch ng-click=setFollowedMode()><label class=onoffswitch-label ng-class="{\'followedMode\':followingMode}"><span class=onoffswitch-inner></span><span class=onoffswitch-switch></span></label></div></div><div><button class="gling-button gling-icon gling-icon-bell button-with-label home-interest" ng-class="{\'selected\':followingMode === true}" ng-click=setFollowedMode(true)><p>{{\'--.home.followning.help\' | translateText}}</p></button></div></div></div><div class=home-interest-box><div>{{\'--.home.interest.help\' | translateText}}</div><div class=home-interest-box-background><button class="gling-button home-interest button-with-label-top {{\'gling-icon gling-icon-\' + interest.name}}" ng-show="interest.iconName!=null" ng-click=searchByInterest(interest) ng-class="{\'selected\':interest.selected === true}" ng-repeat="interest in interestDisplayed"><p>{{interest.translationName}}</p></button></div><div class="home-interest-box-background home-interest-box-background-second"><button class="gling-button home-interest button-with-label {{\'gling-icon gling-icon-\' + interest.name}}" ng-show="interest.iconName!=null" ng-click=searchByInterest(interest) ng-class="{\'selected\':interest.selected === true}" ng-repeat="interest in interestDisplayed2"><p>{{interest.translationName}}</p></button></div></div><publication-list-ctrl ng-info=publicationListCtrl></publication-list-ctrl><div class=help-div ng-show="emptyMessage!==null">{{\'--.home.emptyResult.\'+emptyMessage | translateText}}</div><business-list-ctrl ng-show="emptyMessage!==null" ng-info=businessListParam></business-list-ctrl></div></div>'),a.put("js/view/web/map.html",'<div class="content-block map-page" style="margin-top: 100px;height:{{height}}px"><div class=map-content><div class="option-panel option-panel-left" ng-hide="displayFilters===true"><button ng-click="displayFilters=!displayFilters">{{\'--.map.filters\' | translateText}}</button></div><div class="option-panel option-panel-right" ng-hide="displayList===true"><button ng-click="displayList=!displayList">{{\'--.map.businessList\' | translateText}}</button></div><div id=map style="height:{{height}}px !important"></div><div class=filter-panel ng-show=displayFilters><span class="filter-panel-close glyphicon glyphicon-remove" ng-click="displayFilters=false"></span><h3>Filters</h3><div class=list-container><div class=list-container-scroll><input ng-model=filters.following type=checkbox>{{\'--.map.filters.onlyFollowinfBusinesses\' | translateText}}<br><input ng-model=filters.open type=checkbox>{{\'--.map.filters.onlyCurrentlyOpen\' | translateText}}<h3>Intérêts</h3><span class=link ng-click=selectAllInterest(true)>{{\'--.generic.selectAll\' | translateText}}</span> /<span class=link ng-click=selectAllInterest(false)>{{\'--.generic.unselectAll\' | translateText}}</span><div ng-repeat="interest in interests"><input ng-model=interest.selected type=checkbox><span ng-class="\'gling-icon gling-icon-\' + interest.name"></span> {{interest.translationName}}</div></div></div></div><div class=displayed-business-panel ng-show=displayList><span class="filter-panel-close glyphicon glyphicon-remove" ng-click="displayList=false"></span><h3>{{\'--.generic.businesses\' | translateText}}</h3><div class=list-container><div class=list-container-scroll><div ng-show="listDisplayedBusiness.length == 0">{{\'--.map.noResultInThisArea\' | translateText}}</div><div class=list-element ng-mouseover=startAnimation(business,true) ng-repeat="business in listDisplayedBusiness" ng-mouseleave=startAnimation(business,false)><business-for-map-ctrl ng-info={business:business}></business-for-map-ctrl></div></div></div></div></div></div>'),a.put("js/view/web/profile.html",'<div class=container-content><div class=profile-page><div class="panel panel-gling main-panel panel-personal-information"><div class=panel-heading>{{\'--.customer.profile.personalInformation\' | translateText}}</div><div class=panel-body><account-form-ctrl ng-info=accountParam></account-form-ctrl><button id=profile-personal-btn-edit class="btn gling-button-dark" ng-show=accountParam.disabled ng-click=personalEdit()>{{\'--.generic.edit\' |translateText}}</button><button id=profile-personal-btn-save class="btn gling-button-dark" ng-click=personalSave() ng-hide=accountParam.disabled>{{\'--.generic.save\' | translateText}}</button><button id=profile-personal-btn-cancel class="btn gling-button-dark" ng-click=personalCancel() ng-hide=accountParam.disabled>{{\'--.generic.cancel\' | translateText}}</button><button id=profile-personal-btn-edit-password class="btn gling-button-dark" ng-show="model.myself.loginAccount===true" ng-click=editPassword() type=button>{{\'--.changePasswordModal.title\' | translateText}}</button><table class=profile-table><tr><th colspan=2>Lien avec vos réseaux sociaux</th></tr><tr><td><img src=assets/images/social_network/facebook.png></td><td><div class=link ng-click=fb_login(); ng-hide="model.myself.facebookAccount===true">{{\'--.profile.facebook.btn\' |translateText}}</div><div ng-show="model.myself.facebookAccount===true">Lié au compte facebook {{model.myself.facebookCredential.firstname}}{{model.myself.facebookCredential.lastname}}</div></td></tr></table><table class="profile-table profile-action-table"><tr ng-show="model.myself.type != \'BUSINESS\'"><td>Vous êtes un commerçant ?</td><td><span ng-show="model.myself.claimedBusinessId!=null">Vous avez déjà revendiqué un commerce. Vous ne pouvez posséder qu\'un seul commerce par compte</span><button class=gling-button-dark ng-show="model.myself.claimedBusinessId==null" ng-click=createBusiness() type=button>Créez votre page commerce</button></td></tr></table></div></div><div class="panel panel-gling main-panel"><div class=panel-heading>{{\'--.customer.profile.myAddresses\' | translateText}}</div><div class=panel-body><div><accordion><accordion-group class=address-container is-open=address.isOpen ng-repeat="address in model.myself.addresses"><accordion-heading>{{address.name}}<i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': address.isOpen, \'glyphicon-chevron-right\': !address.isOpen}"></i></accordion-heading><div class=address-box><div><span>{{\'--.generic.street\' | translateText}}</span><span>{{address.street}}</span></div><div><span>{{\'--.generic.zip\' | translateText}}</span><span>{{address.zip}}</span></div><div><span>{{\'--.generic.city\' | translateText}}</span><span>{{address.city}}</span></div><div><span>{{\'--.generic.country\' | translateText}}</span><span>{{address.country}}</span></div></div><button class="btn gling-button-dark" ng-click=editAddress(address)>{{\'--.generic.edit\' | translateText}}</button><button class="btn gling-button-dark glyphicon glyphicon-remove" ng-click=deleteAddress(address)>{{\'--.generic.remove\' |translateText}}</button></accordion-group></accordion><button id=profile-btn-address-add class="btn gling-button-dark" ng-click=addAddress()>{{\'--.customer.profile.create\' | translateText}}</button></div></div></div><div class="panel panel-gling main-panel"><div class=panel-heading>{{\'--.customer.profile.interest\' | translateText}}</div><div class="panel-body category-list"><div><div class=category-box ng-repeat="interest in model.myself.customerInterests"><span ng-class="\'gling-icon gling-icon-\' + interest.name"></span> {{interest.translationName |translateText}}</div><button id=profile-interest-btn-edit class="btn gling-button-dark" ng-click=interestEdit()>{{\'--.generic.edit\' | translateText}}</button></div></div></div></div></div>'),
a.put("js/view/web/search_page.html",'<div class=container-content><to-top-ctrl></to-top-ctrl><div class=search-page><div class=loading ng-show="results == null"><img src=/assets/images/big_loading.gif></div><div ng-hide="results==null"><tabset><tab ng-show=businessTab.display active=businessTab.active><tab-heading>{{\'--.generic.business\' | translateText}} ({{businessTab.totalToDisplay}})</tab-heading><business-list-ctrl ng-info={data:businessTab.data}></business-list-ctrl></tab><tab ng-show=publicationTab.display active=publicationTab.active><tab-heading>{{\'--.generic.publication\' | translateText}} ({{publicationTab.totalToDisplay}})</tab-heading><publication-list-ctrl ng-info={data:publicationTab.data}></publication-list-ctrl></tab><tab ng-show=categoryTab.display active=categoryTab.active><tab-heading>{{\'--.generic.category\' | translateText}} ({{categoryTab.totalToDisplay}})</tab-heading><div ng-show="categoryTab == 0">{{\'--.list.nothing\' | translateText}}</div><div ng-repeat="(cat,value) in categoryTab.data"><div class="search-category link search-category-lev1" ng-click="navigateTo(\'/search/category:\'+cat)">{{cat | translateText}}</div><div ng-repeat="(sCat,value2) in value"><div class="search-category link search-category-lev2" ng-click="navigateTo(\'/search/category:\'+sCat)">{{sCat | translateText}}</div><div ng-repeat="(ssCat,value3) in value2"><div class="search-category link search-category-lev3" ng-click="navigateTo(\'/search/category:\'+ssCat)">{{ssCat | translateText}}</div><business-list-ctrl ng-info={data:value3,loading:false}></business-list-ctrl></div></div></div></tab></tabset></div></div></div>'),a.put("js/view/web/welcome.html",'<div class=welcome-page><div class=welcome-header><div class="gling-icon gling-icon-logoapp logo"></div><p>What\'s up in my shops</p></div><div class=left-column><div class="block-title block-title-left block-title-first">{{\'--.welcome.thisWeek\' | translateText}}</div><div class=event-block><img src=/assets/images/event/sn.jpg><span class=event-title>{{\'--.welcome.event.saintNicolas.title\' | translateText}}</span><br><br><span ng-bind-html="\'--.welcome.event.saintNicolas.content\' | translateText | text"></span></div><div class="block-title block-title-left">{{\'--.welcome.lastPublications\' | translateText}}<div class="see-more link" ng-click="goTo(\'/\')">{{\'--.welcome.seeMore\' | translateText}}</div></div><publication-list-ctrl ng-info=publicationListCtrl></publication-list-ctrl><div class="link center" ng-click="goTo(\'/\')">{{\'--.welcome.morePublications\' | translateText}}</div></div><div class=right-column><div class="block-title block-title-first">{{\'--.welcome.joinOnFacebook\' | translateText}}</div><div class=fb-post data-width=380 data-href=https://www.facebook.com/gling.be/posts/1695721087310165></div><div class=block-title>{{\'--.welcome.neighborhood\' | translateText}}<div class="see-more link" ng-click="goTo(\'/map/\')">{{\'--.welcome.seeMore\' | translateText}}</div></div><div class=map-container><flex-slider pauseonhover=true flex-slide="map in maps track by $index " animation=slide><li><div class=map-slider><div>{{map.name}}</div></div><img ng-src={{map.src}} ng-click=openMap(map) style=cursor:pointer></li></flex-slider></div><div class=block-title>{{\'--.welcome.lastBusinesses\' | translateText}}</div><div class=welcome-business-list><div class=welcome-business-list-el ng-repeat="business in businesses"><table><tr><td ng-click="goTo(\'/business/\'+business.id)" rowspan=2><img class=illustration ng-src="{{business.illustration | image}}"></td><td ng-click="goTo(\'/business/\'+business.id)"><div class=title>{{business.name}}</div></td></tr><tr><td><div class=address>{{business.address.street}}, {{business.address.zip}} {{business.address.city}} - {{business.distance / 1000 | number:2}} km<br></div></td></tr></table><category-line-ctrl ng-info={categories:business.categories,level1:false}></category-line-ctrl><div class=welcome-business-action><follow-widget-ctrl ng-info={displayText:true,business:business}></follow-widget-ctrl></div></div></div></div></div>')}]),myApp.controller("BasicModalCtrl",["$scope","$flash","$modalInstance","businessService","accountService","translationService","param","$compile","directiveName","save","$timeout","title",function(a,b,c,d,e,f,g,h,i,j,k,l){a.title=l;var m=h("<"+i+' ng-info="param"/>')(a);k(function(){$(".inject-data:first").append(m)},1),a.loading=!1,a.param=g,a.close=function(){c.close()},a.setLoading=function(b){g.disabled=b,a.loading=b},a.save=function(){var b=!0;null!=g.callBackSave&&g.callBackSave(),console.log(g.isValid),void 0!=g.isValid&&(b=g.isValid,g.displayErrorMessage=!0),b&&(a.setLoading(!0),j(a.close,a.setLoading))}}]),myApp.directive("imageToolCtrl",["$rootScope","businessService","geolocationService","directiveService","$timeout","fileService","$filter","$flash",function(a,b,c,d,f,g,h,i){return{restrict:"E",scope:d.autoScope({ngInfo:"="}),templateUrl:"/assets/js/tool/imageTool/template.html",replace:!0,transclude:!0,compile:function(){return{post:function(a){d.autoScopeImpl(a),a.image_target=null,a.orig_src=new Image,a.constrain=!0,a.min_width=60,a.min_height=60,a.max_width=1e4,a.max_height=1e4,a.event_state={},a.resize_canvas=document.createElement("canvas"),a.canvasWidth=null!=a.getInfo().maxWidth?a.getInfo().maxWidth:1.5*a.getInfo().maxHeight,a.canvasHeight=null!=a.getInfo().maxHeight?a.getInfo().maxHeight:1.5*a.getInfo().maxWidth,a.displayPicture=!1,a.saveEventState=function(b){a.event_state.container_width=a.container.width(),a.event_state.container_height=a.container.height(),a.event_state.container_left=a.container.offset().left,a.event_state.container_top=a.container.offset().top,a.event_state.mouse_x=(b.clientX||b.pageX||b.originalEvent.touches[0].clientX)+$(window).scrollLeft(),a.event_state.mouse_y=(b.clientY||b.pageY||b.originalEvent.touches[0].clientY)+$(window).scrollTop(),"undefined"!=typeof b.originalEvent.touches&&(a.event_state.touches=[],$.each(b.originalEvent.touches,function(b,c){a.event_state.touches[b]={},a.event_state.touches[b].clientX=0+c.clientX,a.event_state.touches[b].clientY=0+c.clientY})),a.event_state.evnt=b},a.resizeImage=function(b,c){a.resize_canvas.width=b,a.resize_canvas.height=c,a.resize_canvas.getContext("2d").drawImage(a.orig_src,0,0,b,c),$(a.image_target).attr("src",a.resize_canvas.toDataURL("image/png"))},a.startMoving=function(b){b.preventDefault(),b.stopPropagation(),a.saveEventState(b),$(document).on("mousemove touchmove",a.moving),$(document).on("mouseup touchend",a.endMoving)},a.endMoving=function(b){b.preventDefault(),$(document).off("mouseup touchend",a.endMoving),$(document).off("mousemove touchmove",a.moving)},a.moving=function(b){var c,d={};if(b.preventDefault(),b.stopPropagation(),c=b.originalEvent.touches,d.x=(b.clientX||b.pageX||c[0].clientX)+$(window).scrollLeft(),d.y=(b.clientY||b.pageY||c[0].clientY)+$(window).scrollTop(),a.container.offset({left:d.x-(a.event_state.mouse_x-a.event_state.container_left),top:d.y-(a.event_state.mouse_y-a.event_state.container_top)}),a.event_state.touches&&a.event_state.touches.length>1&&c.length>1){var e=a.event_state.container_width,f=a.event_state.container_height,g=a.event_state.touches[0].clientX-a.event_state.touches[1].clientX;g*=g;var h=a.event_state.touches[0].clientY-a.event_state.touches[1].clientY;h*=h;var i=Math.sqrt(g+h);g=b.originalEvent.touches[0].clientX-c[1].clientX,g*=g,h=b.originalEvent.touches[0].clientY-c[1].clientY,h*=h;var j=Math.sqrt(g+h),k=j/i;e*=k,f*=k,a.resizeImage(e,f)}},a.getInfo().callBackSave=function(){if(null!=a.image_target){var b,c=$(".image-tool-overlay").offset().left-a.container.offset().left,d=$(".image-tool-overlay").offset().top-a.container.offset().top,e=a.canvasWidth,f=a.canvasHeight;b=document.createElement("canvas"),b.width=e,b.height=f,console.log("result : "+c+"/"+d+"/"+e+"/"+f),b.getContext("2d").scale(a.scale,a.scale),b.getContext("2d").drawImage(a.image_target,c,d,e,f,0,0,e,f);var g=b.toDataURL();a.getInfo().result=g,console.log(g)}},a.zoom=function(b){if(null!=a.image_target){var c,d,e,f,g=.1;b?(console.log(a.image_target.width+"/"+(1+g)+"/"+a.image_target.width*(1+g)),c=a.image_target.width*(1+g),d=c/a.orig_src.width*a.orig_src.height,e=a.container.offset().left-Math.abs(a.image_target.width-c)/2,f=a.container.offset().top-Math.abs(a.image_target.height-d)/2):(c=a.image_target.width*(1-g),d=c/a.orig_src.width*a.orig_src.height,e=a.container.offset().left+Math.abs(a.image_target.width-c)/2,f=a.container.offset().top+Math.abs(a.image_target.height-d)/2),a.resize(c,d,e,f)}},a.resizing=function(b){var c,d,e,f,g={};a.container.offset();g.x=(b.clientX||b.pageX||b.originalEvent.touches[0].clientX)+$(window).scrollLeft(),g.y=(b.clientY||b.pageY||b.originalEvent.touches[0].clientY)+$(window).scrollTop(),$(a.event_state.evnt.target).hasClass("resize-handle-se")?(c=g.x-a.event_state.container_left,d=g.y-a.event_state.container_top,e=a.event_state.container_left,f=a.event_state.container_top):$(a.event_state.evnt.target).hasClass("resize-handle-sw")?(c=a.event_state.container_width-(g.x-a.event_state.container_left),d=g.y-a.event_state.container_top,e=g.x,f=a.event_state.container_top):$(a.event_state.evnt.target).hasClass("resize-handle-nw")?(c=a.event_state.container_width-(g.x-a.event_state.container_left),d=a.event_state.container_height-(g.y-a.event_state.container_top),e=g.x,f=g.y,(a.constrain||b.shiftKey)&&(f=g.y-(c/a.orig_src.width*a.orig_src.height-d))):$(a.event_state.evnt.target).hasClass("resize-handle-ne")&&(c=g.x-a.event_state.container_left,d=a.event_state.container_height-(g.y-a.event_state.container_top),e=a.event_state.container_left,f=g.y,(a.constrain||b.shiftKey)&&(f=g.y-(c/a.orig_src.width*a.orig_src.height-d))),a.resize(c,d,e,f)},a.resize=function(b,c,d,f){console.log(b+"/"+c+"/"+d+"/"+f),(a.constrain||e.shiftKey)&&(c=b/a.orig_src.width*a.orig_src.height),b>=a.min_width&&c>=a.min_height&&b<=a.max_width&&c<=a.max_height&&(a.resizeImage(b,c),a.container.offset({left:d,top:f}))},a.startResize=function(b){b.preventDefault(),b.stopPropagation(),a.saveEventState(b),$(document).on("mousemove touchmove",a.resizing),$(document).on("mouseup touchend",a.endResize)},a.endResize=function(b){b.preventDefault(),$(document).off("mouseup touchend",a.endResize),$(document).off("mousemove touchmove",a.resizing)},f(function(){a.displayPicture=!1,$(".resize-image").attr("src",a.getInfo().image),a.image_target=$(".resize-image").get(0),a.orig_src.src=a.getInfo().image,a.container=$(a.image_target).parent(".resize-container"),a.container.on("mousedown touchstart",".resize-handle",a.startResize),a.container.on("mousedown touchstart","img",a.startMoving),f(function(){var b=a.image_target.width,c=a.image_target.height;console.log(b+"/"+c),a.displayPicture=!0;var d=a.image_target.width/a.canvasWidth,e=a.image_target.height/a.canvasHeight;e>d||null==a.getInfo().maxHeight?a.resize(a.canvasWidth,a.image_target.height/d):a.resize(a.image_target.width/e,a.canvasHeight),console.log(".image-tool-overlay=>"+$(".image-tool-overlay").width()),$(".image-tool-overlay").width()<a.canvasWidth?a.scale=a.canvasWidth/$(".image-tool-overlay").width():a.scale=1,console.log(a.canvasHeight+"/"+a.scale),a.imageToolOverlayHeight=a.canvasHeight/a.scale,f(function(){var b=(a.image_target.width-a.canvasWidth)/2-1,c=(a.image_target.height-a.canvasHeight)/2-1;1>b&&(b=1),1>c&&(c=1),$(".resize-container").css("margin-left","-"+b+"px"),$(".resize-container").css("margin-top","-"+c+"px")},1)},1)},1)}}}}}]),myApp.controller("ConfirmAndShareModalCtrl",["$scope","facebookService","businessId","publicationId","$modalInstance",function(a,b,c,d,e){a.share=function(){b.sharePublication(c,d),a.close()},a.close=function(){e.close()}}]);